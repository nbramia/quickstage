function x0(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in e)){const a=Object.getOwnPropertyDescriptor(s,l);a&&Object.defineProperty(e,l,a.get?a:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function r(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=r(l);fetch(l.href,a)}})();function g0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gd={exports:{}},xl={},vd={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ls=Symbol.for("react.element"),v0=Symbol.for("react.portal"),y0=Symbol.for("react.fragment"),j0=Symbol.for("react.strict_mode"),w0=Symbol.for("react.profiler"),b0=Symbol.for("react.provider"),N0=Symbol.for("react.context"),k0=Symbol.for("react.forward_ref"),S0=Symbol.for("react.suspense"),C0=Symbol.for("react.memo"),E0=Symbol.for("react.lazy"),Go=Symbol.iterator;function P0(e){return e===null||typeof e!="object"?null:(e=Go&&e[Go]||e["@@iterator"],typeof e=="function"?e:null)}var yd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jd=Object.assign,wd={};function ir(e,t,r){this.props=e,this.context=t,this.refs=wd,this.updater=r||yd}ir.prototype.isReactComponent={};ir.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ir.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bd(){}bd.prototype=ir.prototype;function mi(e,t,r){this.props=e,this.context=t,this.refs=wd,this.updater=r||yd}var hi=mi.prototype=new bd;hi.constructor=mi;jd(hi,ir.prototype);hi.isPureReactComponent=!0;var Yo=Array.isArray,Nd=Object.prototype.hasOwnProperty,pi={current:null},kd={key:!0,ref:!0,__self:!0,__source:!0};function Sd(e,t,r){var s,l={},a=null,i=null;if(t!=null)for(s in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)Nd.call(t,s)&&!kd.hasOwnProperty(s)&&(l[s]=t[s]);var c=arguments.length-2;if(c===1)l.children=r;else if(1<c){for(var o=Array(c),d=0;d<c;d++)o[d]=arguments[d+2];l.children=o}if(e&&e.defaultProps)for(s in c=e.defaultProps,c)l[s]===void 0&&(l[s]=c[s]);return{$$typeof:ls,type:e,key:a,ref:i,props:l,_owner:pi.current}}function L0(e,t){return{$$typeof:ls,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fi(e){return typeof e=="object"&&e!==null&&e.$$typeof===ls}function _0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ko=/\/+/g;function Ul(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_0(""+e.key):t.toString(36)}function Ts(e,t,r,s,l){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case ls:case v0:i=!0}}if(i)return i=e,l=l(i),e=s===""?"."+Ul(i,0):s,Yo(l)?(r="",e!=null&&(r=e.replace(Ko,"$&/")+"/"),Ts(l,t,r,"",function(d){return d})):l!=null&&(fi(l)&&(l=L0(l,r+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(Ko,"$&/")+"/")+e)),t.push(l)),1;if(i=0,s=s===""?".":s+":",Yo(e))for(var c=0;c<e.length;c++){a=e[c];var o=s+Ul(a,c);i+=Ts(a,t,r,o,l)}else if(o=P0(e),typeof o=="function")for(e=o.call(e),c=0;!(a=e.next()).done;)a=a.value,o=s+Ul(a,c++),i+=Ts(a,t,r,o,l);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function ps(e,t,r){if(e==null)return e;var s=[],l=0;return Ts(e,s,"","",function(a){return t.call(r,a,l++)}),s}function R0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Be={current:null},As={transition:null},M0={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:As,ReactCurrentOwner:pi};function Cd(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:ps,forEach:function(e,t,r){ps(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ps(e,function(){t++}),t},toArray:function(e){return ps(e,function(t){return t})||[]},only:function(e){if(!fi(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};X.Component=ir;X.Fragment=y0;X.Profiler=w0;X.PureComponent=mi;X.StrictMode=j0;X.Suspense=S0;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M0;X.act=Cd;X.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=jd({},e.props),l=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=pi.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(o in t)Nd.call(t,o)&&!kd.hasOwnProperty(o)&&(s[o]=t[o]===void 0&&c!==void 0?c[o]:t[o])}var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){c=Array(o);for(var d=0;d<o;d++)c[d]=arguments[d+2];s.children=c}return{$$typeof:ls,type:e.type,key:l,ref:a,props:s,_owner:i}};X.createContext=function(e){return e={$$typeof:N0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:b0,_context:e},e.Consumer=e};X.createElement=Sd;X.createFactory=function(e){var t=Sd.bind(null,e);return t.type=e,t};X.createRef=function(){return{current:null}};X.forwardRef=function(e){return{$$typeof:k0,render:e}};X.isValidElement=fi;X.lazy=function(e){return{$$typeof:E0,_payload:{_status:-1,_result:e},_init:R0}};X.memo=function(e,t){return{$$typeof:C0,type:e,compare:t===void 0?null:t}};X.startTransition=function(e){var t=As.transition;As.transition={};try{e()}finally{As.transition=t}};X.unstable_act=Cd;X.useCallback=function(e,t){return Be.current.useCallback(e,t)};X.useContext=function(e){return Be.current.useContext(e)};X.useDebugValue=function(){};X.useDeferredValue=function(e){return Be.current.useDeferredValue(e)};X.useEffect=function(e,t){return Be.current.useEffect(e,t)};X.useId=function(){return Be.current.useId()};X.useImperativeHandle=function(e,t,r){return Be.current.useImperativeHandle(e,t,r)};X.useInsertionEffect=function(e,t){return Be.current.useInsertionEffect(e,t)};X.useLayoutEffect=function(e,t){return Be.current.useLayoutEffect(e,t)};X.useMemo=function(e,t){return Be.current.useMemo(e,t)};X.useReducer=function(e,t,r){return Be.current.useReducer(e,t,r)};X.useRef=function(e){return Be.current.useRef(e)};X.useState=function(e){return Be.current.useState(e)};X.useSyncExternalStore=function(e,t,r){return Be.current.useSyncExternalStore(e,t,r)};X.useTransition=function(){return Be.current.useTransition()};X.version="18.3.1";vd.exports=X;var p=vd.exports;const qn=g0(p),T0=x0({__proto__:null,default:qn},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0=p,z0=Symbol.for("react.element"),D0=Symbol.for("react.fragment"),F0=Object.prototype.hasOwnProperty,I0=A0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U0={key:!0,ref:!0,__self:!0,__source:!0};function Ed(e,t,r){var s,l={},a=null,i=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)F0.call(t,s)&&!U0.hasOwnProperty(s)&&(l[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)l[s]===void 0&&(l[s]=t[s]);return{$$typeof:z0,type:e,key:a,ref:i,props:l,_owner:I0.current}}xl.Fragment=D0;xl.jsx=Ed;xl.jsxs=Ed;gd.exports=xl;var n=gd.exports,ha={},Pd={exports:{}},tt={},Ld={exports:{}},_d={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,z){var B=L.length;L.push(z);e:for(;0<B;){var K=B-1>>>1,te=L[K];if(0<l(te,z))L[K]=z,L[B]=te,B=K;else break e}}function r(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var z=L[0],B=L.pop();if(B!==z){L[0]=B;e:for(var K=0,te=L.length,ae=te>>>1;K<ae;){var he=2*(K+1)-1,ke=L[he],ie=he+1,pe=L[ie];if(0>l(ke,B))ie<te&&0>l(pe,ke)?(L[K]=pe,L[ie]=B,K=ie):(L[K]=ke,L[he]=B,K=he);else if(ie<te&&0>l(pe,B))L[K]=pe,L[ie]=B,K=ie;else break e}}return z}function l(L,z){var B=L.sortIndex-z.sortIndex;return B!==0?B:L.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,c=i.now();e.unstable_now=function(){return i.now()-c}}var o=[],d=[],x=1,h=null,g=3,N=!1,j=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function u(L){for(var z=r(d);z!==null;){if(z.callback===null)s(d);else if(z.startTime<=L)s(d),z.sortIndex=z.expirationTime,t(o,z);else break;z=r(d)}}function b(L){if(y=!1,u(L),!j)if(r(o)!==null)j=!0,_(w);else{var z=r(d);z!==null&&V(b,z.startTime-L)}}function w(L,z){j=!1,y&&(y=!1,f(E),E=-1),N=!0;var B=g;try{for(u(z),h=r(o);h!==null&&(!(h.expirationTime>z)||L&&!D());){var K=h.callback;if(typeof K=="function"){h.callback=null,g=h.priorityLevel;var te=K(h.expirationTime<=z);z=e.unstable_now(),typeof te=="function"?h.callback=te:h===r(o)&&s(o),u(z)}else s(o);h=r(o)}if(h!==null)var ae=!0;else{var he=r(d);he!==null&&V(b,he.startTime-z),ae=!1}return ae}finally{h=null,g=B,N=!1}}var k=!1,P=null,E=-1,A=5,F=-1;function D(){return!(e.unstable_now()-F<A)}function G(){if(P!==null){var L=e.unstable_now();F=L;var z=!0;try{z=P(!0,L)}finally{z?q():(k=!1,P=null)}}else k=!1}var q;if(typeof m=="function")q=function(){m(G)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,re=J.port2;J.port1.onmessage=G,q=function(){re.postMessage(null)}}else q=function(){S(G,0)};function _(L){P=L,k||(k=!0,q())}function V(L,z){E=S(function(){L(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){j||N||(j=!0,_(w))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(L){switch(g){case 1:case 2:case 3:var z=3;break;default:z=g}var B=g;g=z;try{return L()}finally{g=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,z){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var B=g;g=L;try{return z()}finally{g=B}},e.unstable_scheduleCallback=function(L,z,B){var K=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?K+B:K):B=K,L){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=B+te,L={id:x++,callback:z,priorityLevel:L,startTime:B,expirationTime:te,sortIndex:-1},B>K?(L.sortIndex=B,t(d,L),r(o)===null&&L===r(d)&&(y?(f(E),E=-1):y=!0,V(b,B-K))):(L.sortIndex=te,t(o,L),j||N||(j=!0,_(w))),L},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(L){var z=g;return function(){var B=g;g=z;try{return L.apply(this,arguments)}finally{g=B}}}})(_d);Ld.exports=_d;var $0=Ld.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0=p,et=$0;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rd=new Set,$r={};function Pn(e,t){er(e,t),er(e+"Capture",t)}function er(e,t){for($r[e]=t,e=0;e<t.length;e++)Rd.add(t[e])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pa=Object.prototype.hasOwnProperty,O0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xo={},Jo={};function W0(e){return pa.call(Jo,e)?!0:pa.call(Xo,e)?!1:O0.test(e)?Jo[e]=!0:(Xo[e]=!0,!1)}function V0(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function H0(e,t,r,s){if(t===null||typeof t>"u"||V0(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Oe(e,t,r,s,l,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Te[e]=new Oe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Te[t]=new Oe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Te[e]=new Oe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Te[e]=new Oe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Te[e]=new Oe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Te[e]=new Oe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Te[e]=new Oe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Te[e]=new Oe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Te[e]=new Oe(e,5,!1,e.toLowerCase(),null,!1,!1)});var xi=/[\-:]([a-z])/g;function gi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(xi,gi);Te[t]=new Oe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(xi,gi);Te[t]=new Oe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(xi,gi);Te[t]=new Oe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Te[e]=new Oe(e,1,!1,e.toLowerCase(),null,!1,!1)});Te.xlinkHref=new Oe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Te[e]=new Oe(e,1,!1,e.toLowerCase(),null,!0,!0)});function vi(e,t,r,s){var l=Te.hasOwnProperty(t)?Te[t]:null;(l!==null?l.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(H0(t,r,l,s)&&(r=null),s||l===null?W0(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):l.mustUseProperty?e[l.propertyName]=r===null?l.type===3?!1:"":r:(t=l.attributeName,s=l.attributeNamespace,r===null?e.removeAttribute(t):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Bt=B0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fs=Symbol.for("react.element"),zn=Symbol.for("react.portal"),Dn=Symbol.for("react.fragment"),yi=Symbol.for("react.strict_mode"),fa=Symbol.for("react.profiler"),Md=Symbol.for("react.provider"),Td=Symbol.for("react.context"),ji=Symbol.for("react.forward_ref"),xa=Symbol.for("react.suspense"),ga=Symbol.for("react.suspense_list"),wi=Symbol.for("react.memo"),Qt=Symbol.for("react.lazy"),Ad=Symbol.for("react.offscreen"),Zo=Symbol.iterator;function xr(e){return e===null||typeof e!="object"?null:(e=Zo&&e[Zo]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Object.assign,$l;function Er(e){if($l===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);$l=t&&t[1]||""}return`
`+$l+e}var Bl=!1;function Ol(e,t){if(!e||Bl)return"";Bl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var l=d.stack.split(`
`),a=s.stack.split(`
`),i=l.length-1,c=a.length-1;1<=i&&0<=c&&l[i]!==a[c];)c--;for(;1<=i&&0<=c;i--,c--)if(l[i]!==a[c]){if(i!==1||c!==1)do if(i--,c--,0>c||l[i]!==a[c]){var o=`
`+l[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=i&&0<=c);break}}}finally{Bl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Er(e):""}function Q0(e){switch(e.tag){case 5:return Er(e.type);case 16:return Er("Lazy");case 13:return Er("Suspense");case 19:return Er("SuspenseList");case 0:case 2:case 15:return e=Ol(e.type,!1),e;case 11:return e=Ol(e.type.render,!1),e;case 1:return e=Ol(e.type,!0),e;default:return""}}function va(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Dn:return"Fragment";case zn:return"Portal";case fa:return"Profiler";case yi:return"StrictMode";case xa:return"Suspense";case ga:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Td:return(e.displayName||"Context")+".Consumer";case Md:return(e._context.displayName||"Context")+".Provider";case ji:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wi:return t=e.displayName||null,t!==null?t:va(e.type)||"Memo";case Qt:t=e._payload,e=e._init;try{return va(e(t))}catch{}}return null}function q0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return va(t);case 8:return t===yi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function G0(e){var t=zd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){s=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xs(e){e._valueTracker||(e._valueTracker=G0(e))}function Dd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=zd(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Hs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ya(e,t){var r=t.checked;return ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ec(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=cn(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Fd(e,t){t=t.checked,t!=null&&vi(e,"checked",t,!1)}function ja(e,t){Fd(e,t);var r=cn(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?wa(e,t.type,r):t.hasOwnProperty("defaultValue")&&wa(e,t.type,cn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function tc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function wa(e,t,r){(t!=="number"||Hs(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Pr=Array.isArray;function Gn(e,t,r,s){if(e=e.options,t){t={};for(var l=0;l<r.length;l++)t["$"+r[l]]=!0;for(r=0;r<e.length;r++)l=t.hasOwnProperty("$"+e[r].value),e[r].selected!==l&&(e[r].selected=l),l&&s&&(e[r].defaultSelected=!0)}else{for(r=""+cn(r),t=null,l=0;l<e.length;l++){if(e[l].value===r){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function ba(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(M(92));if(Pr(r)){if(1<r.length)throw Error(M(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:cn(r)}}function Id(e,t){var r=cn(t.value),s=cn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function rc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ud(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Na(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ud(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gs,$d=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,l){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(gs=gs||document.createElement("div"),gs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Br(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Rr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Y0=["Webkit","ms","Moz","O"];Object.keys(Rr).forEach(function(e){Y0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rr[t]=Rr[e]})});function Bd(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Rr.hasOwnProperty(e)&&Rr[e]?(""+t).trim():t+"px"}function Od(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,l=Bd(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,l):e[r]=l}}var K0=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ka(e,t){if(t){if(K0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function Sa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ca=null;function bi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ea=null,Yn=null,Kn=null;function sc(e){if(e=os(e)){if(typeof Ea!="function")throw Error(M(280));var t=e.stateNode;t&&(t=wl(t),Ea(e.stateNode,e.type,t))}}function Wd(e){Yn?Kn?Kn.push(e):Kn=[e]:Yn=e}function Vd(){if(Yn){var e=Yn,t=Kn;if(Kn=Yn=null,sc(e),t)for(e=0;e<t.length;e++)sc(t[e])}}function Hd(e,t){return e(t)}function Qd(){}var Wl=!1;function qd(e,t,r){if(Wl)return e(t,r);Wl=!0;try{return Hd(e,t,r)}finally{Wl=!1,(Yn!==null||Kn!==null)&&(Qd(),Vd())}}function Or(e,t){var r=e.stateNode;if(r===null)return null;var s=wl(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(M(231,t,typeof r));return r}var Pa=!1;if(Ft)try{var gr={};Object.defineProperty(gr,"passive",{get:function(){Pa=!0}}),window.addEventListener("test",gr,gr),window.removeEventListener("test",gr,gr)}catch{Pa=!1}function X0(e,t,r,s,l,a,i,c,o){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(x){this.onError(x)}}var Mr=!1,Qs=null,qs=!1,La=null,J0={onError:function(e){Mr=!0,Qs=e}};function Z0(e,t,r,s,l,a,i,c,o){Mr=!1,Qs=null,X0.apply(J0,arguments)}function eh(e,t,r,s,l,a,i,c,o){if(Z0.apply(this,arguments),Mr){if(Mr){var d=Qs;Mr=!1,Qs=null}else throw Error(M(198));qs||(qs=!0,La=d)}}function Ln(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Gd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function lc(e){if(Ln(e)!==e)throw Error(M(188))}function th(e){var t=e.alternate;if(!t){if(t=Ln(e),t===null)throw Error(M(188));return t!==e?null:e}for(var r=e,s=t;;){var l=r.return;if(l===null)break;var a=l.alternate;if(a===null){if(s=l.return,s!==null){r=s;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===r)return lc(l),e;if(a===s)return lc(l),t;a=a.sibling}throw Error(M(188))}if(r.return!==s.return)r=l,s=a;else{for(var i=!1,c=l.child;c;){if(c===r){i=!0,r=l,s=a;break}if(c===s){i=!0,s=l,r=a;break}c=c.sibling}if(!i){for(c=a.child;c;){if(c===r){i=!0,r=a,s=l;break}if(c===s){i=!0,s=a,r=l;break}c=c.sibling}if(!i)throw Error(M(189))}}if(r.alternate!==s)throw Error(M(190))}if(r.tag!==3)throw Error(M(188));return r.stateNode.current===r?e:t}function Yd(e){return e=th(e),e!==null?Kd(e):null}function Kd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Kd(e);if(t!==null)return t;e=e.sibling}return null}var Xd=et.unstable_scheduleCallback,ac=et.unstable_cancelCallback,nh=et.unstable_shouldYield,rh=et.unstable_requestPaint,je=et.unstable_now,sh=et.unstable_getCurrentPriorityLevel,Ni=et.unstable_ImmediatePriority,Jd=et.unstable_UserBlockingPriority,Gs=et.unstable_NormalPriority,lh=et.unstable_LowPriority,Zd=et.unstable_IdlePriority,gl=null,St=null;function ah(e){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(gl,e,void 0,(e.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:ch,ih=Math.log,oh=Math.LN2;function ch(e){return e>>>=0,e===0?32:31-(ih(e)/oh|0)|0}var vs=64,ys=4194304;function Lr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ys(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,l=e.suspendedLanes,a=e.pingedLanes,i=r&268435455;if(i!==0){var c=i&~l;c!==0?s=Lr(c):(a&=i,a!==0&&(s=Lr(a)))}else i=r&~l,i!==0?s=Lr(i):a!==0&&(s=Lr(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&l)&&(l=s&-s,a=t&-t,l>=a||l===16&&(a&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-vt(t),l=1<<r,s|=e[r],t&=~l;return s}function dh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uh(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-vt(a),c=1<<i,o=l[i];o===-1?(!(c&r)||c&s)&&(l[i]=dh(c,t)):o<=t&&(e.expiredLanes|=c),a&=~c}}function _a(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function eu(){var e=vs;return vs<<=1,!(vs&4194240)&&(vs=64),e}function Vl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function as(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vt(t),e[t]=r}function mh(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var l=31-vt(r),a=1<<l;t[l]=0,s[l]=-1,e[l]=-1,r&=~a}}function ki(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-vt(r),l=1<<s;l&t|e[s]&t&&(e[s]|=t),r&=~l}}var le=0;function tu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var nu,Si,ru,su,lu,Ra=!1,js=[],Zt=null,en=null,tn=null,Wr=new Map,Vr=new Map,Gt=[],hh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ic(e,t){switch(e){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":en=null;break;case"mouseover":case"mouseout":tn=null;break;case"pointerover":case"pointerout":Wr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vr.delete(t.pointerId)}}function vr(e,t,r,s,l,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[l]},t!==null&&(t=os(t),t!==null&&Si(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function ph(e,t,r,s,l){switch(t){case"focusin":return Zt=vr(Zt,e,t,r,s,l),!0;case"dragenter":return en=vr(en,e,t,r,s,l),!0;case"mouseover":return tn=vr(tn,e,t,r,s,l),!0;case"pointerover":var a=l.pointerId;return Wr.set(a,vr(Wr.get(a)||null,e,t,r,s,l)),!0;case"gotpointercapture":return a=l.pointerId,Vr.set(a,vr(Vr.get(a)||null,e,t,r,s,l)),!0}return!1}function au(e){var t=vn(e.target);if(t!==null){var r=Ln(t);if(r!==null){if(t=r.tag,t===13){if(t=Gd(r),t!==null){e.blockedOn=t,lu(e.priority,function(){ru(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ma(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Ca=s,r.target.dispatchEvent(s),Ca=null}else return t=os(r),t!==null&&Si(t),e.blockedOn=r,!1;t.shift()}return!0}function oc(e,t,r){zs(e)&&r.delete(t)}function fh(){Ra=!1,Zt!==null&&zs(Zt)&&(Zt=null),en!==null&&zs(en)&&(en=null),tn!==null&&zs(tn)&&(tn=null),Wr.forEach(oc),Vr.forEach(oc)}function yr(e,t){e.blockedOn===t&&(e.blockedOn=null,Ra||(Ra=!0,et.unstable_scheduleCallback(et.unstable_NormalPriority,fh)))}function Hr(e){function t(l){return yr(l,e)}if(0<js.length){yr(js[0],e);for(var r=1;r<js.length;r++){var s=js[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Zt!==null&&yr(Zt,e),en!==null&&yr(en,e),tn!==null&&yr(tn,e),Wr.forEach(t),Vr.forEach(t),r=0;r<Gt.length;r++)s=Gt[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Gt.length&&(r=Gt[0],r.blockedOn===null);)au(r),r.blockedOn===null&&Gt.shift()}var Xn=Bt.ReactCurrentBatchConfig,Ks=!0;function xh(e,t,r,s){var l=le,a=Xn.transition;Xn.transition=null;try{le=1,Ci(e,t,r,s)}finally{le=l,Xn.transition=a}}function gh(e,t,r,s){var l=le,a=Xn.transition;Xn.transition=null;try{le=4,Ci(e,t,r,s)}finally{le=l,Xn.transition=a}}function Ci(e,t,r,s){if(Ks){var l=Ma(e,t,r,s);if(l===null)ea(e,t,s,Xs,r),ic(e,s);else if(ph(l,e,t,r,s))s.stopPropagation();else if(ic(e,s),t&4&&-1<hh.indexOf(e)){for(;l!==null;){var a=os(l);if(a!==null&&nu(a),a=Ma(e,t,r,s),a===null&&ea(e,t,s,Xs,r),a===l)break;l=a}l!==null&&s.stopPropagation()}else ea(e,t,s,null,r)}}var Xs=null;function Ma(e,t,r,s){if(Xs=null,e=bi(s),e=vn(e),e!==null)if(t=Ln(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Gd(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xs=e,null}function iu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sh()){case Ni:return 1;case Jd:return 4;case Gs:case lh:return 16;case Zd:return 536870912;default:return 16}default:return 16}}var Kt=null,Ei=null,Ds=null;function ou(){if(Ds)return Ds;var e,t=Ei,r=t.length,s,l="value"in Kt?Kt.value:Kt.textContent,a=l.length;for(e=0;e<r&&t[e]===l[e];e++);var i=r-e;for(s=1;s<=i&&t[r-s]===l[a-s];s++);return Ds=l.slice(e,1<s?1-s:void 0)}function Fs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ws(){return!0}function cc(){return!1}function nt(e){function t(r,s,l,a,i){this._reactName=r,this._targetInst=l,this.type=s,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ws:cc,this.isPropagationStopped=cc,this}return ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),t}var or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pi=nt(or),is=ve({},or,{view:0,detail:0}),vh=nt(is),Hl,Ql,jr,vl=ve({},is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Li,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jr&&(jr&&e.type==="mousemove"?(Hl=e.screenX-jr.screenX,Ql=e.screenY-jr.screenY):Ql=Hl=0,jr=e),Hl)},movementY:function(e){return"movementY"in e?e.movementY:Ql}}),dc=nt(vl),yh=ve({},vl,{dataTransfer:0}),jh=nt(yh),wh=ve({},is,{relatedTarget:0}),ql=nt(wh),bh=ve({},or,{animationName:0,elapsedTime:0,pseudoElement:0}),Nh=nt(bh),kh=ve({},or,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sh=nt(kh),Ch=ve({},or,{data:0}),uc=nt(Ch),Eh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ph={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _h(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lh[e])?!!t[e]:!1}function Li(){return _h}var Rh=ve({},is,{key:function(e){if(e.key){var t=Eh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ph[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Li,charCode:function(e){return e.type==="keypress"?Fs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Mh=nt(Rh),Th=ve({},vl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mc=nt(Th),Ah=ve({},is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Li}),zh=nt(Ah),Dh=ve({},or,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fh=nt(Dh),Ih=ve({},vl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Uh=nt(Ih),$h=[9,13,27,32],_i=Ft&&"CompositionEvent"in window,Tr=null;Ft&&"documentMode"in document&&(Tr=document.documentMode);var Bh=Ft&&"TextEvent"in window&&!Tr,cu=Ft&&(!_i||Tr&&8<Tr&&11>=Tr),hc=" ",pc=!1;function du(e,t){switch(e){case"keyup":return $h.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fn=!1;function Oh(e,t){switch(e){case"compositionend":return uu(t);case"keypress":return t.which!==32?null:(pc=!0,hc);case"textInput":return e=t.data,e===hc&&pc?null:e;default:return null}}function Wh(e,t){if(Fn)return e==="compositionend"||!_i&&du(e,t)?(e=ou(),Ds=Ei=Kt=null,Fn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return cu&&t.locale!=="ko"?null:t.data;default:return null}}var Vh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Vh[e.type]:t==="textarea"}function mu(e,t,r,s){Wd(s),t=Js(t,"onChange"),0<t.length&&(r=new Pi("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Ar=null,Qr=null;function Hh(e){Nu(e,0)}function yl(e){var t=$n(e);if(Dd(t))return e}function Qh(e,t){if(e==="change")return t}var hu=!1;if(Ft){var Gl;if(Ft){var Yl="oninput"in document;if(!Yl){var xc=document.createElement("div");xc.setAttribute("oninput","return;"),Yl=typeof xc.oninput=="function"}Gl=Yl}else Gl=!1;hu=Gl&&(!document.documentMode||9<document.documentMode)}function gc(){Ar&&(Ar.detachEvent("onpropertychange",pu),Qr=Ar=null)}function pu(e){if(e.propertyName==="value"&&yl(Qr)){var t=[];mu(t,Qr,e,bi(e)),qd(Hh,t)}}function qh(e,t,r){e==="focusin"?(gc(),Ar=t,Qr=r,Ar.attachEvent("onpropertychange",pu)):e==="focusout"&&gc()}function Gh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yl(Qr)}function Yh(e,t){if(e==="click")return yl(t)}function Kh(e,t){if(e==="input"||e==="change")return yl(t)}function Xh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jt=typeof Object.is=="function"?Object.is:Xh;function qr(e,t){if(jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var l=r[s];if(!pa.call(t,l)||!jt(e[l],t[l]))return!1}return!0}function vc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yc(e,t){var r=vc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vc(r)}}function fu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?fu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xu(){for(var e=window,t=Hs();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Hs(e.document)}return t}function Ri(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Jh(e){var t=xu(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&fu(r.ownerDocument.documentElement,r)){if(s!==null&&Ri(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=r.textContent.length,a=Math.min(s.start,l);s=s.end===void 0?a:Math.min(s.end,l),!e.extend&&a>s&&(l=s,s=a,a=l),l=yc(r,a);var i=yc(r,s);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Zh=Ft&&"documentMode"in document&&11>=document.documentMode,In=null,Ta=null,zr=null,Aa=!1;function jc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Aa||In==null||In!==Hs(s)||(s=In,"selectionStart"in s&&Ri(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),zr&&qr(zr,s)||(zr=s,s=Js(Ta,"onSelect"),0<s.length&&(t=new Pi("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=In)))}function bs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Un={animationend:bs("Animation","AnimationEnd"),animationiteration:bs("Animation","AnimationIteration"),animationstart:bs("Animation","AnimationStart"),transitionend:bs("Transition","TransitionEnd")},Kl={},gu={};Ft&&(gu=document.createElement("div").style,"AnimationEvent"in window||(delete Un.animationend.animation,delete Un.animationiteration.animation,delete Un.animationstart.animation),"TransitionEvent"in window||delete Un.transitionend.transition);function jl(e){if(Kl[e])return Kl[e];if(!Un[e])return e;var t=Un[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in gu)return Kl[e]=t[r];return e}var vu=jl("animationend"),yu=jl("animationiteration"),ju=jl("animationstart"),wu=jl("transitionend"),bu=new Map,wc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function un(e,t){bu.set(e,t),Pn(t,[e])}for(var Xl=0;Xl<wc.length;Xl++){var Jl=wc[Xl],ep=Jl.toLowerCase(),tp=Jl[0].toUpperCase()+Jl.slice(1);un(ep,"on"+tp)}un(vu,"onAnimationEnd");un(yu,"onAnimationIteration");un(ju,"onAnimationStart");un("dblclick","onDoubleClick");un("focusin","onFocus");un("focusout","onBlur");un(wu,"onTransitionEnd");er("onMouseEnter",["mouseout","mouseover"]);er("onMouseLeave",["mouseout","mouseover"]);er("onPointerEnter",["pointerout","pointerover"]);er("onPointerLeave",["pointerout","pointerover"]);Pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),np=new Set("cancel close invalid load scroll toggle".split(" ").concat(_r));function bc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,eh(s,t,void 0,e),e.currentTarget=null}function Nu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],l=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var i=s.length-1;0<=i;i--){var c=s[i],o=c.instance,d=c.currentTarget;if(c=c.listener,o!==a&&l.isPropagationStopped())break e;bc(l,c,d),a=o}else for(i=0;i<s.length;i++){if(c=s[i],o=c.instance,d=c.currentTarget,c=c.listener,o!==a&&l.isPropagationStopped())break e;bc(l,c,d),a=o}}}if(qs)throw e=La,qs=!1,La=null,e}function ce(e,t){var r=t[Ua];r===void 0&&(r=t[Ua]=new Set);var s=e+"__bubble";r.has(s)||(ku(t,e,2,!1),r.add(s))}function Zl(e,t,r){var s=0;t&&(s|=4),ku(r,e,s,t)}var Ns="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[Ns]){e[Ns]=!0,Rd.forEach(function(r){r!=="selectionchange"&&(np.has(r)||Zl(r,!1,e),Zl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ns]||(t[Ns]=!0,Zl("selectionchange",!1,t))}}function ku(e,t,r,s){switch(iu(t)){case 1:var l=xh;break;case 4:l=gh;break;default:l=Ci}r=l.bind(null,t,r,e),l=void 0,!Pa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,r,{capture:!0,passive:l}):e.addEventListener(t,r,!0):l!==void 0?e.addEventListener(t,r,{passive:l}):e.addEventListener(t,r,!1)}function ea(e,t,r,s,l){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var c=s.stateNode.containerInfo;if(c===l||c.nodeType===8&&c.parentNode===l)break;if(i===4)for(i=s.return;i!==null;){var o=i.tag;if((o===3||o===4)&&(o=i.stateNode.containerInfo,o===l||o.nodeType===8&&o.parentNode===l))return;i=i.return}for(;c!==null;){if(i=vn(c),i===null)return;if(o=i.tag,o===5||o===6){s=a=i;continue e}c=c.parentNode}}s=s.return}qd(function(){var d=a,x=bi(r),h=[];e:{var g=bu.get(e);if(g!==void 0){var N=Pi,j=e;switch(e){case"keypress":if(Fs(r)===0)break e;case"keydown":case"keyup":N=Mh;break;case"focusin":j="focus",N=ql;break;case"focusout":j="blur",N=ql;break;case"beforeblur":case"afterblur":N=ql;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=jh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=zh;break;case vu:case yu:case ju:N=Nh;break;case wu:N=Fh;break;case"scroll":N=vh;break;case"wheel":N=Uh;break;case"copy":case"cut":case"paste":N=Sh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=mc}var y=(t&4)!==0,S=!y&&e==="scroll",f=y?g!==null?g+"Capture":null:g;y=[];for(var m=d,u;m!==null;){u=m;var b=u.stateNode;if(u.tag===5&&b!==null&&(u=b,f!==null&&(b=Or(m,f),b!=null&&y.push(Yr(m,b,u)))),S)break;m=m.return}0<y.length&&(g=new N(g,j,null,r,x),h.push({event:g,listeners:y}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",g&&r!==Ca&&(j=r.relatedTarget||r.fromElement)&&(vn(j)||j[It]))break e;if((N||g)&&(g=x.window===x?x:(g=x.ownerDocument)?g.defaultView||g.parentWindow:window,N?(j=r.relatedTarget||r.toElement,N=d,j=j?vn(j):null,j!==null&&(S=Ln(j),j!==S||j.tag!==5&&j.tag!==6)&&(j=null)):(N=null,j=d),N!==j)){if(y=dc,b="onMouseLeave",f="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=mc,b="onPointerLeave",f="onPointerEnter",m="pointer"),S=N==null?g:$n(N),u=j==null?g:$n(j),g=new y(b,m+"leave",N,r,x),g.target=S,g.relatedTarget=u,b=null,vn(x)===d&&(y=new y(f,m+"enter",j,r,x),y.target=u,y.relatedTarget=S,b=y),S=b,N&&j)t:{for(y=N,f=j,m=0,u=y;u;u=Tn(u))m++;for(u=0,b=f;b;b=Tn(b))u++;for(;0<m-u;)y=Tn(y),m--;for(;0<u-m;)f=Tn(f),u--;for(;m--;){if(y===f||f!==null&&y===f.alternate)break t;y=Tn(y),f=Tn(f)}y=null}else y=null;N!==null&&Nc(h,g,N,y,!1),j!==null&&S!==null&&Nc(h,S,j,y,!0)}}e:{if(g=d?$n(d):window,N=g.nodeName&&g.nodeName.toLowerCase(),N==="select"||N==="input"&&g.type==="file")var w=Qh;else if(fc(g))if(hu)w=Kh;else{w=Gh;var k=qh}else(N=g.nodeName)&&N.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(w=Yh);if(w&&(w=w(e,d))){mu(h,w,r,x);break e}k&&k(e,g,d),e==="focusout"&&(k=g._wrapperState)&&k.controlled&&g.type==="number"&&wa(g,"number",g.value)}switch(k=d?$n(d):window,e){case"focusin":(fc(k)||k.contentEditable==="true")&&(In=k,Ta=d,zr=null);break;case"focusout":zr=Ta=In=null;break;case"mousedown":Aa=!0;break;case"contextmenu":case"mouseup":case"dragend":Aa=!1,jc(h,r,x);break;case"selectionchange":if(Zh)break;case"keydown":case"keyup":jc(h,r,x)}var P;if(_i)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Fn?du(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(cu&&r.locale!=="ko"&&(Fn||E!=="onCompositionStart"?E==="onCompositionEnd"&&Fn&&(P=ou()):(Kt=x,Ei="value"in Kt?Kt.value:Kt.textContent,Fn=!0)),k=Js(d,E),0<k.length&&(E=new uc(E,e,null,r,x),h.push({event:E,listeners:k}),P?E.data=P:(P=uu(r),P!==null&&(E.data=P)))),(P=Bh?Oh(e,r):Wh(e,r))&&(d=Js(d,"onBeforeInput"),0<d.length&&(x=new uc("onBeforeInput","beforeinput",null,r,x),h.push({event:x,listeners:d}),x.data=P))}Nu(h,t)})}function Yr(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Js(e,t){for(var r=t+"Capture",s=[];e!==null;){var l=e,a=l.stateNode;l.tag===5&&a!==null&&(l=a,a=Or(e,r),a!=null&&s.unshift(Yr(e,a,l)),a=Or(e,t),a!=null&&s.push(Yr(e,a,l))),e=e.return}return s}function Tn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nc(e,t,r,s,l){for(var a=t._reactName,i=[];r!==null&&r!==s;){var c=r,o=c.alternate,d=c.stateNode;if(o!==null&&o===s)break;c.tag===5&&d!==null&&(c=d,l?(o=Or(r,a),o!=null&&i.unshift(Yr(r,o,c))):l||(o=Or(r,a),o!=null&&i.push(Yr(r,o,c)))),r=r.return}i.length!==0&&e.push({event:t,listeners:i})}var rp=/\r\n?/g,sp=/\u0000|\uFFFD/g;function kc(e){return(typeof e=="string"?e:""+e).replace(rp,`
`).replace(sp,"")}function ks(e,t,r){if(t=kc(t),kc(e)!==t&&r)throw Error(M(425))}function Zs(){}var za=null,Da=null;function Fa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ia=typeof setTimeout=="function"?setTimeout:void 0,lp=typeof clearTimeout=="function"?clearTimeout:void 0,Sc=typeof Promise=="function"?Promise:void 0,ap=typeof queueMicrotask=="function"?queueMicrotask:typeof Sc<"u"?function(e){return Sc.resolve(null).then(e).catch(ip)}:Ia;function ip(e){setTimeout(function(){throw e})}function ta(e,t){var r=t,s=0;do{var l=r.nextSibling;if(e.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(s===0){e.removeChild(l),Hr(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=l}while(r);Hr(t)}function nn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Cc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var cr=Math.random().toString(36).slice(2),kt="__reactFiber$"+cr,Kr="__reactProps$"+cr,It="__reactContainer$"+cr,Ua="__reactEvents$"+cr,op="__reactListeners$"+cr,cp="__reactHandles$"+cr;function vn(e){var t=e[kt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[It]||r[kt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Cc(e);e!==null;){if(r=e[kt])return r;e=Cc(e)}return t}e=r,r=e.parentNode}return null}function os(e){return e=e[kt]||e[It],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function $n(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function wl(e){return e[Kr]||null}var $a=[],Bn=-1;function mn(e){return{current:e}}function de(e){0>Bn||(e.current=$a[Bn],$a[Bn]=null,Bn--)}function oe(e,t){Bn++,$a[Bn]=e.current,e.current=t}var dn={},Fe=mn(dn),Qe=mn(!1),Nn=dn;function tr(e,t){var r=e.type.contextTypes;if(!r)return dn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var l={},a;for(a in r)l[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function qe(e){return e=e.childContextTypes,e!=null}function el(){de(Qe),de(Fe)}function Ec(e,t,r){if(Fe.current!==dn)throw Error(M(168));oe(Fe,t),oe(Qe,r)}function Su(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var l in s)if(!(l in t))throw Error(M(108,q0(e)||"Unknown",l));return ve({},r,s)}function tl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dn,Nn=Fe.current,oe(Fe,e),oe(Qe,Qe.current),!0}function Pc(e,t,r){var s=e.stateNode;if(!s)throw Error(M(169));r?(e=Su(e,t,Nn),s.__reactInternalMemoizedMergedChildContext=e,de(Qe),de(Fe),oe(Fe,e)):de(Qe),oe(Qe,r)}var Mt=null,bl=!1,na=!1;function Cu(e){Mt===null?Mt=[e]:Mt.push(e)}function dp(e){bl=!0,Cu(e)}function hn(){if(!na&&Mt!==null){na=!0;var e=0,t=le;try{var r=Mt;for(le=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Mt=null,bl=!1}catch(l){throw Mt!==null&&(Mt=Mt.slice(e+1)),Xd(Ni,hn),l}finally{le=t,na=!1}}return null}var On=[],Wn=0,nl=null,rl=0,at=[],it=0,kn=null,At=1,zt="";function xn(e,t){On[Wn++]=rl,On[Wn++]=nl,nl=e,rl=t}function Eu(e,t,r){at[it++]=At,at[it++]=zt,at[it++]=kn,kn=e;var s=At;e=zt;var l=32-vt(s)-1;s&=~(1<<l),r+=1;var a=32-vt(t)+l;if(30<a){var i=l-l%5;a=(s&(1<<i)-1).toString(32),s>>=i,l-=i,At=1<<32-vt(t)+l|r<<l|s,zt=a+e}else At=1<<a|r<<l|s,zt=e}function Mi(e){e.return!==null&&(xn(e,1),Eu(e,1,0))}function Ti(e){for(;e===nl;)nl=On[--Wn],On[Wn]=null,rl=On[--Wn],On[Wn]=null;for(;e===kn;)kn=at[--it],at[it]=null,zt=at[--it],at[it]=null,At=at[--it],at[it]=null}var Ze=null,Je=null,me=!1,gt=null;function Pu(e,t){var r=ot(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Lc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ze=e,Je=nn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ze=e,Je=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=kn!==null?{id:At,overflow:zt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ot(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ze=e,Je=null,!0):!1;default:return!1}}function Ba(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Oa(e){if(me){var t=Je;if(t){var r=t;if(!Lc(e,t)){if(Ba(e))throw Error(M(418));t=nn(r.nextSibling);var s=Ze;t&&Lc(e,t)?Pu(s,r):(e.flags=e.flags&-4097|2,me=!1,Ze=e)}}else{if(Ba(e))throw Error(M(418));e.flags=e.flags&-4097|2,me=!1,Ze=e}}}function _c(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ze=e}function Ss(e){if(e!==Ze)return!1;if(!me)return _c(e),me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fa(e.type,e.memoizedProps)),t&&(t=Je)){if(Ba(e))throw Lu(),Error(M(418));for(;t;)Pu(e,t),t=nn(t.nextSibling)}if(_c(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Je=nn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Je=null}}else Je=Ze?nn(e.stateNode.nextSibling):null;return!0}function Lu(){for(var e=Je;e;)e=nn(e.nextSibling)}function nr(){Je=Ze=null,me=!1}function Ai(e){gt===null?gt=[e]:gt.push(e)}var up=Bt.ReactCurrentBatchConfig;function wr(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(M(309));var s=r.stateNode}if(!s)throw Error(M(147,e));var l=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var c=l.refs;i===null?delete c[a]:c[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(M(284));if(!r._owner)throw Error(M(290,e))}return e}function Cs(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rc(e){var t=e._init;return t(e._payload)}function _u(e){function t(f,m){if(e){var u=f.deletions;u===null?(f.deletions=[m],f.flags|=16):u.push(m)}}function r(f,m){if(!e)return null;for(;m!==null;)t(f,m),m=m.sibling;return null}function s(f,m){for(f=new Map;m!==null;)m.key!==null?f.set(m.key,m):f.set(m.index,m),m=m.sibling;return f}function l(f,m){return f=an(f,m),f.index=0,f.sibling=null,f}function a(f,m,u){return f.index=u,e?(u=f.alternate,u!==null?(u=u.index,u<m?(f.flags|=2,m):u):(f.flags|=2,m)):(f.flags|=1048576,m)}function i(f){return e&&f.alternate===null&&(f.flags|=2),f}function c(f,m,u,b){return m===null||m.tag!==6?(m=ca(u,f.mode,b),m.return=f,m):(m=l(m,u),m.return=f,m)}function o(f,m,u,b){var w=u.type;return w===Dn?x(f,m,u.props.children,b,u.key):m!==null&&(m.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Qt&&Rc(w)===m.type)?(b=l(m,u.props),b.ref=wr(f,m,u),b.return=f,b):(b=Vs(u.type,u.key,u.props,null,f.mode,b),b.ref=wr(f,m,u),b.return=f,b)}function d(f,m,u,b){return m===null||m.tag!==4||m.stateNode.containerInfo!==u.containerInfo||m.stateNode.implementation!==u.implementation?(m=da(u,f.mode,b),m.return=f,m):(m=l(m,u.children||[]),m.return=f,m)}function x(f,m,u,b,w){return m===null||m.tag!==7?(m=bn(u,f.mode,b,w),m.return=f,m):(m=l(m,u),m.return=f,m)}function h(f,m,u){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ca(""+m,f.mode,u),m.return=f,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case fs:return u=Vs(m.type,m.key,m.props,null,f.mode,u),u.ref=wr(f,null,m),u.return=f,u;case zn:return m=da(m,f.mode,u),m.return=f,m;case Qt:var b=m._init;return h(f,b(m._payload),u)}if(Pr(m)||xr(m))return m=bn(m,f.mode,u,null),m.return=f,m;Cs(f,m)}return null}function g(f,m,u,b){var w=m!==null?m.key:null;if(typeof u=="string"&&u!==""||typeof u=="number")return w!==null?null:c(f,m,""+u,b);if(typeof u=="object"&&u!==null){switch(u.$$typeof){case fs:return u.key===w?o(f,m,u,b):null;case zn:return u.key===w?d(f,m,u,b):null;case Qt:return w=u._init,g(f,m,w(u._payload),b)}if(Pr(u)||xr(u))return w!==null?null:x(f,m,u,b,null);Cs(f,u)}return null}function N(f,m,u,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return f=f.get(u)||null,c(m,f,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case fs:return f=f.get(b.key===null?u:b.key)||null,o(m,f,b,w);case zn:return f=f.get(b.key===null?u:b.key)||null,d(m,f,b,w);case Qt:var k=b._init;return N(f,m,u,k(b._payload),w)}if(Pr(b)||xr(b))return f=f.get(u)||null,x(m,f,b,w,null);Cs(m,b)}return null}function j(f,m,u,b){for(var w=null,k=null,P=m,E=m=0,A=null;P!==null&&E<u.length;E++){P.index>E?(A=P,P=null):A=P.sibling;var F=g(f,P,u[E],b);if(F===null){P===null&&(P=A);break}e&&P&&F.alternate===null&&t(f,P),m=a(F,m,E),k===null?w=F:k.sibling=F,k=F,P=A}if(E===u.length)return r(f,P),me&&xn(f,E),w;if(P===null){for(;E<u.length;E++)P=h(f,u[E],b),P!==null&&(m=a(P,m,E),k===null?w=P:k.sibling=P,k=P);return me&&xn(f,E),w}for(P=s(f,P);E<u.length;E++)A=N(P,f,E,u[E],b),A!==null&&(e&&A.alternate!==null&&P.delete(A.key===null?E:A.key),m=a(A,m,E),k===null?w=A:k.sibling=A,k=A);return e&&P.forEach(function(D){return t(f,D)}),me&&xn(f,E),w}function y(f,m,u,b){var w=xr(u);if(typeof w!="function")throw Error(M(150));if(u=w.call(u),u==null)throw Error(M(151));for(var k=w=null,P=m,E=m=0,A=null,F=u.next();P!==null&&!F.done;E++,F=u.next()){P.index>E?(A=P,P=null):A=P.sibling;var D=g(f,P,F.value,b);if(D===null){P===null&&(P=A);break}e&&P&&D.alternate===null&&t(f,P),m=a(D,m,E),k===null?w=D:k.sibling=D,k=D,P=A}if(F.done)return r(f,P),me&&xn(f,E),w;if(P===null){for(;!F.done;E++,F=u.next())F=h(f,F.value,b),F!==null&&(m=a(F,m,E),k===null?w=F:k.sibling=F,k=F);return me&&xn(f,E),w}for(P=s(f,P);!F.done;E++,F=u.next())F=N(P,f,E,F.value,b),F!==null&&(e&&F.alternate!==null&&P.delete(F.key===null?E:F.key),m=a(F,m,E),k===null?w=F:k.sibling=F,k=F);return e&&P.forEach(function(G){return t(f,G)}),me&&xn(f,E),w}function S(f,m,u,b){if(typeof u=="object"&&u!==null&&u.type===Dn&&u.key===null&&(u=u.props.children),typeof u=="object"&&u!==null){switch(u.$$typeof){case fs:e:{for(var w=u.key,k=m;k!==null;){if(k.key===w){if(w=u.type,w===Dn){if(k.tag===7){r(f,k.sibling),m=l(k,u.props.children),m.return=f,f=m;break e}}else if(k.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Qt&&Rc(w)===k.type){r(f,k.sibling),m=l(k,u.props),m.ref=wr(f,k,u),m.return=f,f=m;break e}r(f,k);break}else t(f,k);k=k.sibling}u.type===Dn?(m=bn(u.props.children,f.mode,b,u.key),m.return=f,f=m):(b=Vs(u.type,u.key,u.props,null,f.mode,b),b.ref=wr(f,m,u),b.return=f,f=b)}return i(f);case zn:e:{for(k=u.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===u.containerInfo&&m.stateNode.implementation===u.implementation){r(f,m.sibling),m=l(m,u.children||[]),m.return=f,f=m;break e}else{r(f,m);break}else t(f,m);m=m.sibling}m=da(u,f.mode,b),m.return=f,f=m}return i(f);case Qt:return k=u._init,S(f,m,k(u._payload),b)}if(Pr(u))return j(f,m,u,b);if(xr(u))return y(f,m,u,b);Cs(f,u)}return typeof u=="string"&&u!==""||typeof u=="number"?(u=""+u,m!==null&&m.tag===6?(r(f,m.sibling),m=l(m,u),m.return=f,f=m):(r(f,m),m=ca(u,f.mode,b),m.return=f,f=m),i(f)):r(f,m)}return S}var rr=_u(!0),Ru=_u(!1),sl=mn(null),ll=null,Vn=null,zi=null;function Di(){zi=Vn=ll=null}function Fi(e){var t=sl.current;de(sl),e._currentValue=t}function Wa(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Jn(e,t){ll=e,zi=Vn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(He=!0),e.firstContext=null)}function dt(e){var t=e._currentValue;if(zi!==e)if(e={context:e,memoizedValue:t,next:null},Vn===null){if(ll===null)throw Error(M(308));Vn=e,ll.dependencies={lanes:0,firstContext:e}}else Vn=Vn.next=e;return t}var yn=null;function Ii(e){yn===null?yn=[e]:yn.push(e)}function Mu(e,t,r,s){var l=t.interleaved;return l===null?(r.next=r,Ii(t)):(r.next=l.next,l.next=r),t.interleaved=r,Ut(e,s)}function Ut(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var qt=!1;function Ui(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rn(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ne&2){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,Ut(e,r)}return l=s.interleaved,l===null?(t.next=t,Ii(s)):(t.next=l.next,l.next=t),s.interleaved=t,Ut(e,r)}function Is(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,ki(e,r)}}function Mc(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var l=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?l=a=i:a=a.next=i,r=r.next}while(r!==null);a===null?l=a=t:a=a.next=t}else l=a=t;r={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function al(e,t,r,s){var l=e.updateQueue;qt=!1;var a=l.firstBaseUpdate,i=l.lastBaseUpdate,c=l.shared.pending;if(c!==null){l.shared.pending=null;var o=c,d=o.next;o.next=null,i===null?a=d:i.next=d,i=o;var x=e.alternate;x!==null&&(x=x.updateQueue,c=x.lastBaseUpdate,c!==i&&(c===null?x.firstBaseUpdate=d:c.next=d,x.lastBaseUpdate=o))}if(a!==null){var h=l.baseState;i=0,x=d=o=null,c=a;do{var g=c.lane,N=c.eventTime;if((s&g)===g){x!==null&&(x=x.next={eventTime:N,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var j=e,y=c;switch(g=t,N=r,y.tag){case 1:if(j=y.payload,typeof j=="function"){h=j.call(N,h,g);break e}h=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=y.payload,g=typeof j=="function"?j.call(N,h,g):j,g==null)break e;h=ve({},h,g);break e;case 2:qt=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,g=l.effects,g===null?l.effects=[c]:g.push(c))}else N={eventTime:N,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},x===null?(d=x=N,o=h):x=x.next=N,i|=g;if(c=c.next,c===null){if(c=l.shared.pending,c===null)break;g=c,c=g.next,g.next=null,l.lastBaseUpdate=g,l.shared.pending=null}}while(!0);if(x===null&&(o=h),l.baseState=o,l.firstBaseUpdate=d,l.lastBaseUpdate=x,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else a===null&&(l.shared.lanes=0);Cn|=i,e.lanes=i,e.memoizedState=h}}function Tc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],l=s.callback;if(l!==null){if(s.callback=null,s=r,typeof l!="function")throw Error(M(191,l));l.call(s)}}}var cs={},Ct=mn(cs),Xr=mn(cs),Jr=mn(cs);function jn(e){if(e===cs)throw Error(M(174));return e}function $i(e,t){switch(oe(Jr,t),oe(Xr,e),oe(Ct,cs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Na(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Na(t,e)}de(Ct),oe(Ct,t)}function sr(){de(Ct),de(Xr),de(Jr)}function Au(e){jn(Jr.current);var t=jn(Ct.current),r=Na(t,e.type);t!==r&&(oe(Xr,e),oe(Ct,r))}function Bi(e){Xr.current===e&&(de(Ct),de(Xr))}var xe=mn(0);function il(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=[];function Oi(){for(var e=0;e<ra.length;e++)ra[e]._workInProgressVersionPrimary=null;ra.length=0}var Us=Bt.ReactCurrentDispatcher,sa=Bt.ReactCurrentBatchConfig,Sn=0,ge=null,Ce=null,Le=null,ol=!1,Dr=!1,Zr=0,mp=0;function Ae(){throw Error(M(321))}function Wi(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!jt(e[r],t[r]))return!1;return!0}function Vi(e,t,r,s,l,a){if(Sn=a,ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Us.current=e===null||e.memoizedState===null?xp:gp,e=r(s,l),Dr){a=0;do{if(Dr=!1,Zr=0,25<=a)throw Error(M(301));a+=1,Le=Ce=null,t.updateQueue=null,Us.current=vp,e=r(s,l)}while(Dr)}if(Us.current=cl,t=Ce!==null&&Ce.next!==null,Sn=0,Le=Ce=ge=null,ol=!1,t)throw Error(M(300));return e}function Hi(){var e=Zr!==0;return Zr=0,e}function Nt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?ge.memoizedState=Le=e:Le=Le.next=e,Le}function ut(){if(Ce===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=Ce.next;var t=Le===null?ge.memoizedState:Le.next;if(t!==null)Le=t,Ce=e;else{if(e===null)throw Error(M(310));Ce=e,e={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Le===null?ge.memoizedState=Le=e:Le=Le.next=e}return Le}function es(e,t){return typeof t=="function"?t(e):t}function la(e){var t=ut(),r=t.queue;if(r===null)throw Error(M(311));r.lastRenderedReducer=e;var s=Ce,l=s.baseQueue,a=r.pending;if(a!==null){if(l!==null){var i=l.next;l.next=a.next,a.next=i}s.baseQueue=l=a,r.pending=null}if(l!==null){a=l.next,s=s.baseState;var c=i=null,o=null,d=a;do{var x=d.lane;if((Sn&x)===x)o!==null&&(o=o.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:x,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};o===null?(c=o=h,i=s):o=o.next=h,ge.lanes|=x,Cn|=x}d=d.next}while(d!==null&&d!==a);o===null?i=s:o.next=c,jt(s,t.memoizedState)||(He=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=o,r.lastRenderedState=s}if(e=r.interleaved,e!==null){l=e;do a=l.lane,ge.lanes|=a,Cn|=a,l=l.next;while(l!==e)}else l===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function aa(e){var t=ut(),r=t.queue;if(r===null)throw Error(M(311));r.lastRenderedReducer=e;var s=r.dispatch,l=r.pending,a=t.memoizedState;if(l!==null){r.pending=null;var i=l=l.next;do a=e(a,i.action),i=i.next;while(i!==l);jt(a,t.memoizedState)||(He=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,s]}function zu(){}function Du(e,t){var r=ge,s=ut(),l=t(),a=!jt(s.memoizedState,l);if(a&&(s.memoizedState=l,He=!0),s=s.queue,Qi(Uu.bind(null,r,s,e),[e]),s.getSnapshot!==t||a||Le!==null&&Le.memoizedState.tag&1){if(r.flags|=2048,ts(9,Iu.bind(null,r,s,l,t),void 0,null),_e===null)throw Error(M(349));Sn&30||Fu(r,t,l)}return l}function Fu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Iu(e,t,r,s){t.value=r,t.getSnapshot=s,$u(t)&&Bu(e)}function Uu(e,t,r){return r(function(){$u(t)&&Bu(e)})}function $u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!jt(e,r)}catch{return!0}}function Bu(e){var t=Ut(e,1);t!==null&&yt(t,e,1,-1)}function Ac(e){var t=Nt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:e},t.queue=e,e=e.dispatch=fp.bind(null,ge,e),[t.memoizedState,e]}function ts(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Ou(){return ut().memoizedState}function $s(e,t,r,s){var l=Nt();ge.flags|=e,l.memoizedState=ts(1|t,r,void 0,s===void 0?null:s)}function Nl(e,t,r,s){var l=ut();s=s===void 0?null:s;var a=void 0;if(Ce!==null){var i=Ce.memoizedState;if(a=i.destroy,s!==null&&Wi(s,i.deps)){l.memoizedState=ts(t,r,a,s);return}}ge.flags|=e,l.memoizedState=ts(1|t,r,a,s)}function zc(e,t){return $s(8390656,8,e,t)}function Qi(e,t){return Nl(2048,8,e,t)}function Wu(e,t){return Nl(4,2,e,t)}function Vu(e,t){return Nl(4,4,e,t)}function Hu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Qu(e,t,r){return r=r!=null?r.concat([e]):null,Nl(4,4,Hu.bind(null,t,e),r)}function qi(){}function qu(e,t){var r=ut();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Wi(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Gu(e,t){var r=ut();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Wi(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Yu(e,t,r){return Sn&21?(jt(r,t)||(r=eu(),ge.lanes|=r,Cn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,He=!0),e.memoizedState=r)}function hp(e,t){var r=le;le=r!==0&&4>r?r:4,e(!0);var s=sa.transition;sa.transition={};try{e(!1),t()}finally{le=r,sa.transition=s}}function Ku(){return ut().memoizedState}function pp(e,t,r){var s=ln(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Xu(e))Ju(t,r);else if(r=Mu(e,t,r,s),r!==null){var l=$e();yt(r,e,s,l),Zu(r,t,s)}}function fp(e,t,r){var s=ln(e),l={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Xu(e))Ju(t,l);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,c=a(i,r);if(l.hasEagerState=!0,l.eagerState=c,jt(c,i)){var o=t.interleaved;o===null?(l.next=l,Ii(t)):(l.next=o.next,o.next=l),t.interleaved=l;return}}catch{}finally{}r=Mu(e,t,l,s),r!==null&&(l=$e(),yt(r,e,s,l),Zu(r,t,s))}}function Xu(e){var t=e.alternate;return e===ge||t!==null&&t===ge}function Ju(e,t){Dr=ol=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Zu(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,ki(e,r)}}var cl={readContext:dt,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useInsertionEffect:Ae,useLayoutEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useMutableSource:Ae,useSyncExternalStore:Ae,useId:Ae,unstable_isNewReconciler:!1},xp={readContext:dt,useCallback:function(e,t){return Nt().memoizedState=[e,t===void 0?null:t],e},useContext:dt,useEffect:zc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,$s(4194308,4,Hu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return $s(4194308,4,e,t)},useInsertionEffect:function(e,t){return $s(4,2,e,t)},useMemo:function(e,t){var r=Nt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Nt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=pp.bind(null,ge,e),[s.memoizedState,e]},useRef:function(e){var t=Nt();return e={current:e},t.memoizedState=e},useState:Ac,useDebugValue:qi,useDeferredValue:function(e){return Nt().memoizedState=e},useTransition:function(){var e=Ac(!1),t=e[0];return e=hp.bind(null,e[1]),Nt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=ge,l=Nt();if(me){if(r===void 0)throw Error(M(407));r=r()}else{if(r=t(),_e===null)throw Error(M(349));Sn&30||Fu(s,t,r)}l.memoizedState=r;var a={value:r,getSnapshot:t};return l.queue=a,zc(Uu.bind(null,s,a,e),[e]),s.flags|=2048,ts(9,Iu.bind(null,s,a,r,t),void 0,null),r},useId:function(){var e=Nt(),t=_e.identifierPrefix;if(me){var r=zt,s=At;r=(s&~(1<<32-vt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Zr++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=mp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},gp={readContext:dt,useCallback:qu,useContext:dt,useEffect:Qi,useImperativeHandle:Qu,useInsertionEffect:Wu,useLayoutEffect:Vu,useMemo:Gu,useReducer:la,useRef:Ou,useState:function(){return la(es)},useDebugValue:qi,useDeferredValue:function(e){var t=ut();return Yu(t,Ce.memoizedState,e)},useTransition:function(){var e=la(es)[0],t=ut().memoizedState;return[e,t]},useMutableSource:zu,useSyncExternalStore:Du,useId:Ku,unstable_isNewReconciler:!1},vp={readContext:dt,useCallback:qu,useContext:dt,useEffect:Qi,useImperativeHandle:Qu,useInsertionEffect:Wu,useLayoutEffect:Vu,useMemo:Gu,useReducer:aa,useRef:Ou,useState:function(){return aa(es)},useDebugValue:qi,useDeferredValue:function(e){var t=ut();return Ce===null?t.memoizedState=e:Yu(t,Ce.memoizedState,e)},useTransition:function(){var e=aa(es)[0],t=ut().memoizedState;return[e,t]},useMutableSource:zu,useSyncExternalStore:Du,useId:Ku,unstable_isNewReconciler:!1};function ft(e,t){if(e&&e.defaultProps){t=ve({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Va(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:ve({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var kl={isMounted:function(e){return(e=e._reactInternals)?Ln(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=$e(),l=ln(e),a=Dt(s,l);a.payload=t,r!=null&&(a.callback=r),t=rn(e,a,l),t!==null&&(yt(t,e,l,s),Is(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=$e(),l=ln(e),a=Dt(s,l);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=rn(e,a,l),t!==null&&(yt(t,e,l,s),Is(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=$e(),s=ln(e),l=Dt(r,s);l.tag=2,t!=null&&(l.callback=t),t=rn(e,l,s),t!==null&&(yt(t,e,s,r),Is(t,e,s))}};function Dc(e,t,r,s,l,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,i):t.prototype&&t.prototype.isPureReactComponent?!qr(r,s)||!qr(l,a):!0}function em(e,t,r){var s=!1,l=dn,a=t.contextType;return typeof a=="object"&&a!==null?a=dt(a):(l=qe(t)?Nn:Fe.current,s=t.contextTypes,a=(s=s!=null)?tr(e,l):dn),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=kl,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),t}function Fc(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&kl.enqueueReplaceState(t,t.state,null)}function Ha(e,t,r,s){var l=e.stateNode;l.props=r,l.state=e.memoizedState,l.refs={},Ui(e);var a=t.contextType;typeof a=="object"&&a!==null?l.context=dt(a):(a=qe(t)?Nn:Fe.current,l.context=tr(e,a)),l.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Va(e,t,a,r),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&kl.enqueueReplaceState(l,l.state,null),al(e,r,l,s),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function lr(e,t){try{var r="",s=t;do r+=Q0(s),s=s.return;while(s);var l=r}catch(a){l=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:l,digest:null}}function ia(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Qa(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var yp=typeof WeakMap=="function"?WeakMap:Map;function tm(e,t,r){r=Dt(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){ul||(ul=!0,ni=s),Qa(e,t)},r}function nm(e,t,r){r=Dt(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var l=t.value;r.payload=function(){return s(l)},r.callback=function(){Qa(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Qa(e,t),typeof s!="function"&&(sn===null?sn=new Set([this]):sn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),r}function Ic(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new yp;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(r)||(l.add(r),e=Tp.bind(null,e,t,r),t.then(e,e))}function Uc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $c(e,t,r,s,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Dt(-1,1),t.tag=2,rn(r,t,1))),r.lanes|=1),e)}var jp=Bt.ReactCurrentOwner,He=!1;function Ie(e,t,r,s){t.child=e===null?Ru(t,null,r,s):rr(t,e.child,r,s)}function Bc(e,t,r,s,l){r=r.render;var a=t.ref;return Jn(t,l),s=Vi(e,t,r,s,a,l),r=Hi(),e!==null&&!He?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,$t(e,t,l)):(me&&r&&Mi(t),t.flags|=1,Ie(e,t,s,l),t.child)}function Oc(e,t,r,s,l){if(e===null){var a=r.type;return typeof a=="function"&&!to(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,rm(e,t,a,s,l)):(e=Vs(r.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&l)){var i=a.memoizedProps;if(r=r.compare,r=r!==null?r:qr,r(i,s)&&e.ref===t.ref)return $t(e,t,l)}return t.flags|=1,e=an(a,s),e.ref=t.ref,e.return=t,t.child=e}function rm(e,t,r,s,l){if(e!==null){var a=e.memoizedProps;if(qr(a,s)&&e.ref===t.ref)if(He=!1,t.pendingProps=s=a,(e.lanes&l)!==0)e.flags&131072&&(He=!0);else return t.lanes=e.lanes,$t(e,t,l)}return qa(e,t,r,s,l)}function sm(e,t,r){var s=t.pendingProps,l=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(Qn,Xe),Xe|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,oe(Qn,Xe),Xe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,oe(Qn,Xe),Xe|=s}else a!==null?(s=a.baseLanes|r,t.memoizedState=null):s=r,oe(Qn,Xe),Xe|=s;return Ie(e,t,l,r),t.child}function lm(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function qa(e,t,r,s,l){var a=qe(r)?Nn:Fe.current;return a=tr(t,a),Jn(t,l),r=Vi(e,t,r,s,a,l),s=Hi(),e!==null&&!He?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,$t(e,t,l)):(me&&s&&Mi(t),t.flags|=1,Ie(e,t,r,l),t.child)}function Wc(e,t,r,s,l){if(qe(r)){var a=!0;tl(t)}else a=!1;if(Jn(t,l),t.stateNode===null)Bs(e,t),em(t,r,s),Ha(t,r,s,l),s=!0;else if(e===null){var i=t.stateNode,c=t.memoizedProps;i.props=c;var o=i.context,d=r.contextType;typeof d=="object"&&d!==null?d=dt(d):(d=qe(r)?Nn:Fe.current,d=tr(t,d));var x=r.getDerivedStateFromProps,h=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==s||o!==d)&&Fc(t,i,s,d),qt=!1;var g=t.memoizedState;i.state=g,al(t,s,i,l),o=t.memoizedState,c!==s||g!==o||Qe.current||qt?(typeof x=="function"&&(Va(t,r,x,s),o=t.memoizedState),(c=qt||Dc(t,r,c,s,g,o,d))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=o),i.props=s,i.state=o,i.context=d,s=c):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,Tu(e,t),c=t.memoizedProps,d=t.type===t.elementType?c:ft(t.type,c),i.props=d,h=t.pendingProps,g=i.context,o=r.contextType,typeof o=="object"&&o!==null?o=dt(o):(o=qe(r)?Nn:Fe.current,o=tr(t,o));var N=r.getDerivedStateFromProps;(x=typeof N=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==h||g!==o)&&Fc(t,i,s,o),qt=!1,g=t.memoizedState,i.state=g,al(t,s,i,l);var j=t.memoizedState;c!==h||g!==j||Qe.current||qt?(typeof N=="function"&&(Va(t,r,N,s),j=t.memoizedState),(d=qt||Dc(t,r,d,s,g,j,o)||!1)?(x||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,j,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,j,o)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=j),i.props=s,i.state=j,i.context=o,s=d):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),s=!1)}return Ga(e,t,r,s,a,l)}function Ga(e,t,r,s,l,a){lm(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return l&&Pc(t,r,!1),$t(e,t,a);s=t.stateNode,jp.current=t;var c=i&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=rr(t,e.child,null,a),t.child=rr(t,null,c,a)):Ie(e,t,c,a),t.memoizedState=s.state,l&&Pc(t,r,!0),t.child}function am(e){var t=e.stateNode;t.pendingContext?Ec(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ec(e,t.context,!1),$i(e,t.containerInfo)}function Vc(e,t,r,s,l){return nr(),Ai(l),t.flags|=256,Ie(e,t,r,s),t.child}var Ya={dehydrated:null,treeContext:null,retryLane:0};function Ka(e){return{baseLanes:e,cachePool:null,transitions:null}}function im(e,t,r){var s=t.pendingProps,l=xe.current,a=!1,i=(t.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(l&2)!==0),c?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),oe(xe,l&1),e===null)return Oa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=s.children,e=s.fallback,a?(s=t.mode,a=t.child,i={mode:"hidden",children:i},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=El(i,s,0,null),e=bn(e,s,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ka(r),t.memoizedState=Ya,e):Gi(t,i));if(l=e.memoizedState,l!==null&&(c=l.dehydrated,c!==null))return wp(e,t,i,s,c,l,r);if(a){a=s.fallback,i=t.mode,l=e.child,c=l.sibling;var o={mode:"hidden",children:s.children};return!(i&1)&&t.child!==l?(s=t.child,s.childLanes=0,s.pendingProps=o,t.deletions=null):(s=an(l,o),s.subtreeFlags=l.subtreeFlags&14680064),c!==null?a=an(c,a):(a=bn(a,i,r,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,i=e.child.memoizedState,i=i===null?Ka(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~r,t.memoizedState=Ya,s}return a=e.child,e=a.sibling,s=an(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Gi(e,t){return t=El({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Es(e,t,r,s){return s!==null&&Ai(s),rr(t,e.child,null,r),e=Gi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wp(e,t,r,s,l,a,i){if(r)return t.flags&256?(t.flags&=-257,s=ia(Error(M(422))),Es(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,l=t.mode,s=El({mode:"visible",children:s.children},l,0,null),a=bn(a,l,i,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&rr(t,e.child,null,i),t.child.memoizedState=Ka(i),t.memoizedState=Ya,a);if(!(t.mode&1))return Es(e,t,i,null);if(l.data==="$!"){if(s=l.nextSibling&&l.nextSibling.dataset,s)var c=s.dgst;return s=c,a=Error(M(419)),s=ia(a,s,void 0),Es(e,t,i,s)}if(c=(i&e.childLanes)!==0,He||c){if(s=_e,s!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(s.suspendedLanes|i)?0:l,l!==0&&l!==a.retryLane&&(a.retryLane=l,Ut(e,l),yt(s,e,l,-1))}return eo(),s=ia(Error(M(421))),Es(e,t,i,s)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Ap.bind(null,e),l._reactRetry=t,null):(e=a.treeContext,Je=nn(l.nextSibling),Ze=t,me=!0,gt=null,e!==null&&(at[it++]=At,at[it++]=zt,at[it++]=kn,At=e.id,zt=e.overflow,kn=t),t=Gi(t,s.children),t.flags|=4096,t)}function Hc(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Wa(e.return,t,r)}function oa(e,t,r,s,l){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:l}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=l)}function om(e,t,r){var s=t.pendingProps,l=s.revealOrder,a=s.tail;if(Ie(e,t,s.children,r),s=xe.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hc(e,r,t);else if(e.tag===19)Hc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(oe(xe,s),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(r=t.child,l=null;r!==null;)e=r.alternate,e!==null&&il(e)===null&&(l=r),r=r.sibling;r=l,r===null?(l=t.child,t.child=null):(l=r.sibling,r.sibling=null),oa(t,!1,l,r,a);break;case"backwards":for(r=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&il(e)===null){t.child=l;break}e=l.sibling,l.sibling=r,r=l,l=e}oa(t,!0,r,null,a);break;case"together":oa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $t(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Cn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,r=an(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=an(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function bp(e,t,r){switch(t.tag){case 3:am(t),nr();break;case 5:Au(t);break;case 1:qe(t.type)&&tl(t);break;case 4:$i(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,l=t.memoizedProps.value;oe(sl,s._currentValue),s._currentValue=l;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(oe(xe,xe.current&1),t.flags|=128,null):r&t.child.childLanes?im(e,t,r):(oe(xe,xe.current&1),e=$t(e,t,r),e!==null?e.sibling:null);oe(xe,xe.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return om(e,t,r);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),oe(xe,xe.current),s)break;return null;case 22:case 23:return t.lanes=0,sm(e,t,r)}return $t(e,t,r)}var cm,Xa,dm,um;cm=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Xa=function(){};dm=function(e,t,r,s){var l=e.memoizedProps;if(l!==s){e=t.stateNode,jn(Ct.current);var a=null;switch(r){case"input":l=ya(e,l),s=ya(e,s),a=[];break;case"select":l=ve({},l,{value:void 0}),s=ve({},s,{value:void 0}),a=[];break;case"textarea":l=ba(e,l),s=ba(e,s),a=[];break;default:typeof l.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Zs)}ka(r,s);var i;r=null;for(d in l)if(!s.hasOwnProperty(d)&&l.hasOwnProperty(d)&&l[d]!=null)if(d==="style"){var c=l[d];for(i in c)c.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&($r.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var o=s[d];if(c=l!=null?l[d]:void 0,s.hasOwnProperty(d)&&o!==c&&(o!=null||c!=null))if(d==="style")if(c){for(i in c)!c.hasOwnProperty(i)||o&&o.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in o)o.hasOwnProperty(i)&&c[i]!==o[i]&&(r||(r={}),r[i]=o[i])}else r||(a||(a=[]),a.push(d,r)),r=o;else d==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,c=c?c.__html:void 0,o!=null&&c!==o&&(a=a||[]).push(d,o)):d==="children"?typeof o!="string"&&typeof o!="number"||(a=a||[]).push(d,""+o):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&($r.hasOwnProperty(d)?(o!=null&&d==="onScroll"&&ce("scroll",e),a||c===o||(a=[])):(a=a||[]).push(d,o))}r&&(a=a||[]).push("style",r);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};um=function(e,t,r,s){r!==s&&(t.flags|=4)};function br(e,t){if(!me)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var l=e.child;l!==null;)r|=l.lanes|l.childLanes,s|=l.subtreeFlags&14680064,s|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)r|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Np(e,t,r){var s=t.pendingProps;switch(Ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(t),null;case 1:return qe(t.type)&&el(),ze(t),null;case 3:return s=t.stateNode,sr(),de(Qe),de(Fe),Oi(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ss(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gt!==null&&(li(gt),gt=null))),Xa(e,t),ze(t),null;case 5:Bi(t);var l=jn(Jr.current);if(r=t.type,e!==null&&t.stateNode!=null)dm(e,t,r,s,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(M(166));return ze(t),null}if(e=jn(Ct.current),Ss(t)){s=t.stateNode,r=t.type;var a=t.memoizedProps;switch(s[kt]=t,s[Kr]=a,e=(t.mode&1)!==0,r){case"dialog":ce("cancel",s),ce("close",s);break;case"iframe":case"object":case"embed":ce("load",s);break;case"video":case"audio":for(l=0;l<_r.length;l++)ce(_r[l],s);break;case"source":ce("error",s);break;case"img":case"image":case"link":ce("error",s),ce("load",s);break;case"details":ce("toggle",s);break;case"input":ec(s,a),ce("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},ce("invalid",s);break;case"textarea":nc(s,a),ce("invalid",s)}ka(r,a),l=null;for(var i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="children"?typeof c=="string"?s.textContent!==c&&(a.suppressHydrationWarning!==!0&&ks(s.textContent,c,e),l=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&ks(s.textContent,c,e),l=["children",""+c]):$r.hasOwnProperty(i)&&c!=null&&i==="onScroll"&&ce("scroll",s)}switch(r){case"input":xs(s),tc(s,a,!0);break;case"textarea":xs(s),rc(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Zs)}s=l,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ud(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(r,{is:s.is}):(e=i.createElement(r),r==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,r),e[kt]=t,e[Kr]=s,cm(e,t,!1,!1),t.stateNode=e;e:{switch(i=Sa(r,s),r){case"dialog":ce("cancel",e),ce("close",e),l=s;break;case"iframe":case"object":case"embed":ce("load",e),l=s;break;case"video":case"audio":for(l=0;l<_r.length;l++)ce(_r[l],e);l=s;break;case"source":ce("error",e),l=s;break;case"img":case"image":case"link":ce("error",e),ce("load",e),l=s;break;case"details":ce("toggle",e),l=s;break;case"input":ec(e,s),l=ya(e,s),ce("invalid",e);break;case"option":l=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},l=ve({},s,{value:void 0}),ce("invalid",e);break;case"textarea":nc(e,s),l=ba(e,s),ce("invalid",e);break;default:l=s}ka(r,l),c=l;for(a in c)if(c.hasOwnProperty(a)){var o=c[a];a==="style"?Od(e,o):a==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&$d(e,o)):a==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Br(e,o):typeof o=="number"&&Br(e,""+o):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&($r.hasOwnProperty(a)?o!=null&&a==="onScroll"&&ce("scroll",e):o!=null&&vi(e,a,o,i))}switch(r){case"input":xs(e),tc(e,s,!1);break;case"textarea":xs(e),rc(e);break;case"option":s.value!=null&&e.setAttribute("value",""+cn(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?Gn(e,!!s.multiple,a,!1):s.defaultValue!=null&&Gn(e,!!s.multiple,s.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Zs)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ze(t),null;case 6:if(e&&t.stateNode!=null)um(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(M(166));if(r=jn(Jr.current),jn(Ct.current),Ss(t)){if(s=t.stateNode,r=t.memoizedProps,s[kt]=t,(a=s.nodeValue!==r)&&(e=Ze,e!==null))switch(e.tag){case 3:ks(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ks(s.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[kt]=t,t.stateNode=s}return ze(t),null;case 13:if(de(xe),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(me&&Je!==null&&t.mode&1&&!(t.flags&128))Lu(),nr(),t.flags|=98560,a=!1;else if(a=Ss(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(M(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(M(317));a[kt]=t}else nr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ze(t),a=!1}else gt!==null&&(li(gt),gt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||xe.current&1?Ee===0&&(Ee=3):eo())),t.updateQueue!==null&&(t.flags|=4),ze(t),null);case 4:return sr(),Xa(e,t),e===null&&Gr(t.stateNode.containerInfo),ze(t),null;case 10:return Fi(t.type._context),ze(t),null;case 17:return qe(t.type)&&el(),ze(t),null;case 19:if(de(xe),a=t.memoizedState,a===null)return ze(t),null;if(s=(t.flags&128)!==0,i=a.rendering,i===null)if(s)br(a,!1);else{if(Ee!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=il(e),i!==null){for(t.flags|=128,br(a,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)a=r,e=s,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return oe(xe,xe.current&1|2),t.child}e=e.sibling}a.tail!==null&&je()>ar&&(t.flags|=128,s=!0,br(a,!1),t.lanes=4194304)}else{if(!s)if(e=il(i),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),br(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!me)return ze(t),null}else 2*je()-a.renderingStartTime>ar&&r!==1073741824&&(t.flags|=128,s=!0,br(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(r=a.last,r!==null?r.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=je(),t.sibling=null,r=xe.current,oe(xe,s?r&1|2:r&1),t):(ze(t),null);case 22:case 23:return Zi(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Xe&1073741824&&(ze(t),t.subtreeFlags&6&&(t.flags|=8192)):ze(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function kp(e,t){switch(Ti(t),t.tag){case 1:return qe(t.type)&&el(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sr(),de(Qe),de(Fe),Oi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Bi(t),null;case 13:if(de(xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));nr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return de(xe),null;case 4:return sr(),null;case 10:return Fi(t.type._context),null;case 22:case 23:return Zi(),null;case 24:return null;default:return null}}var Ps=!1,De=!1,Sp=typeof WeakSet=="function"?WeakSet:Set,$=null;function Hn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){ye(e,t,s)}else r.current=null}function Ja(e,t,r){try{r()}catch(s){ye(e,t,s)}}var Qc=!1;function Cp(e,t){if(za=Ks,e=xu(),Ri(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var l=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var i=0,c=-1,o=-1,d=0,x=0,h=e,g=null;t:for(;;){for(var N;h!==r||l!==0&&h.nodeType!==3||(c=i+l),h!==a||s!==0&&h.nodeType!==3||(o=i+s),h.nodeType===3&&(i+=h.nodeValue.length),(N=h.firstChild)!==null;)g=h,h=N;for(;;){if(h===e)break t;if(g===r&&++d===l&&(c=i),g===a&&++x===s&&(o=i),(N=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=N}r=c===-1||o===-1?null:{start:c,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(Da={focusedElem:e,selectionRange:r},Ks=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var y=j.memoizedProps,S=j.memoizedState,f=t.stateNode,m=f.getSnapshotBeforeUpdate(t.elementType===t.type?y:ft(t.type,y),S);f.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var u=t.stateNode.containerInfo;u.nodeType===1?u.textContent="":u.nodeType===9&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(b){ye(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return j=Qc,Qc=!1,j}function Fr(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,a!==void 0&&Ja(t,r,a)}l=l.next}while(l!==s)}}function Sl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Za(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function mm(e){var t=e.alternate;t!==null&&(e.alternate=null,mm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[kt],delete t[Kr],delete t[Ua],delete t[op],delete t[cp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hm(e){return e.tag===5||e.tag===3||e.tag===4}function qc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ei(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Zs));else if(s!==4&&(e=e.child,e!==null))for(ei(e,t,r),e=e.sibling;e!==null;)ei(e,t,r),e=e.sibling}function ti(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(ti(e,t,r),e=e.sibling;e!==null;)ti(e,t,r),e=e.sibling}var Re=null,xt=!1;function Ht(e,t,r){for(r=r.child;r!==null;)pm(e,t,r),r=r.sibling}function pm(e,t,r){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(gl,r)}catch{}switch(r.tag){case 5:De||Hn(r,t);case 6:var s=Re,l=xt;Re=null,Ht(e,t,r),Re=s,xt=l,Re!==null&&(xt?(e=Re,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Re.removeChild(r.stateNode));break;case 18:Re!==null&&(xt?(e=Re,r=r.stateNode,e.nodeType===8?ta(e.parentNode,r):e.nodeType===1&&ta(e,r),Hr(e)):ta(Re,r.stateNode));break;case 4:s=Re,l=xt,Re=r.stateNode.containerInfo,xt=!0,Ht(e,t,r),Re=s,xt=l;break;case 0:case 11:case 14:case 15:if(!De&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){l=s=s.next;do{var a=l,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&Ja(r,t,i),l=l.next}while(l!==s)}Ht(e,t,r);break;case 1:if(!De&&(Hn(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(c){ye(r,t,c)}Ht(e,t,r);break;case 21:Ht(e,t,r);break;case 22:r.mode&1?(De=(s=De)||r.memoizedState!==null,Ht(e,t,r),De=s):Ht(e,t,r);break;default:Ht(e,t,r)}}function Gc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Sp),t.forEach(function(s){var l=zp.bind(null,e,s);r.has(s)||(r.add(s),s.then(l,l))})}}function pt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var l=r[s];try{var a=e,i=t,c=i;e:for(;c!==null;){switch(c.tag){case 5:Re=c.stateNode,xt=!1;break e;case 3:Re=c.stateNode.containerInfo,xt=!0;break e;case 4:Re=c.stateNode.containerInfo,xt=!0;break e}c=c.return}if(Re===null)throw Error(M(160));pm(a,i,l),Re=null,xt=!1;var o=l.alternate;o!==null&&(o.return=null),l.return=null}catch(d){ye(l,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fm(t,e),t=t.sibling}function fm(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pt(t,e),bt(e),s&4){try{Fr(3,e,e.return),Sl(3,e)}catch(y){ye(e,e.return,y)}try{Fr(5,e,e.return)}catch(y){ye(e,e.return,y)}}break;case 1:pt(t,e),bt(e),s&512&&r!==null&&Hn(r,r.return);break;case 5:if(pt(t,e),bt(e),s&512&&r!==null&&Hn(r,r.return),e.flags&32){var l=e.stateNode;try{Br(l,"")}catch(y){ye(e,e.return,y)}}if(s&4&&(l=e.stateNode,l!=null)){var a=e.memoizedProps,i=r!==null?r.memoizedProps:a,c=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&Fd(l,a),Sa(c,i);var d=Sa(c,a);for(i=0;i<o.length;i+=2){var x=o[i],h=o[i+1];x==="style"?Od(l,h):x==="dangerouslySetInnerHTML"?$d(l,h):x==="children"?Br(l,h):vi(l,x,h,d)}switch(c){case"input":ja(l,a);break;case"textarea":Id(l,a);break;case"select":var g=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!a.multiple;var N=a.value;N!=null?Gn(l,!!a.multiple,N,!1):g!==!!a.multiple&&(a.defaultValue!=null?Gn(l,!!a.multiple,a.defaultValue,!0):Gn(l,!!a.multiple,a.multiple?[]:"",!1))}l[Kr]=a}catch(y){ye(e,e.return,y)}}break;case 6:if(pt(t,e),bt(e),s&4){if(e.stateNode===null)throw Error(M(162));l=e.stateNode,a=e.memoizedProps;try{l.nodeValue=a}catch(y){ye(e,e.return,y)}}break;case 3:if(pt(t,e),bt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Hr(t.containerInfo)}catch(y){ye(e,e.return,y)}break;case 4:pt(t,e),bt(e);break;case 13:pt(t,e),bt(e),l=e.child,l.flags&8192&&(a=l.memoizedState!==null,l.stateNode.isHidden=a,!a||l.alternate!==null&&l.alternate.memoizedState!==null||(Xi=je())),s&4&&Gc(e);break;case 22:if(x=r!==null&&r.memoizedState!==null,e.mode&1?(De=(d=De)||x,pt(t,e),De=d):pt(t,e),bt(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!x&&e.mode&1)for($=e,x=e.child;x!==null;){for(h=$=x;$!==null;){switch(g=$,N=g.child,g.tag){case 0:case 11:case 14:case 15:Fr(4,g,g.return);break;case 1:Hn(g,g.return);var j=g.stateNode;if(typeof j.componentWillUnmount=="function"){s=g,r=g.return;try{t=s,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(y){ye(s,r,y)}}break;case 5:Hn(g,g.return);break;case 22:if(g.memoizedState!==null){Kc(h);continue}}N!==null?(N.return=g,$=N):Kc(h)}x=x.sibling}e:for(x=null,h=e;;){if(h.tag===5){if(x===null){x=h;try{l=h.stateNode,d?(a=l.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=h.stateNode,o=h.memoizedProps.style,i=o!=null&&o.hasOwnProperty("display")?o.display:null,c.style.display=Bd("display",i))}catch(y){ye(e,e.return,y)}}}else if(h.tag===6){if(x===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){ye(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;x===h&&(x=null),h=h.return}x===h&&(x=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pt(t,e),bt(e),s&4&&Gc(e);break;case 21:break;default:pt(t,e),bt(e)}}function bt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(hm(r)){var s=r;break e}r=r.return}throw Error(M(160))}switch(s.tag){case 5:var l=s.stateNode;s.flags&32&&(Br(l,""),s.flags&=-33);var a=qc(e);ti(e,a,l);break;case 3:case 4:var i=s.stateNode.containerInfo,c=qc(e);ei(e,c,i);break;default:throw Error(M(161))}}catch(o){ye(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ep(e,t,r){$=e,xm(e)}function xm(e,t,r){for(var s=(e.mode&1)!==0;$!==null;){var l=$,a=l.child;if(l.tag===22&&s){var i=l.memoizedState!==null||Ps;if(!i){var c=l.alternate,o=c!==null&&c.memoizedState!==null||De;c=Ps;var d=De;if(Ps=i,(De=o)&&!d)for($=l;$!==null;)i=$,o=i.child,i.tag===22&&i.memoizedState!==null?Xc(l):o!==null?(o.return=i,$=o):Xc(l);for(;a!==null;)$=a,xm(a),a=a.sibling;$=l,Ps=c,De=d}Yc(e)}else l.subtreeFlags&8772&&a!==null?(a.return=l,$=a):Yc(e)}}function Yc(e){for(;$!==null;){var t=$;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:De||Sl(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!De)if(r===null)s.componentDidMount();else{var l=t.elementType===t.type?r.memoizedProps:ft(t.type,r.memoizedProps);s.componentDidUpdate(l,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Tc(t,a,s);break;case 3:var i=t.updateQueue;if(i!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Tc(t,i,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var x=d.memoizedState;if(x!==null){var h=x.dehydrated;h!==null&&Hr(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}De||t.flags&512&&Za(t)}catch(g){ye(t,t.return,g)}}if(t===e){$=null;break}if(r=t.sibling,r!==null){r.return=t.return,$=r;break}$=t.return}}function Kc(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var r=t.sibling;if(r!==null){r.return=t.return,$=r;break}$=t.return}}function Xc(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Sl(4,t)}catch(o){ye(t,r,o)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var l=t.return;try{s.componentDidMount()}catch(o){ye(t,l,o)}}var a=t.return;try{Za(t)}catch(o){ye(t,a,o)}break;case 5:var i=t.return;try{Za(t)}catch(o){ye(t,i,o)}}}catch(o){ye(t,t.return,o)}if(t===e){$=null;break}var c=t.sibling;if(c!==null){c.return=t.return,$=c;break}$=t.return}}var Pp=Math.ceil,dl=Bt.ReactCurrentDispatcher,Yi=Bt.ReactCurrentOwner,ct=Bt.ReactCurrentBatchConfig,ne=0,_e=null,Ne=null,Me=0,Xe=0,Qn=mn(0),Ee=0,ns=null,Cn=0,Cl=0,Ki=0,Ir=null,Ve=null,Xi=0,ar=1/0,Rt=null,ul=!1,ni=null,sn=null,Ls=!1,Xt=null,ml=0,Ur=0,ri=null,Os=-1,Ws=0;function $e(){return ne&6?je():Os!==-1?Os:Os=je()}function ln(e){return e.mode&1?ne&2&&Me!==0?Me&-Me:up.transition!==null?(Ws===0&&(Ws=eu()),Ws):(e=le,e!==0||(e=window.event,e=e===void 0?16:iu(e.type)),e):1}function yt(e,t,r,s){if(50<Ur)throw Ur=0,ri=null,Error(M(185));as(e,r,s),(!(ne&2)||e!==_e)&&(e===_e&&(!(ne&2)&&(Cl|=r),Ee===4&&Yt(e,Me)),Ge(e,s),r===1&&ne===0&&!(t.mode&1)&&(ar=je()+500,bl&&hn()))}function Ge(e,t){var r=e.callbackNode;uh(e,t);var s=Ys(e,e===_e?Me:0);if(s===0)r!==null&&ac(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&ac(r),t===1)e.tag===0?dp(Jc.bind(null,e)):Cu(Jc.bind(null,e)),ap(function(){!(ne&6)&&hn()}),r=null;else{switch(tu(s)){case 1:r=Ni;break;case 4:r=Jd;break;case 16:r=Gs;break;case 536870912:r=Zd;break;default:r=Gs}r=km(r,gm.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function gm(e,t){if(Os=-1,Ws=0,ne&6)throw Error(M(327));var r=e.callbackNode;if(Zn()&&e.callbackNode!==r)return null;var s=Ys(e,e===_e?Me:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=hl(e,s);else{t=s;var l=ne;ne|=2;var a=ym();(_e!==e||Me!==t)&&(Rt=null,ar=je()+500,wn(e,t));do try{Rp();break}catch(c){vm(e,c)}while(!0);Di(),dl.current=a,ne=l,Ne!==null?t=0:(_e=null,Me=0,t=Ee)}if(t!==0){if(t===2&&(l=_a(e),l!==0&&(s=l,t=si(e,l))),t===1)throw r=ns,wn(e,0),Yt(e,s),Ge(e,je()),r;if(t===6)Yt(e,s);else{if(l=e.current.alternate,!(s&30)&&!Lp(l)&&(t=hl(e,s),t===2&&(a=_a(e),a!==0&&(s=a,t=si(e,a))),t===1))throw r=ns,wn(e,0),Yt(e,s),Ge(e,je()),r;switch(e.finishedWork=l,e.finishedLanes=s,t){case 0:case 1:throw Error(M(345));case 2:gn(e,Ve,Rt);break;case 3:if(Yt(e,s),(s&130023424)===s&&(t=Xi+500-je(),10<t)){if(Ys(e,0)!==0)break;if(l=e.suspendedLanes,(l&s)!==s){$e(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Ia(gn.bind(null,e,Ve,Rt),t);break}gn(e,Ve,Rt);break;case 4:if(Yt(e,s),(s&4194240)===s)break;for(t=e.eventTimes,l=-1;0<s;){var i=31-vt(s);a=1<<i,i=t[i],i>l&&(l=i),s&=~a}if(s=l,s=je()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Pp(s/1960))-s,10<s){e.timeoutHandle=Ia(gn.bind(null,e,Ve,Rt),s);break}gn(e,Ve,Rt);break;case 5:gn(e,Ve,Rt);break;default:throw Error(M(329))}}}return Ge(e,je()),e.callbackNode===r?gm.bind(null,e):null}function si(e,t){var r=Ir;return e.current.memoizedState.isDehydrated&&(wn(e,t).flags|=256),e=hl(e,t),e!==2&&(t=Ve,Ve=r,t!==null&&li(t)),e}function li(e){Ve===null?Ve=e:Ve.push.apply(Ve,e)}function Lp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var l=r[s],a=l.getSnapshot;l=l.value;try{if(!jt(a(),l))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yt(e,t){for(t&=~Ki,t&=~Cl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-vt(t),s=1<<r;e[r]=-1,t&=~s}}function Jc(e){if(ne&6)throw Error(M(327));Zn();var t=Ys(e,0);if(!(t&1))return Ge(e,je()),null;var r=hl(e,t);if(e.tag!==0&&r===2){var s=_a(e);s!==0&&(t=s,r=si(e,s))}if(r===1)throw r=ns,wn(e,0),Yt(e,t),Ge(e,je()),r;if(r===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,gn(e,Ve,Rt),Ge(e,je()),null}function Ji(e,t){var r=ne;ne|=1;try{return e(t)}finally{ne=r,ne===0&&(ar=je()+500,bl&&hn())}}function En(e){Xt!==null&&Xt.tag===0&&!(ne&6)&&Zn();var t=ne;ne|=1;var r=ct.transition,s=le;try{if(ct.transition=null,le=1,e)return e()}finally{le=s,ct.transition=r,ne=t,!(ne&6)&&hn()}}function Zi(){Xe=Qn.current,de(Qn)}function wn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,lp(r)),Ne!==null)for(r=Ne.return;r!==null;){var s=r;switch(Ti(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&el();break;case 3:sr(),de(Qe),de(Fe),Oi();break;case 5:Bi(s);break;case 4:sr();break;case 13:de(xe);break;case 19:de(xe);break;case 10:Fi(s.type._context);break;case 22:case 23:Zi()}r=r.return}if(_e=e,Ne=e=an(e.current,null),Me=Xe=t,Ee=0,ns=null,Ki=Cl=Cn=0,Ve=Ir=null,yn!==null){for(t=0;t<yn.length;t++)if(r=yn[t],s=r.interleaved,s!==null){r.interleaved=null;var l=s.next,a=r.pending;if(a!==null){var i=a.next;a.next=l,s.next=i}r.pending=s}yn=null}return e}function vm(e,t){do{var r=Ne;try{if(Di(),Us.current=cl,ol){for(var s=ge.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}ol=!1}if(Sn=0,Le=Ce=ge=null,Dr=!1,Zr=0,Yi.current=null,r===null||r.return===null){Ee=1,ns=t,Ne=null;break}e:{var a=e,i=r.return,c=r,o=t;if(t=Me,c.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var d=o,x=c,h=x.tag;if(!(x.mode&1)&&(h===0||h===11||h===15)){var g=x.alternate;g?(x.updateQueue=g.updateQueue,x.memoizedState=g.memoizedState,x.lanes=g.lanes):(x.updateQueue=null,x.memoizedState=null)}var N=Uc(i);if(N!==null){N.flags&=-257,$c(N,i,c,a,t),N.mode&1&&Ic(a,d,t),t=N,o=d;var j=t.updateQueue;if(j===null){var y=new Set;y.add(o),t.updateQueue=y}else j.add(o);break e}else{if(!(t&1)){Ic(a,d,t),eo();break e}o=Error(M(426))}}else if(me&&c.mode&1){var S=Uc(i);if(S!==null){!(S.flags&65536)&&(S.flags|=256),$c(S,i,c,a,t),Ai(lr(o,c));break e}}a=o=lr(o,c),Ee!==4&&(Ee=2),Ir===null?Ir=[a]:Ir.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var f=tm(a,o,t);Mc(a,f);break e;case 1:c=o;var m=a.type,u=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(sn===null||!sn.has(u)))){a.flags|=65536,t&=-t,a.lanes|=t;var b=nm(a,c,t);Mc(a,b);break e}}a=a.return}while(a!==null)}wm(r)}catch(w){t=w,Ne===r&&r!==null&&(Ne=r=r.return);continue}break}while(!0)}function ym(){var e=dl.current;return dl.current=cl,e===null?cl:e}function eo(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),_e===null||!(Cn&268435455)&&!(Cl&268435455)||Yt(_e,Me)}function hl(e,t){var r=ne;ne|=2;var s=ym();(_e!==e||Me!==t)&&(Rt=null,wn(e,t));do try{_p();break}catch(l){vm(e,l)}while(!0);if(Di(),ne=r,dl.current=s,Ne!==null)throw Error(M(261));return _e=null,Me=0,Ee}function _p(){for(;Ne!==null;)jm(Ne)}function Rp(){for(;Ne!==null&&!nh();)jm(Ne)}function jm(e){var t=Nm(e.alternate,e,Xe);e.memoizedProps=e.pendingProps,t===null?wm(e):Ne=t,Yi.current=null}function wm(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=kp(r,t),r!==null){r.flags&=32767,Ne=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ee=6,Ne=null;return}}else if(r=Np(r,t,Xe),r!==null){Ne=r;return}if(t=t.sibling,t!==null){Ne=t;return}Ne=t=e}while(t!==null);Ee===0&&(Ee=5)}function gn(e,t,r){var s=le,l=ct.transition;try{ct.transition=null,le=1,Mp(e,t,r,s)}finally{ct.transition=l,le=s}return null}function Mp(e,t,r,s){do Zn();while(Xt!==null);if(ne&6)throw Error(M(327));r=e.finishedWork;var l=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(mh(e,a),e===_e&&(Ne=_e=null,Me=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ls||(Ls=!0,km(Gs,function(){return Zn(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=ct.transition,ct.transition=null;var i=le;le=1;var c=ne;ne|=4,Yi.current=null,Cp(e,r),fm(r,e),Jh(Da),Ks=!!za,Da=za=null,e.current=r,Ep(r),rh(),ne=c,le=i,ct.transition=a}else e.current=r;if(Ls&&(Ls=!1,Xt=e,ml=l),a=e.pendingLanes,a===0&&(sn=null),ah(r.stateNode),Ge(e,je()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)l=t[r],s(l.value,{componentStack:l.stack,digest:l.digest});if(ul)throw ul=!1,e=ni,ni=null,e;return ml&1&&e.tag!==0&&Zn(),a=e.pendingLanes,a&1?e===ri?Ur++:(Ur=0,ri=e):Ur=0,hn(),null}function Zn(){if(Xt!==null){var e=tu(ml),t=ct.transition,r=le;try{if(ct.transition=null,le=16>e?16:e,Xt===null)var s=!1;else{if(e=Xt,Xt=null,ml=0,ne&6)throw Error(M(331));var l=ne;for(ne|=4,$=e.current;$!==null;){var a=$,i=a.child;if($.flags&16){var c=a.deletions;if(c!==null){for(var o=0;o<c.length;o++){var d=c[o];for($=d;$!==null;){var x=$;switch(x.tag){case 0:case 11:case 15:Fr(8,x,a)}var h=x.child;if(h!==null)h.return=x,$=h;else for(;$!==null;){x=$;var g=x.sibling,N=x.return;if(mm(x),x===d){$=null;break}if(g!==null){g.return=N,$=g;break}$=N}}}var j=a.alternate;if(j!==null){var y=j.child;if(y!==null){j.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}$=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,$=i;else e:for(;$!==null;){if(a=$,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Fr(9,a,a.return)}var f=a.sibling;if(f!==null){f.return=a.return,$=f;break e}$=a.return}}var m=e.current;for($=m;$!==null;){i=$;var u=i.child;if(i.subtreeFlags&2064&&u!==null)u.return=i,$=u;else e:for(i=m;$!==null;){if(c=$,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Sl(9,c)}}catch(w){ye(c,c.return,w)}if(c===i){$=null;break e}var b=c.sibling;if(b!==null){b.return=c.return,$=b;break e}$=c.return}}if(ne=l,hn(),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(gl,e)}catch{}s=!0}return s}finally{le=r,ct.transition=t}}return!1}function Zc(e,t,r){t=lr(r,t),t=tm(e,t,1),e=rn(e,t,1),t=$e(),e!==null&&(as(e,1,t),Ge(e,t))}function ye(e,t,r){if(e.tag===3)Zc(e,e,r);else for(;t!==null;){if(t.tag===3){Zc(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(sn===null||!sn.has(s))){e=lr(r,e),e=nm(t,e,1),t=rn(t,e,1),e=$e(),t!==null&&(as(t,1,e),Ge(t,e));break}}t=t.return}}function Tp(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=$e(),e.pingedLanes|=e.suspendedLanes&r,_e===e&&(Me&r)===r&&(Ee===4||Ee===3&&(Me&130023424)===Me&&500>je()-Xi?wn(e,0):Ki|=r),Ge(e,t)}function bm(e,t){t===0&&(e.mode&1?(t=ys,ys<<=1,!(ys&130023424)&&(ys=4194304)):t=1);var r=$e();e=Ut(e,t),e!==null&&(as(e,t,r),Ge(e,r))}function Ap(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),bm(e,r)}function zp(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(r=l.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(M(314))}s!==null&&s.delete(t),bm(e,r)}var Nm;Nm=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qe.current)He=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return He=!1,bp(e,t,r);He=!!(e.flags&131072)}else He=!1,me&&t.flags&1048576&&Eu(t,rl,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Bs(e,t),e=t.pendingProps;var l=tr(t,Fe.current);Jn(t,r),l=Vi(null,t,s,e,l,r);var a=Hi();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qe(s)?(a=!0,tl(t)):a=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Ui(t),l.updater=kl,t.stateNode=l,l._reactInternals=t,Ha(t,s,e,r),t=Ga(null,t,s,!0,a,r)):(t.tag=0,me&&a&&Mi(t),Ie(null,t,l,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Bs(e,t),e=t.pendingProps,l=s._init,s=l(s._payload),t.type=s,l=t.tag=Fp(s),e=ft(s,e),l){case 0:t=qa(null,t,s,e,r);break e;case 1:t=Wc(null,t,s,e,r);break e;case 11:t=Bc(null,t,s,e,r);break e;case 14:t=Oc(null,t,s,ft(s.type,e),r);break e}throw Error(M(306,s,""))}return t;case 0:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:ft(s,l),qa(e,t,s,l,r);case 1:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:ft(s,l),Wc(e,t,s,l,r);case 3:e:{if(am(t),e===null)throw Error(M(387));s=t.pendingProps,a=t.memoizedState,l=a.element,Tu(e,t),al(t,s,null,r);var i=t.memoizedState;if(s=i.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){l=lr(Error(M(423)),t),t=Vc(e,t,s,r,l);break e}else if(s!==l){l=lr(Error(M(424)),t),t=Vc(e,t,s,r,l);break e}else for(Je=nn(t.stateNode.containerInfo.firstChild),Ze=t,me=!0,gt=null,r=Ru(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(nr(),s===l){t=$t(e,t,r);break e}Ie(e,t,s,r)}t=t.child}return t;case 5:return Au(t),e===null&&Oa(t),s=t.type,l=t.pendingProps,a=e!==null?e.memoizedProps:null,i=l.children,Fa(s,l)?i=null:a!==null&&Fa(s,a)&&(t.flags|=32),lm(e,t),Ie(e,t,i,r),t.child;case 6:return e===null&&Oa(t),null;case 13:return im(e,t,r);case 4:return $i(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=rr(t,null,s,r):Ie(e,t,s,r),t.child;case 11:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:ft(s,l),Bc(e,t,s,l,r);case 7:return Ie(e,t,t.pendingProps,r),t.child;case 8:return Ie(e,t,t.pendingProps.children,r),t.child;case 12:return Ie(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,l=t.pendingProps,a=t.memoizedProps,i=l.value,oe(sl,s._currentValue),s._currentValue=i,a!==null)if(jt(a.value,i)){if(a.children===l.children&&!Qe.current){t=$t(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var c=a.dependencies;if(c!==null){i=a.child;for(var o=c.firstContext;o!==null;){if(o.context===s){if(a.tag===1){o=Dt(-1,r&-r),o.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var x=d.pending;x===null?o.next=o:(o.next=x.next,x.next=o),d.pending=o}}a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),Wa(a.return,r,t),c.lanes|=r;break}o=o.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(M(341));i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Wa(i,r,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Ie(e,t,l.children,r),t=t.child}return t;case 9:return l=t.type,s=t.pendingProps.children,Jn(t,r),l=dt(l),s=s(l),t.flags|=1,Ie(e,t,s,r),t.child;case 14:return s=t.type,l=ft(s,t.pendingProps),l=ft(s.type,l),Oc(e,t,s,l,r);case 15:return rm(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:ft(s,l),Bs(e,t),t.tag=1,qe(s)?(e=!0,tl(t)):e=!1,Jn(t,r),em(t,s,l),Ha(t,s,l,r),Ga(null,t,s,!0,e,r);case 19:return om(e,t,r);case 22:return sm(e,t,r)}throw Error(M(156,t.tag))};function km(e,t){return Xd(e,t)}function Dp(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ot(e,t,r,s){return new Dp(e,t,r,s)}function to(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fp(e){if(typeof e=="function")return to(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ji)return 11;if(e===wi)return 14}return 2}function an(e,t){var r=e.alternate;return r===null?(r=ot(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Vs(e,t,r,s,l,a){var i=2;if(s=e,typeof e=="function")to(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Dn:return bn(r.children,l,a,t);case yi:i=8,l|=8;break;case fa:return e=ot(12,r,t,l|2),e.elementType=fa,e.lanes=a,e;case xa:return e=ot(13,r,t,l),e.elementType=xa,e.lanes=a,e;case ga:return e=ot(19,r,t,l),e.elementType=ga,e.lanes=a,e;case Ad:return El(r,l,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Md:i=10;break e;case Td:i=9;break e;case ji:i=11;break e;case wi:i=14;break e;case Qt:i=16,s=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=ot(i,r,t,l),t.elementType=e,t.type=s,t.lanes=a,t}function bn(e,t,r,s){return e=ot(7,e,s,t),e.lanes=r,e}function El(e,t,r,s){return e=ot(22,e,s,t),e.elementType=Ad,e.lanes=r,e.stateNode={isHidden:!1},e}function ca(e,t,r){return e=ot(6,e,null,t),e.lanes=r,e}function da(e,t,r){return t=ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ip(e,t,r,s,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vl(0),this.expirationTimes=Vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vl(0),this.identifierPrefix=s,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function no(e,t,r,s,l,a,i,c,o){return e=new Ip(e,t,r,c,o),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ot(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ui(a),e}function Up(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zn,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Sm(e){if(!e)return dn;e=e._reactInternals;e:{if(Ln(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var r=e.type;if(qe(r))return Su(e,r,t)}return t}function Cm(e,t,r,s,l,a,i,c,o){return e=no(r,s,!0,e,l,a,i,c,o),e.context=Sm(null),r=e.current,s=$e(),l=ln(r),a=Dt(s,l),a.callback=t??null,rn(r,a,l),e.current.lanes=l,as(e,l,s),Ge(e,s),e}function Pl(e,t,r,s){var l=t.current,a=$e(),i=ln(l);return r=Sm(r),t.context===null?t.context=r:t.pendingContext=r,t=Dt(a,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=rn(l,t,i),e!==null&&(yt(e,l,i,a),Is(e,l,i)),i}function pl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ed(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ro(e,t){ed(e,t),(e=e.alternate)&&ed(e,t)}function $p(){return null}var Em=typeof reportError=="function"?reportError:function(e){console.error(e)};function so(e){this._internalRoot=e}Ll.prototype.render=so.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));Pl(e,t,null,null)};Ll.prototype.unmount=so.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;En(function(){Pl(null,e,null,null)}),t[It]=null}};function Ll(e){this._internalRoot=e}Ll.prototype.unstable_scheduleHydration=function(e){if(e){var t=su();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Gt.length&&t!==0&&t<Gt[r].priority;r++);Gt.splice(r,0,e),r===0&&au(e)}};function lo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function td(){}function Bp(e,t,r,s,l){if(l){if(typeof s=="function"){var a=s;s=function(){var d=pl(i);a.call(d)}}var i=Cm(t,s,e,0,null,!1,!1,"",td);return e._reactRootContainer=i,e[It]=i.current,Gr(e.nodeType===8?e.parentNode:e),En(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof s=="function"){var c=s;s=function(){var d=pl(o);c.call(d)}}var o=no(e,0,!1,null,null,!1,!1,"",td);return e._reactRootContainer=o,e[It]=o.current,Gr(e.nodeType===8?e.parentNode:e),En(function(){Pl(t,o,r,s)}),o}function Rl(e,t,r,s,l){var a=r._reactRootContainer;if(a){var i=a;if(typeof l=="function"){var c=l;l=function(){var o=pl(i);c.call(o)}}Pl(t,i,e,l)}else i=Bp(r,t,e,l,s);return pl(i)}nu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Lr(t.pendingLanes);r!==0&&(ki(t,r|1),Ge(t,je()),!(ne&6)&&(ar=je()+500,hn()))}break;case 13:En(function(){var s=Ut(e,1);if(s!==null){var l=$e();yt(s,e,1,l)}}),ro(e,1)}};Si=function(e){if(e.tag===13){var t=Ut(e,134217728);if(t!==null){var r=$e();yt(t,e,134217728,r)}ro(e,134217728)}};ru=function(e){if(e.tag===13){var t=ln(e),r=Ut(e,t);if(r!==null){var s=$e();yt(r,e,t,s)}ro(e,t)}};su=function(){return le};lu=function(e,t){var r=le;try{return le=e,t()}finally{le=r}};Ea=function(e,t,r){switch(t){case"input":if(ja(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var l=wl(s);if(!l)throw Error(M(90));Dd(s),ja(s,l)}}}break;case"textarea":Id(e,r);break;case"select":t=r.value,t!=null&&Gn(e,!!r.multiple,t,!1)}};Hd=Ji;Qd=En;var Op={usingClientEntryPoint:!1,Events:[os,$n,wl,Wd,Vd,Ji]},Nr={findFiberByHostInstance:vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Wp={bundleType:Nr.bundleType,version:Nr.version,rendererPackageName:Nr.rendererPackageName,rendererConfig:Nr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Yd(e),e===null?null:e.stateNode},findFiberByHostInstance:Nr.findFiberByHostInstance||$p,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _s=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_s.isDisabled&&_s.supportsFiber)try{gl=_s.inject(Wp),St=_s}catch{}}tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Op;tt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lo(t))throw Error(M(200));return Up(e,t,null,r)};tt.createRoot=function(e,t){if(!lo(e))throw Error(M(299));var r=!1,s="",l=Em;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=no(e,1,!1,null,null,r,!1,s,l),e[It]=t.current,Gr(e.nodeType===8?e.parentNode:e),new so(t)};tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=Yd(t),e=e===null?null:e.stateNode,e};tt.flushSync=function(e){return En(e)};tt.hydrate=function(e,t,r){if(!_l(t))throw Error(M(200));return Rl(null,e,t,!0,r)};tt.hydrateRoot=function(e,t,r){if(!lo(e))throw Error(M(405));var s=r!=null&&r.hydratedSources||null,l=!1,a="",i=Em;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),t=Cm(t,null,e,1,r??null,l,!1,a,i),e[It]=t.current,Gr(e),s)for(e=0;e<s.length;e++)r=s[e],l=r._getVersion,l=l(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,l]:t.mutableSourceEagerHydrationData.push(r,l);return new Ll(t)};tt.render=function(e,t,r){if(!_l(t))throw Error(M(200));return Rl(null,e,t,!1,r)};tt.unmountComponentAtNode=function(e){if(!_l(e))throw Error(M(40));return e._reactRootContainer?(En(function(){Rl(null,null,e,!1,function(){e._reactRootContainer=null,e[It]=null})}),!0):!1};tt.unstable_batchedUpdates=Ji;tt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!_l(r))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return Rl(e,t,r,!1,s)};tt.version="18.3.1-next-f1338f8080-20240426";function Pm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pm)}catch(e){console.error(e)}}Pm(),Pd.exports=tt;var Vp=Pd.exports,nd=Vp;ha.createRoot=nd.createRoot,ha.hydrateRoot=nd.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rs(){return rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},rs.apply(this,arguments)}var Jt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Jt||(Jt={}));const rd="popstate";function Hp(e){e===void 0&&(e={});function t(s,l){let{pathname:a,search:i,hash:c}=s.location;return ai("",{pathname:a,search:i,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(s,l){return typeof l=="string"?l:fl(l)}return qp(t,r,null,e)}function we(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Lm(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Qp(){return Math.random().toString(36).substr(2,8)}function sd(e,t){return{usr:e.state,key:e.key,idx:t}}function ai(e,t,r,s){return r===void 0&&(r=null),rs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?dr(t):t,{state:r,key:t&&t.key||s||Qp()})}function fl(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function dr(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function qp(e,t,r,s){s===void 0&&(s={});let{window:l=document.defaultView,v5Compat:a=!1}=s,i=l.history,c=Jt.Pop,o=null,d=x();d==null&&(d=0,i.replaceState(rs({},i.state,{idx:d}),""));function x(){return(i.state||{idx:null}).idx}function h(){c=Jt.Pop;let S=x(),f=S==null?null:S-d;d=S,o&&o({action:c,location:y.location,delta:f})}function g(S,f){c=Jt.Push;let m=ai(y.location,S,f);d=x()+1;let u=sd(m,d),b=y.createHref(m);try{i.pushState(u,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;l.location.assign(b)}a&&o&&o({action:c,location:y.location,delta:1})}function N(S,f){c=Jt.Replace;let m=ai(y.location,S,f);d=x();let u=sd(m,d),b=y.createHref(m);i.replaceState(u,"",b),a&&o&&o({action:c,location:y.location,delta:0})}function j(S){let f=l.location.origin!=="null"?l.location.origin:l.location.href,m=typeof S=="string"?S:fl(S);return m=m.replace(/ $/,"%20"),we(f,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,f)}let y={get action(){return c},get location(){return e(l,i)},listen(S){if(o)throw new Error("A history only accepts one active listener");return l.addEventListener(rd,h),o=S,()=>{l.removeEventListener(rd,h),o=null}},createHref(S){return t(l,S)},createURL:j,encodeLocation(S){let f=j(S);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:g,replace:N,go(S){return i.go(S)}};return y}var ld;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ld||(ld={}));function Gp(e,t,r){return r===void 0&&(r="/"),Yp(e,t,r)}function Yp(e,t,r,s){let l=typeof t=="string"?dr(t):t,a=ao(l.pathname||"/",r);if(a==null)return null;let i=_m(e);Kp(i);let c=null;for(let o=0;c==null&&o<i.length;++o){let d=cf(a);c=lf(i[o],d)}return c}function _m(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let l=(a,i,c)=>{let o={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};o.relativePath.startsWith("/")&&(we(o.relativePath.startsWith(s),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(s.length));let d=on([s,o.relativePath]),x=r.concat(o);a.children&&a.children.length>0&&(we(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),_m(a.children,t,x,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:rf(d,a.index),routesMeta:x})};return e.forEach((a,i)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))l(a,i);else for(let o of Rm(a.path))l(a,i,o)}),t}function Rm(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,l=r.endsWith("?"),a=r.replace(/\?$/,"");if(s.length===0)return l?[a,""]:[a];let i=Rm(s.join("/")),c=[];return c.push(...i.map(o=>o===""?a:[a,o].join("/"))),l&&c.push(...i),c.map(o=>e.startsWith("/")&&o===""?"/":o)}function Kp(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:sf(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const Xp=/^:[\w-]+$/,Jp=3,Zp=2,ef=1,tf=10,nf=-2,ad=e=>e==="*";function rf(e,t){let r=e.split("/"),s=r.length;return r.some(ad)&&(s+=nf),t&&(s+=Zp),r.filter(l=>!ad(l)).reduce((l,a)=>l+(Xp.test(a)?Jp:a===""?ef:tf),s)}function sf(e,t){return e.length===t.length&&e.slice(0,-1).every((s,l)=>s===t[l])?e[e.length-1]-t[t.length-1]:0}function lf(e,t,r){let{routesMeta:s}=e,l={},a="/",i=[];for(let c=0;c<s.length;++c){let o=s[c],d=c===s.length-1,x=a==="/"?t:t.slice(a.length)||"/",h=af({path:o.relativePath,caseSensitive:o.caseSensitive,end:d},x),g=o.route;if(!h)return null;Object.assign(l,h.params),i.push({params:l,pathname:on([a,h.pathname]),pathnameBase:hf(on([a,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(a=on([a,h.pathnameBase]))}return i}function af(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=of(e.path,e.caseSensitive,e.end),l=t.match(r);if(!l)return null;let a=l[0],i=a.replace(/(.)\/+$/,"$1"),c=l.slice(1);return{params:s.reduce((d,x,h)=>{let{paramName:g,isOptional:N}=x;if(g==="*"){let y=c[h]||"";i=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const j=c[h];return N&&!j?d[g]=void 0:d[g]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:i,pattern:e}}function of(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Lm(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,o)=>(s.push({paramName:c,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),s]}function cf(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Lm(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ao(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function df(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:l=""}=typeof e=="string"?dr(e):e;return{pathname:r?r.startsWith("/")?r:uf(r,t):t,search:pf(s),hash:ff(l)}}function uf(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function ua(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mf(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function io(e,t){let r=mf(e);return t?r.map((s,l)=>l===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function oo(e,t,r,s){s===void 0&&(s=!1);let l;typeof e=="string"?l=dr(e):(l=rs({},e),we(!l.pathname||!l.pathname.includes("?"),ua("?","pathname","search",l)),we(!l.pathname||!l.pathname.includes("#"),ua("#","pathname","hash",l)),we(!l.search||!l.search.includes("#"),ua("#","search","hash",l)));let a=e===""||l.pathname==="",i=a?"/":l.pathname,c;if(i==null)c=r;else{let h=t.length-1;if(!s&&i.startsWith("..")){let g=i.split("/");for(;g[0]==="..";)g.shift(),h-=1;l.pathname=g.join("/")}c=h>=0?t[h]:"/"}let o=df(l,c),d=i&&i!=="/"&&i.endsWith("/"),x=(a||i===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(d||x)&&(o.pathname+="/"),o}const on=e=>e.join("/").replace(/\/\/+/g,"/"),hf=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),pf=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ff=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function xf(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Mm=["post","put","patch","delete"];new Set(Mm);const gf=["get",...Mm];new Set(gf);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ss(){return ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ss.apply(this,arguments)}const co=p.createContext(null),vf=p.createContext(null),pn=p.createContext(null),Ml=p.createContext(null),Ot=p.createContext({outlet:null,matches:[],isDataRoute:!1}),Tm=p.createContext(null);function yf(e,t){let{relative:r}=t===void 0?{}:t;ur()||we(!1);let{basename:s,navigator:l}=p.useContext(pn),{hash:a,pathname:i,search:c}=zm(e,{relative:r}),o=i;return s!=="/"&&(o=i==="/"?s:on([s,i])),l.createHref({pathname:o,search:c,hash:a})}function ur(){return p.useContext(Ml)!=null}function fn(){return ur()||we(!1),p.useContext(Ml).location}function Am(e){p.useContext(pn).static||p.useLayoutEffect(e)}function Pt(){let{isDataRoute:e}=p.useContext(Ot);return e?Tf():jf()}function jf(){ur()||we(!1);let e=p.useContext(co),{basename:t,future:r,navigator:s}=p.useContext(pn),{matches:l}=p.useContext(Ot),{pathname:a}=fn(),i=JSON.stringify(io(l,r.v7_relativeSplatPath)),c=p.useRef(!1);return Am(()=>{c.current=!0}),p.useCallback(function(d,x){if(x===void 0&&(x={}),!c.current)return;if(typeof d=="number"){s.go(d);return}let h=oo(d,JSON.parse(i),a,x.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:on([t,h.pathname])),(x.replace?s.replace:s.push)(h,x.state,x)},[t,s,i,a,e])}function wf(){let{matches:e}=p.useContext(Ot),t=e[e.length-1];return t?t.params:{}}function zm(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=p.useContext(pn),{matches:l}=p.useContext(Ot),{pathname:a}=fn(),i=JSON.stringify(io(l,s.v7_relativeSplatPath));return p.useMemo(()=>oo(e,JSON.parse(i),a,r==="path"),[e,i,a,r])}function bf(e,t){return Nf(e,t)}function Nf(e,t,r,s){ur()||we(!1);let{navigator:l}=p.useContext(pn),{matches:a}=p.useContext(Ot),i=a[a.length-1],c=i?i.params:{};i&&i.pathname;let o=i?i.pathnameBase:"/";i&&i.route;let d=fn(),x;if(t){var h;let S=typeof t=="string"?dr(t):t;o==="/"||(h=S.pathname)!=null&&h.startsWith(o)||we(!1),x=S}else x=d;let g=x.pathname||"/",N=g;if(o!=="/"){let S=o.replace(/^\//,"").split("/");N="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let j=Gp(e,{pathname:N}),y=Pf(j&&j.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:on([o,l.encodeLocation?l.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?o:on([o,l.encodeLocation?l.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,r,s);return t&&y?p.createElement(Ml.Provider,{value:{location:ss({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Jt.Pop}},y):y}function kf(){let e=Mf(),t=xf(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:l},r):null,null)}const Sf=p.createElement(kf,null);class Cf extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?p.createElement(Ot.Provider,{value:this.props.routeContext},p.createElement(Tm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ef(e){let{routeContext:t,match:r,children:s}=e,l=p.useContext(co);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(Ot.Provider,{value:t},s)}function Pf(e,t,r,s){var l;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=s)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,c=(l=r)==null?void 0:l.errors;if(c!=null){let x=i.findIndex(h=>h.route.id&&(c==null?void 0:c[h.route.id])!==void 0);x>=0||we(!1),i=i.slice(0,Math.min(i.length,x+1))}let o=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let x=0;x<i.length;x++){let h=i[x];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=x),h.route.id){let{loaderData:g,errors:N}=r,j=h.route.loader&&g[h.route.id]===void 0&&(!N||N[h.route.id]===void 0);if(h.route.lazy||j){o=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((x,h,g)=>{let N,j=!1,y=null,S=null;r&&(N=c&&h.route.id?c[h.route.id]:void 0,y=h.route.errorElement||Sf,o&&(d<0&&g===0?(Af("route-fallback"),j=!0,S=null):d===g&&(j=!0,S=h.route.hydrateFallbackElement||null)));let f=t.concat(i.slice(0,g+1)),m=()=>{let u;return N?u=y:j?u=S:h.route.Component?u=p.createElement(h.route.Component,null):h.route.element?u=h.route.element:u=x,p.createElement(Ef,{match:h,routeContext:{outlet:x,matches:f,isDataRoute:r!=null},children:u})};return r&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?p.createElement(Cf,{location:r.location,revalidation:r.revalidation,component:y,error:N,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()},null)}var Dm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Dm||{}),Fm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Fm||{});function Lf(e){let t=p.useContext(co);return t||we(!1),t}function _f(e){let t=p.useContext(vf);return t||we(!1),t}function Rf(e){let t=p.useContext(Ot);return t||we(!1),t}function Im(e){let t=Rf(),r=t.matches[t.matches.length-1];return r.route.id||we(!1),r.route.id}function Mf(){var e;let t=p.useContext(Tm),r=_f(),s=Im();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function Tf(){let{router:e}=Lf(Dm.UseNavigateStable),t=Im(Fm.UseNavigateStable),r=p.useRef(!1);return Am(()=>{r.current=!0}),p.useCallback(function(l,a){a===void 0&&(a={}),r.current&&(typeof l=="number"?e.navigate(l):e.navigate(l,ss({fromRouteId:t},a)))},[e,t])}const id={};function Af(e,t,r){id[e]||(id[e]=!0)}function zf(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ii(e){let{to:t,replace:r,state:s,relative:l}=e;ur()||we(!1);let{future:a,static:i}=p.useContext(pn),{matches:c}=p.useContext(Ot),{pathname:o}=fn(),d=Pt(),x=oo(t,io(c,a.v7_relativeSplatPath),o,l==="path"),h=JSON.stringify(x);return p.useEffect(()=>d(JSON.parse(h),{replace:r,state:s,relative:l}),[d,h,l,r,s]),null}function lt(e){we(!1)}function Df(e){let{basename:t="/",children:r=null,location:s,navigationType:l=Jt.Pop,navigator:a,static:i=!1,future:c}=e;ur()&&we(!1);let o=t.replace(/^\/*/,"/"),d=p.useMemo(()=>({basename:o,navigator:a,static:i,future:ss({v7_relativeSplatPath:!1},c)}),[o,c,a,i]);typeof s=="string"&&(s=dr(s));let{pathname:x="/",search:h="",hash:g="",state:N=null,key:j="default"}=s,y=p.useMemo(()=>{let S=ao(x,o);return S==null?null:{location:{pathname:S,search:h,hash:g,state:N,key:j},navigationType:l}},[o,x,h,g,N,j,l]);return y==null?null:p.createElement(pn.Provider,{value:d},p.createElement(Ml.Provider,{children:r,value:y}))}function Ff(e){let{children:t,location:r}=e;return bf(oi(t),r)}new Promise(()=>{});function oi(e,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(e,(s,l)=>{if(!p.isValidElement(s))return;let a=[...t,l];if(s.type===p.Fragment){r.push.apply(r,oi(s.props.children,a));return}s.type!==lt&&we(!1),!s.props.index||!s.props.children||we(!1);let i={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=oi(s.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ci(){return ci=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ci.apply(this,arguments)}function If(e,t){if(e==null)return{};var r={},s=Object.keys(e),l,a;for(a=0;a<s.length;a++)l=s[a],!(t.indexOf(l)>=0)&&(r[l]=e[l]);return r}function Uf(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function $f(e,t){return e.button===0&&(!t||t==="_self")&&!Uf(e)}function di(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(l=>[r,l]):[[r,s]])},[]))}function Bf(e,t){let r=di(e);return t&&t.forEach((s,l)=>{r.has(l)||t.getAll(l).forEach(a=>{r.append(l,a)})}),r}const Of=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Wf="6";try{window.__reactRouterVersion=Wf}catch{}const Vf="startTransition",od=T0[Vf];function Hf(e){let{basename:t,children:r,future:s,window:l}=e,a=p.useRef();a.current==null&&(a.current=Hp({window:l,v5Compat:!0}));let i=a.current,[c,o]=p.useState({action:i.action,location:i.location}),{v7_startTransition:d}=s||{},x=p.useCallback(h=>{d&&od?od(()=>o(h)):o(h)},[o,d]);return p.useLayoutEffect(()=>i.listen(x),[i,x]),p.useEffect(()=>zf(s),[s]),p.createElement(Df,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:i,future:s})}const Qf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ue=p.forwardRef(function(t,r){let{onClick:s,relative:l,reloadDocument:a,replace:i,state:c,target:o,to:d,preventScrollReset:x,viewTransition:h}=t,g=If(t,Of),{basename:N}=p.useContext(pn),j,y=!1;if(typeof d=="string"&&qf.test(d)&&(j=d,Qf))try{let u=new URL(window.location.href),b=d.startsWith("//")?new URL(u.protocol+d):new URL(d),w=ao(b.pathname,N);b.origin===u.origin&&w!=null?d=w+b.search+b.hash:y=!0}catch{}let S=yf(d,{relative:l}),f=Gf(d,{replace:i,state:c,target:o,preventScrollReset:x,relative:l,viewTransition:h});function m(u){s&&s(u),u.defaultPrevented||f(u)}return p.createElement("a",ci({},g,{href:j||S,onClick:y||a?s:m,ref:r,target:o}))});var cd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(cd||(cd={}));var dd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(dd||(dd={}));function Gf(e,t){let{target:r,replace:s,state:l,preventScrollReset:a,relative:i,viewTransition:c}=t===void 0?{}:t,o=Pt(),d=fn(),x=zm(e,{relative:i});return p.useCallback(h=>{if($f(h,r)){h.preventDefault();let g=s!==void 0?s:fl(d)===fl(x);o(e,{replace:g,state:l,preventScrollReset:a,relative:i,viewTransition:c})}},[d,o,x,s,l,r,e,a,i,c])}function Yf(e){let t=p.useRef(di(e)),r=p.useRef(!1),s=fn(),l=p.useMemo(()=>Bf(s.search,r.current?null:t.current),[s.search]),a=Pt(),i=p.useCallback((c,o)=>{const d=di(typeof c=="function"?c(l):c);r.current=!0,a("?"+d,o)},[a,l]);return[l,i]}const Et={WORKER_BASE_URL:"https://quickstage.tech",WEB_BASE_URL:"https://quickstage.tech",PUBLIC_BASE_URL:"https://quickstage.tech",API_BASE_URL:"/api",getSnapshotUrl:e=>`${Et.WORKER_BASE_URL}/s/${e}`,EXTENSION_DOWNLOAD_URL:"/quickstage.vsix",VERSION_INFO_URL:"/api/extensions/version",STRIPE_PUBLIC_KEY:"pk_test_YOUR_ACTUAL_KEY_HERE"},An=Et.WORKER_BASE_URL.replace(/\/$/,"");let Um=localStorage.getItem("quickstage_session_token");function Tt(e){Um=e,e?localStorage.setItem("quickstage_session_token",e):localStorage.removeItem("quickstage_session_token")}function kr(){return Um}const R={async get(e){const t={"Content-Type":"application/json"},r=kr();r&&(t.Authorization=`Bearer ${r}`),console.log("Making request to:",`${An}${e}`),console.log("Headers:",t);const s=await fetch(`${An}${e}`,{credentials:"include",headers:t});if(!s.ok)throw console.error("Request failed:",s.status,s.statusText),s.status===401?(console.log("Token invalid, clearing session..."),Tt(null),window.location.href="/login",new Error("Authentication failed - please log in again")):new Error(`API request failed: ${s.status}`);const l=await s.json();return console.log(`API GET ${e} response:`,l),l},async post(e,t){const r={"Content-Type":"application/json"},s=kr();s&&(r.Authorization=`Bearer ${s}`);const l=`${An}${e}`,a=await fetch(l,{method:"POST",credentials:"include",headers:r,body:t?JSON.stringify(t):void 0});if(!a.ok){let i="";try{i=await a.text()}catch{}throw a.status===401?(console.log("Token invalid, clearing session..."),Tt(null),window.location.href="/login",new Error("Authentication failed - please log in again")):new Error(`API request failed: ${a.status}${i?": "+i:""}`)}return a.json()},async put(e,t){const r={"Content-Type":"application/json"},s=kr();s&&(r.Authorization=`Bearer ${s}`);const l=await fetch(`${An}${e}`,{method:"PUT",credentials:"include",headers:r,body:t?JSON.stringify(t):void 0});if(!l.ok)throw l.status===401?(console.log("Token invalid, clearing session..."),Tt(null),window.location.href="/login",new Error("Authentication failed - please log in again")):new Error(`API request failed: ${l.status}`);return l.json()},async patch(e,t){const r={"Content-Type":"application/json"},s=kr();s&&(r.Authorization=`Bearer ${s}`);const l=await fetch(`${An}${e}`,{method:"PATCH",credentials:"include",headers:r,body:t?JSON.stringify(t):void 0});if(!l.ok)throw l.status===401?(console.log("Token invalid, clearing session..."),Tt(null),window.location.href="/login",new Error("Authentication failed - please log in again")):new Error(`API request failed: ${l.status}`);return l.json()},async delete(e){const t={"Content-Type":"application/json"},r=kr();r&&(t.Authorization=`Bearer ${r}`);const s=await fetch(`${An}${e}`,{method:"DELETE",credentials:"include",headers:t});if(!s.ok)throw s.status===401?(console.log("Token invalid, clearing session..."),Tt(null),window.location.href="/login",new Error("Authentication failed - please log in again")):new Error(`API request failed: ${s.status}`);return s.json()}},$m={async deleteUser(e){return R.delete(`/admin/users/${e}`)},async deactivateUser(e){return R.post(`/admin/users/${e}/deactivate`)},async activateUser(e){return R.post(`/admin/users/${e}/activate`)},async cleanupCorruptedUsers(){return R.post("/admin/cleanup-corrupted-users")}},Bm=p.createContext(void 0);function wt(){const e=p.useContext(Bm);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function Kf({children:e}){const[t,r]=p.useState(null),[s,l]=p.useState(!0),[a,i]=p.useState(null),c=async()=>{try{i(null),l(!0);const m=await R.get("/me");m.user?r(m.user):r(null)}catch(m){console.error("Failed to fetch user:",m),r(null)}finally{l(!1)}},o=async m=>{try{i(null),l(!0),await R.post("/auth/dev-login",{uid:m}),await c()}catch(u){const b=u.message||"Login failed";throw i(b),r(null),u}finally{l(!1)}},d=async(m,u)=>{try{i(null),l(!0);const b=await R.post("/auth/login",{email:m,password:u});b.ok&&b.user?(b.sessionToken&&Tt(b.sessionToken),await c()):await c()}catch(b){const w=b.message||"Login failed";throw i(w),r(null),b}finally{l(!1)}},x=async m=>{try{i(null),l(!0);const u=await R.post("/auth/google",{idToken:m});u.ok&&u.user?(u.sessionToken&&Tt(u.sessionToken),await c()):await c()}catch(u){const b=u.message||"Google login failed";throw i(b),r(null),u}finally{l(!1)}},h=async(m,u,b)=>{try{i(null),l(!0);const w=await R.post("/auth/register",{email:m,password:u,name:b});w.ok&&w.user?(w.sessionToken&&Tt(w.sessionToken),await c()):await c()}catch(w){const k=w.message||"Registration failed";throw i(k),r(null),w}finally{l(!1)}},g=async()=>{try{i(null),await R.post("/auth/logout")}catch(m){console.error("Logout error:",m)}finally{Tt(null),r(null),i(null)}},N=async m=>{try{i(null),l(!0),await R.put("/auth/profile",m),await c()}catch(u){const b=u.message||"Profile update failed";throw i(b),u}finally{l(!1)}},j=async(m,u)=>{try{i(null),l(!0),await R.post("/auth/change-password",{currentPassword:m,newPassword:u})}catch(b){const w=b.message||"Password change failed";throw i(w),b}finally{l(!1)}},y=async()=>{try{i(null),l(!0);const m=await R.post("/billing/cancel");return m.ok?(await c(),{ok:!0,message:m.message||"Subscription cancelled successfully."}):{ok:!1,error:m.message||"Failed to cancel subscription."}}catch(m){const u=m.message||"Subscription cancellation failed";return i(u),{ok:!1,error:u}}finally{l(!1)}},S=()=>{i(null)};p.useEffect(()=>{localStorage.getItem("quickstage_session_token")?c():l(!1)},[]);const f={user:t,loading:s,error:a,login:o,loginWithEmailPassword:d,loginWithGoogle:x,registerWithEmailPassword:h,logout:g,refreshUser:c,clearError:S,isAuthenticated:!!t,updateProfile:N,changePassword:j,cancelSubscription:y};return n.jsx(Bm.Provider,{value:f,children:e})}function uo({className:e=""}){const[t,r]=p.useState([]),[s,l]=p.useState(0),[a,i]=p.useState(!1),[c,o]=p.useState(!1),d=async()=>{try{o(!0);const y=(await R.get("/api/notifications")).notifications||[];r(y),l(y.filter(S=>!S.readAt).length)}catch(j){console.error("Failed to load notifications:",j)}finally{o(!1)}};p.useEffect(()=>{d()},[]);const x=async j=>{try{await R.post(`/api/notifications/${j}/read`),r(y=>y.map(S=>S.id===j?{...S,readAt:Date.now()}:S)),l(y=>Math.max(0,y-1))}catch(y){console.error("Failed to mark notification as read:",y)}},h=async()=>{try{await R.post("/api/notifications/read-all"),r(j=>j.map(y=>({...y,readAt:Date.now()}))),l(0)}catch(j){console.error("Failed to mark all notifications as read:",j)}},g=j=>{j.readAt||x(j.id),j.actionUrl&&(window.location.href=j.actionUrl),i(!1)},N=j=>{const S=Date.now()-j,f=Math.floor(S/(1e3*60)),m=Math.floor(S/(1e3*60*60)),u=Math.floor(S/(1e3*60*60*24));return f<1?"Just now":f<60?`${f}m ago`:m<24?`${m}h ago`:`${u}d ago`};return n.jsxs("div",{className:`relative ${e}`,children:[n.jsxs("button",{onClick:()=>i(!a),className:"relative p-1.5 text-gray-600 hover:text-gray-900 focus:outline-none focus:text-gray-900 transition-colors","aria-label":`Notifications ${s>0?`(${s} unread)`:""}`,children:[n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:n.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})}),s>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium",children:s>99?"99+":s})]}),a&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)}),n.jsxs("div",{className:"absolute right-0 top-full mt-2 w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-inconsolata",children:"Notifications"}),s>0&&n.jsx("button",{onClick:h,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Mark all read"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:c?n.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading..."}):t.length===0?n.jsxs("div",{className:"p-6 text-center text-gray-500",children:[n.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})}),n.jsx("p",{className:"text-sm",children:"No notifications yet"})]}):t.map(j=>n.jsx("div",{className:`p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors ${j.readAt?"":"bg-blue-50"}`,onClick:()=>g(j),children:n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${j.type==="comment_reply"?"bg-blue-100":j.type==="comment_new"?"bg-green-100":j.type==="comment_resolved"?"bg-purple-100":"bg-gray-100"}`,children:n.jsx("svg",{className:`w-4 h-4 ${j.type==="comment_reply"?"text-blue-600":j.type==="comment_new"?"text-green-600":j.type==="comment_resolved"?"text-purple-600":"text-gray-600"}`,fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:j.title}),!j.readAt&&n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full ml-2 flex-shrink-0"})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:j.message}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:N(j.createdAt)})]})]})},j.id))}),t.length>0&&n.jsx("div",{className:"p-3 border-t border-gray-200 bg-gray-50",children:n.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800 font-medium w-full text-center",children:"View all notifications"})})]})]})]})}function mo({projects:e,selectedProjectId:t,onSelectProject:r,onRefreshProjects:s,user:l,isCollapsed:a=!1,onToggleCollapse:i}){const c=fn(),[o,d]=p.useState(!1),[x,h]=p.useState(""),[g,N]=p.useState("#4F46E5"),[j,y]=p.useState(!1),S=["#4F46E5","#7C3AED","#EC4899","#EF4444","#F59E0B","#10B981","#3B82F6","#6B7280"],f=async()=>{if(x.trim()){y(!0);try{await R.post("/api/projects",{name:x,color:g}),h(""),d(!1),s()}catch(w){console.error("Failed to create project:",w)}finally{y(!1)}}},m=async w=>{if(confirm("Are you sure you want to delete this project? This action cannot be undone."))try{await R.delete(`/api/projects/${w}`),t===w&&r(void 0),s()}catch(k){alert(k.error||"Failed to delete project")}},u=e.filter(w=>!w.isArchived||w.id==="__no_project__"),b=e.filter(w=>w.isArchived&&w.id!=="__no_project__");return n.jsxs("div",{className:`${a?"w-16":"w-64"} bg-white border-r border-gray-200 h-full overflow-y-auto transition-all duration-300 flex flex-col font-poppins`,children:[n.jsx("div",{className:"p-4 flex-1",children:n.jsxs("nav",{className:"space-y-1",children:[n.jsxs("button",{onClick:()=>r(void 0),className:`w-full flex items-center px-3 py-2 rounded-lg transition-colors ${c.pathname==="/dashboard"&&!t?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-700"}`,title:a?"Dashboard":"",children:[n.jsxs("svg",{className:"w-5 h-5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v0"})]}),!a&&n.jsx("span",{className:"font-medium",children:"Dashboard"})]}),n.jsxs("div",{className:"pt-2",children:[n.jsxs("div",{className:"flex items-center px-3 py-2 rounded-lg transition-colors hover:bg-gray-50 text-gray-700",children:[n.jsx("svg",{className:"w-5 h-5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),!a&&n.jsxs("div",{className:"flex items-center justify-between w-full",children:[n.jsx("span",{className:"font-medium",children:"Projects"}),n.jsx("button",{onClick:()=>d(!0),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"New Project",children:n.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]}),o&&!a&&n.jsxs("div",{className:"ml-6 mt-2 mb-3 p-3 bg-gray-50 rounded-lg",children:[n.jsx("input",{type:"text",value:x,onChange:w=>h(w.target.value),placeholder:"Project name...",className:"w-full px-3 py-2 border border-gray-300 rounded-md mb-2 text-sm",autoFocus:!0,onKeyPress:w=>w.key==="Enter"&&f()}),n.jsx("div",{className:"flex gap-1 mb-2",children:S.map(w=>n.jsx("button",{onClick:()=>N(w),className:`w-6 h-6 rounded ${g===w?"ring-2 ring-offset-1 ring-gray-400":""}`,style:{backgroundColor:w}},w))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:f,disabled:j||!x.trim(),className:"flex-1 px-3 py-1 bg-indigo-600 text-white rounded-md text-sm hover:bg-indigo-700 disabled:opacity-50",children:"Create"}),n.jsx("button",{onClick:()=>{d(!1),h("")},className:"flex-1 px-3 py-1 bg-gray-200 text-gray-700 rounded-md text-sm hover:bg-gray-300",children:"Cancel"})]})]}),!a&&n.jsx("div",{className:"ml-6 space-y-1",children:u.map(w=>n.jsxs("div",{className:`group relative flex items-center px-3 py-2 rounded-lg cursor-pointer transition-colors ${t===w.id?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-700"}`,onClick:()=>r(w.id),title:w.name,children:[w.id==="__no_project__"?n.jsx("svg",{className:"w-3 h-3 mr-2 flex-shrink-0 text-gray-400",fill:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}):n.jsx("div",{className:"w-3 h-3 rounded-full mr-2 flex-shrink-0",style:{backgroundColor:w.color||"#6B7280"}}),n.jsx("span",{className:"flex-1 text-sm truncate",children:w.name}),n.jsx("span",{className:"text-xs text-gray-500",children:w.snapshotCount}),w.snapshotCount===0&&w.id!=="__no_project__"&&n.jsx("button",{onClick:k=>{k.stopPropagation(),m(w.id)},className:"ml-2 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete project",children:n.jsx("svg",{className:"w-4 h-4 text-red-500 hover:text-red-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},w.id))})]}),n.jsxs(Ue,{to:"/settings",className:`flex items-center px-3 py-2 rounded-lg transition-colors ${c.pathname==="/settings"?"bg-indigo-50 text-indigo-700":"hover:bg-gray-50 text-gray-700"}`,title:a?"Settings":"",children:[n.jsxs("svg",{className:"w-5 h-5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),!a&&n.jsx("span",{className:"font-medium",children:"Settings"})]}),(l==null?void 0:l.role)==="superadmin"&&n.jsxs(Ue,{to:"/admin",className:`flex items-center px-3 py-2 rounded-lg transition-colors ${c.pathname==="/admin"?"bg-red-50 text-red-700":"hover:bg-red-50 text-red-600"}`,title:a?"Admin Panel":"",children:[n.jsx("svg",{className:"w-5 h-5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),!a&&n.jsx("span",{className:"font-medium",children:"Admin"})]})]})}),!a&&b.length>0&&n.jsxs("div",{className:"px-4 pb-4",children:[n.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2 mt-4",children:"Archived"}),n.jsx("div",{className:"space-y-1",children:b.map(w=>n.jsxs("div",{className:`flex items-center px-3 py-2 rounded-lg cursor-pointer transition-colors opacity-50 ${t===w.id?"bg-gray-100":"hover:bg-gray-50"}`,onClick:()=>r(w.id),children:[n.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:w.color||"#6B7280"}}),n.jsx("span",{className:"flex-1 text-gray-600 truncate",children:w.name}),n.jsx("span",{className:"text-xs text-gray-400",children:w.snapshotCount})]},w.id))})]}),i&&n.jsx("div",{className:"mt-auto border-t border-gray-200",children:n.jsx("div",{className:"flex justify-center p-4",children:n.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:a?"Expand sidebar":"Collapse sidebar",children:n.jsx("svg",{className:`w-4 h-4 text-gray-600 transition-transform ${a?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})})})})]})}function Om({onClose:e,onSubmit:t}){const[r,s]=p.useState([]),[l,a]=p.useState(""),[i,c]=p.useState(""),[o,d]=p.useState(""),[x,h]=p.useState(""),[g,N]=p.useState(null),j=()=>{if(!l.trim()||!i.trim()){N("Please enter both name and email");return}if(r.some(m=>m.userEmail===l)){N("This reviewer is already added");return}const f=`user_${l.replace(/[^a-zA-Z0-9]/g,"_")}`;s([...r,{userId:f,userName:i,userEmail:l}]),a(""),c(""),N(null)},y=f=>{s(r.filter(m=>m.userEmail!==f))},S=f=>{if(f.preventDefault(),r.length===0){N("Please add at least one reviewer");return}const m=o?new Date(o).toISOString():void 0;t({reviewers:r,deadline:m,notes:x.trim()||void 0})};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-inconsolata",children:"Request Review"}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("form",{onSubmit:S,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Add Reviewers"}),n.jsxs("div",{className:"space-y-2 mb-2",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"Reviewer name",value:i,onChange:f=>c(f.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.jsx("input",{type:"email",placeholder:"reviewer@example.com",value:l,onChange:f=>a(f.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsx("button",{type:"button",onClick:j,className:"w-full px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Reviewer"})]}),r.length>0&&n.jsx("div",{className:"space-y-2",children:r.map(f=>n.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:f.userName}),n.jsx("p",{className:"text-sm text-gray-600",children:f.userEmail})]}),n.jsx("button",{type:"button",onClick:()=>y(f.userEmail),className:"text-red-500 hover:text-red-700",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},f.userEmail))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deadline (optional)"}),n.jsx("input",{type:"datetime-local",value:o,onChange:f=>d(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (optional)"}),n.jsx("textarea",{value:x,onChange:f=>h(f.target.value),placeholder:"Add any specific instructions or context for reviewers...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),g&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:n.jsx("p",{className:"text-red-600 text-sm",children:g})}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Send Review Request"})]})]})]})})})}function Xf({snapshots:e,onRefresh:t,selectedSnapshots:r,onToggleSelect:s,onSelectAll:l}){var Wt;const[a,i]=p.useState("createdAt"),[c,o]=p.useState("desc"),[d,x]=p.useState(""),[h,g]=p.useState(!1),[N,j]=p.useState(new Set),[y,S]=p.useState(new Set),[f,m]=p.useState(new Set),[u,b]=p.useState(null),[w,k]=p.useState(""),[P,E]=p.useState(null),[A,F]=p.useState(null),[D,G]=p.useState(null),[q,J]=p.useState(""),[re,_]=p.useState(new Set),[V,L]=p.useState(new Set),[z,B]=p.useState(null),[K,te]=p.useState(new Set),{user:ae}=wt();qn.useEffect(()=>{(async()=>{if(ae)try{const Y=(await R.get("/api/subscriptions")).subscriptions||[],U=Y.filter(be=>be.isActive&&!be.commentId).map(be=>be.snapshotId),H=Y.filter(be=>!be.isActive&&!be.commentId).map(be=>be.snapshotId);_(new Set([...U,...H])),L(new Set(H))}catch(O){console.error("Failed to load user subscriptions:",O)}})()},[ae]);const he=C=>{a===C?o(c==="asc"?"desc":"asc"):(i(C),o("asc"))},ke=p.useMemo(()=>{let C=[...e];if(d){const O=d.toLowerCase();C=C.filter(Y=>{var U,H,be,Se;return((U=Y.name)==null?void 0:U.toLowerCase().includes(O))||Y.id.toLowerCase().includes(O)||((H=Y.description)==null?void 0:H.toLowerCase().includes(O))||((be=Y.clientName)==null?void 0:be.toLowerCase().includes(O))||((Se=Y.tags)==null?void 0:Se.some(Tl=>Tl.toLowerCase().includes(O)))})}return h||(C=C.filter(O=>new Date(O.expiresAt)>new Date)),C.sort((O,Y)=>{let U,H;switch(a){case"name":U=O.name||`Snapshot ${O.id.slice(0,8)}`,H=Y.name||`Snapshot ${Y.id.slice(0,8)}`;break;case"createdAt":U=new Date(O.createdAt).getTime(),H=new Date(Y.createdAt).getTime();break;case"updatedAt":U=new Date(O.lastModifiedAt||O.updatedAt||O.createdAt).getTime(),H=new Date(Y.lastModifiedAt||Y.updatedAt||Y.createdAt).getTime();break;case"expiresAt":U=new Date(O.expiresAt).getTime(),H=new Date(Y.expiresAt).getTime();break;case"viewCount":U=O.viewCount||0,H=Y.viewCount||0;break;case"commentCount":U=O.commentCount||0,H=Y.commentCount||0;break;default:return 0}return typeof U=="string"&&typeof H=="string"?c==="asc"?U.localeCompare(H):H.localeCompare(U):c==="asc"?U-H:H-U}),C},[e,a,c,d,h]),ie=async(C,O,Y)=>{const U=`${Et.PUBLIC_BASE_URL}/s/${C}`;try{await navigator.clipboard.writeText(U),j(H=>new Set(H).add(C)),E({x:O.clientX,y:O.clientY,text:"URL Copied"}),setTimeout(()=>{j(H=>{const be=new Set(H);return be.delete(C),be}),E(null)},2e3)}catch(H){console.error("Failed to copy:",H)}},pe=async(C,O)=>{try{await R.post(`/api/snapshots/${C}/extend`,{days:7}),S(Y=>new Set(Y).add(C)),E({x:O.clientX,y:O.clientY,text:"Expiration Extended"}),setTimeout(()=>{S(Y=>{const U=new Set(Y);return U.delete(C),U}),E(null)},2e3),t()}catch(Y){console.error("Failed to extend snapshot:",Y)}},T=async(C,O)=>{const Y=`${Et.PUBLIC_BASE_URL}/s/${C}`;if(O)try{await navigator.clipboard.writeText(O),console.log("Password copied to clipboard")}catch(U){console.error("Failed to copy password:",U)}window.open(Y,"_blank")},W=async(C,O,Y)=>{try{await navigator.clipboard.writeText(O),m(U=>new Set(U).add(C)),E({x:Y.clientX,y:Y.clientY,text:"Password Copied"}),setTimeout(()=>{m(U=>{const H=new Set(U);return H.delete(C),H}),E(null)},2e3)}catch(U){console.error("Failed to copy password:",U)}},Z=async C=>{if(w.trim())try{const O=await R.put(`/api/snapshots/${C}`,{password:w});await navigator.clipboard.writeText(w),E({x:window.innerWidth/2,y:window.innerHeight/2,text:"Password Copied"}),setTimeout(()=>{E(null)},2e3),b(null),k(""),t()}catch(O){console.error("Failed to change password:",O)}},fe=C=>{Q(C)&&(G(C.id),J(C.name||`Snapshot ${C.id.slice(0,8)}`))},rt=()=>{G(null),J("")},Ye=async C=>{if(!q.trim()){rt();return}try{await R.put(`/api/snapshots/${C}`,{name:q.trim()}),E({x:window.innerWidth/2,y:window.innerHeight/2,text:"Name updated"}),setTimeout(()=>E(null),2e3),G(null),J(""),t()}catch(O){console.error("Failed to rename snapshot:",O),E({x:window.innerWidth/2,y:window.innerHeight/2,text:"Failed to update name"}),setTimeout(()=>E(null),2e3)}},_n=(C,O)=>{C.key==="Enter"?Ye(O):C.key==="Escape"&&rt()},mr=async C=>{if(!A){console.error("No snapshot ID provided for review request");return}console.log("Requesting review for snapshot:",A);const O=e.find(U=>U.id===A);if(!O){console.error("Snapshot not found in current list:",A),E({x:window.innerWidth/2,y:window.innerHeight/2,text:"Snapshot not found"}),setTimeout(()=>E(null),2e3);return}if(new Date(O.expiresAt)<=new Date){console.warn("Attempting to request review on expired snapshot:",A),E({x:window.innerWidth/2,y:window.innerHeight/2,text:"Cannot request review on expired snapshot"}),setTimeout(()=>E(null),3e3);return}try{console.log("Verifying snapshot exists on backend:",A),await R.get(`/api/snapshots/${A}`),console.log("Snapshot verification successful")}catch(U){if(console.error("Snapshot verification failed:",U),U.message&&U.message.includes("404")){console.error("Snapshot no longer exists on backend:",A),E({x:window.innerWidth/2,y:window.innerHeight/2,text:"Snapshot no longer exists - refreshing list..."}),setTimeout(()=>{E(null),t()},2e3);return}console.warn("Could not verify snapshot existence, proceeding with review request:",U)}try{const U=`/api/snapshots/${A}/reviews`;console.log("Making review request to:",U),console.log("Request data:",{reviewers:C.reviewers,deadline:C.deadline,notes:C.notes}),await R.post(U,{reviewers:C.reviewers,deadline:C.deadline,notes:C.notes}),console.log("Review request successful for snapshot:",A),F(null),t(),E({x:window.innerWidth/2,y:window.innerHeight/2,text:"Review Requested"}),setTimeout(()=>{E(null)},2e3)}catch(U){console.error("Failed to request review for snapshot:",A),console.error("Error details:",U),console.error("Error message:",U.message),console.error("Error response:",U.response);let H="Review Request Failed";U.message&&(U.message.includes("404")?U.message.includes("Snapshot not found")?(console.log("Snapshot not found error detected, refreshing snapshot list"),H="Snapshot no longer exists - refreshing list...",setTimeout(()=>{console.log("Refreshing snapshot list due to 404 error"),t()},1e3)):H="API endpoint not found":U.message.includes("401")?H="Authentication required":U.message.includes("403")?H="Not authorized - you must own this snapshot to request reviews":U.message.includes("500")&&(H="Server error")),E({x:window.innerWidth/2,y:window.innerHeight/2,text:H}),setTimeout(()=>{E(null)},3e3)}},hr=async C=>{if(!ae)return;const O=re.has(C),Y=V.has(C);te(U=>new Set(U).add(C));try{O?Y?(await R.post(`/api/snapshots/${C}/subscribe`,{}),L(U=>{const H=new Set(U);return H.delete(C),H}),Ke(C,"Resumed")):(await R.post(`/api/snapshots/${C}/unsubscribe`,{}),L(U=>new Set(U).add(C)),Ke(C,"Paused")):(await R.post(`/api/snapshots/${C}/subscribe`,{}),_(U=>new Set(U).add(C)),L(U=>{const H=new Set(U);return H.delete(C),H}),Ke(C,"Followed"))}catch(U){console.error("Follow/unfollow error:",U);const H=O?Y?"resume":"pause":"follow";console.error(U.message||`Failed to ${H} snapshot`)}finally{te(U=>{const H=new Set(U);return H.delete(C),H})}},Ke=(C,O)=>{B({snapshotId:C,message:O}),setTimeout(()=>{B(null)},2e3)},Q=C=>{if(!ae)return!1;const O=ae.uid||ae.id;return O?C.ownerUid?C.ownerUid===O:!0:!1},se=C=>new Date(C).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),Pe=C=>{const O=new Date,U=new Date(C).getTime()-O.getTime();return Math.ceil(U/(1e3*60*60*24))},Rn=C=>C<0?"text-gray-500":C<=1?"text-red-600":C<=3?"text-orange-600":C<=7?"text-yellow-600":"text-green-600",We=({field:C})=>a!==C?n.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):c==="asc"?n.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):n.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})});return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),n.jsx("input",{type:"text",value:d,onChange:C=>x(C.target.value),placeholder:"Search snapshots...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:h,onChange:C=>g(C.target.checked),className:"mr-2 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),n.jsx("span",{className:"text-sm text-gray-700",children:"Show expired"})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[ke.length," of ",e.length," snapshots"]})]})]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left",children:n.jsx("input",{type:"checkbox",checked:ke.length>0&&ke.every(C=>r.has(C.id)),onChange:C=>l(C.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>he("name"),children:n.jsxs("div",{className:"flex items-center gap-1",children:["Name",n.jsx(We,{field:"name"})]})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>he("createdAt"),children:n.jsxs("div",{className:"flex items-center gap-1",children:["Created",n.jsx(We,{field:"createdAt"})]})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>he("expiresAt"),children:n.jsxs("div",{className:"flex items-center gap-1",children:["Expires",n.jsx(We,{field:"expiresAt"})]})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>he("viewCount"),children:n.jsxs("div",{className:"flex items-center gap-1",children:["Views",n.jsx(We,{field:"viewCount"})]})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Review"}),n.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ke.map(C=>{var H,be;const O=Pe(C.expiresAt),Y=Rn(O),U=O<0;return n.jsxs("tr",{className:`hover:bg-gray-50 ${U?"opacity-60":""}`,children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("input",{type:"checkbox",checked:r.has(C.id),onChange:()=>s(C.id),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[D===C.id?n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("input",{type:"text",value:q,onChange:Se=>J(Se.target.value),onKeyDown:Se=>_n(Se,C.id),onBlur:()=>Ye(C.id),className:"text-sm font-medium text-gray-900 bg-transparent border-b border-indigo-500 focus:outline-none focus:border-indigo-700",autoFocus:!0})}):n.jsxs("div",{children:[n.jsx("div",{className:`text-sm font-medium text-gray-900 ${Q(C)?"cursor-pointer hover:text-indigo-600":""}`,onClick:()=>fe(C),title:Q(C)?"Click to rename":"",children:C.name||`Snapshot ${C.id.slice(0,8)}`}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["ID: ",C.id]})]}),C.tags&&C.tags.length>0&&n.jsx("div",{className:"flex gap-1 mt-1",children:C.tags.map(Se=>n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:Se},Se))})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:se(C.createdAt)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("div",{className:`text-sm ${Y}`,children:U?"Expired":`${O} days`})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"text-sm text-gray-900 cursor-default",title:"Views - Unique Viewers",children:[C.viewCount||0," - ",C.uniqueViewers||0]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(H=C.review)!=null&&H.isRequested?n.jsx("div",{className:"flex items-center gap-1",children:n.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${C.review.status==="completed"?"bg-green-100 text-green-800":C.review.status==="overdue"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:[C.review.checkedOffCount,"/",C.review.totalReviewers]})}):n.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx("button",{onClick:()=>T(C.id,C.password),className:"text-indigo-600 hover:text-indigo-900",title:"View snapshot",children:n.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),n.jsx("button",{onClick:Se=>ie(C.id,Se,C.password),className:"text-gray-600 hover:text-gray-900",title:"Copy URL",children:N.has(C.id)?n.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),!U&&O<=7&&n.jsx("button",{onClick:Se=>pe(C.id,Se),className:"text-orange-600 hover:text-orange-900",title:"Extend expiration by 7 days",children:y.has(C.id)?n.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),C.password&&n.jsx("button",{onClick:Se=>W(C.id,C.password,Se),className:"text-gray-600 hover:text-gray-900",title:"Copy password",children:f.has(C.id)?n.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})}):n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),Q(C)&&!((be=C.review)!=null&&be.isRequested)&&n.jsx("button",{onClick:()=>F(C.id),className:"text-purple-600 hover:text-purple-900",title:"Request review",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),n.jsx("button",{onClick:()=>b(C.id),className:"text-blue-600 hover:text-blue-900",title:"Change password",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),n.jsx("button",{onClick:()=>hr(C.id),disabled:K.has(C.id),className:`${re.has(C.id)?V.has(C.id)?"text-yellow-600 hover:text-yellow-900":"text-green-600 hover:text-green-900":"text-gray-600 hover:text-gray-900"} ${K.has(C.id)?"opacity-50 cursor-not-allowed":""}`,title:re.has(C.id)?V.has(C.id)?"Resume notifications (currently paused)":"Unfollow notifications (currently active)":"Follow notifications",children:K.has(C.id)?n.jsx("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}):re.has(C.id)?V.has(C.id)?n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})}):n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]})})]},C.id)})})]})}),ke.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 font-inconsolata",children:"No snapshots found"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:d?"Try adjusting your search":"Get started by creating a new snapshot"})]}),P&&n.jsx("div",{className:"fixed z-50 bg-black text-white px-2 py-1 rounded text-sm pointer-events-none",style:{left:P.x+10,top:P.y-30},children:P.text}),z&&n.jsx("div",{className:"fixed top-4 right-4 z-50 bg-green-100 border border-green-200 text-green-800 px-4 py-2 rounded-lg shadow-lg",children:z.message}),u&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-96",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4 font-inconsolata",children:"Change Password"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),n.jsx("div",{className:"p-3 bg-gray-100 rounded border text-sm text-gray-800 font-mono",children:((Wt=e.find(C=>C.id===u))==null?void 0:Wt.password)||"No password set"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),n.jsx("input",{type:"text",id:"newPassword",value:w,onChange:C=>k(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter new password",autoFocus:!0})]}),n.jsxs("div",{className:"flex gap-3 justify-end",children:[n.jsx("button",{onClick:()=>{b(null),k("")},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg",children:"Cancel"}),n.jsx("button",{onClick:()=>Z(u),disabled:!w.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed rounded-lg",children:"Set new password"})]})]})}),A&&n.jsx(Om,{onClose:()=>F(null),onSubmit:mr})]})}function Jf({snapshots:e,onExtend:t}){const r=e.filter(o=>new Date(o.expiresAt)>new Date),s=r.filter(o=>{const d=Math.ceil((new Date(o.expiresAt).getTime()-Date.now())/864e5);return d<=3&&d>0}),l=e.filter(o=>{var d;return((d=o.review)==null?void 0:d.isRequested)&&o.review.status==="pending"}),a=e.filter(o=>{var d;return((d=o.review)==null?void 0:d.isRequested)&&o.review.status==="overdue"}),i=[...e].filter(o=>o.viewCount>0).sort((o,d)=>(d.viewCount||0)-(o.viewCount||0)).slice(0,5),c=[...e].filter(o=>{var d;return((d=o.analytics)==null?void 0:d.recentViewers)&&o.analytics.recentViewers.length>0}).slice(0,5);return n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Review Status"}),n.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})]}),n.jsxs("div",{className:"space-y-2",children:[l.length>0&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Pending Reviews"}),n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:l.length})]}),a.length>0&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Overdue Reviews"}),n.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:a.length})]}),l.length===0&&a.length===0&&n.jsx("p",{className:"text-sm text-gray-500",children:"No pending reviews"}),(l.length>0||a.length>0)&&n.jsx("div",{className:"pt-2 mt-2 border-t border-gray-100",children:[...a,...l].slice(0,3).map(o=>n.jsx(Ue,{to:`/viewer/${o.id}`,target:"_blank",rel:"noopener noreferrer",className:"block py-1 text-sm text-indigo-600 hover:text-indigo-800 truncate",children:o.name||`Snapshot ${o.id.slice(0,8)}`},o.id))})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Expiring Soon"}),n.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),s.length>0?n.jsx("div",{className:"space-y-2",children:s.slice(0,5).map(o=>{const d=Math.ceil((new Date(o.expiresAt).getTime()-Date.now())/864e5);return n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ue,{to:`/viewer/${o.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-700 hover:text-indigo-600 truncate flex-1 mr-2",children:o.name||`Snapshot ${o.id.slice(0,8)}`}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:`text-xs font-medium ${d<=1?"text-red-600":"text-orange-600"}`,children:[d," day",d!==1?"s":""]}),o.viewCount>0&&n.jsx("button",{onClick:()=>t(o.id),className:"text-xs text-indigo-600 hover:text-indigo-800",children:"Extend"})]})]},o.id)})}):n.jsx("p",{className:"text-sm text-gray-500",children:"No snapshots expiring soon"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Most Viewed"}),n.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})]}),i.length>0?n.jsx("div",{className:"space-y-2",children:i.map(o=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ue,{to:`/viewer/${o.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-700 hover:text-indigo-600 truncate flex-1 mr-2",children:o.name||`Snapshot ${o.id.slice(0,8)}`}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),n.jsx("span",{className:"text-xs text-gray-600",children:o.viewCount})]})]},o.id))}):n.jsx("p",{className:"text-sm text-gray-500",children:"No views yet"})]}),n.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl shadow-sm p-4 text-white",children:[n.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Quick Stats"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:r.length}),n.jsx("p",{className:"text-xs opacity-90",children:"Active Snapshots"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:e.reduce((o,d)=>o+(d.viewCount||0),0)}),n.jsx("p",{className:"text-xs opacity-90",children:"Total Views"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:e.reduce((o,d)=>o+(d.commentCount||0),0)}),n.jsx("p",{className:"text-xs opacity-90",children:"Comments"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold",children:e.filter(o=>{var d;return(d=o.review)==null?void 0:d.isRequested}).length}),n.jsx("p",{className:"text-xs opacity-90",children:"Reviews"})]})]})]}),c.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 md:col-span-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Recent Activity"}),n.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),n.jsx("div",{className:"space-y-2",children:c.map(o=>{var d,x,h,g;return n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(Ue,{to:`/viewer/${o.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-700 hover:text-indigo-600 truncate flex-1 mr-2",children:o.name||`Snapshot ${o.id.slice(0,8)}`}),n.jsxs("span",{className:"text-xs text-gray-500",children:[(x=(d=o.analytics)==null?void 0:d.recentViewers)==null?void 0:x.length," recent viewer",((g=(h=o.analytics)==null?void 0:h.recentViewers)==null?void 0:g.length)!==1?"s":""]})]},o.id)})})]})]})}function Zf({selectedSnapshots:e,projects:t,snapshots:r,onClearSelection:s,onRefresh:l}){const[a,i]=p.useState(!1),[c,o]=p.useState(!1),[d,x]=p.useState(!1),[h,g]=p.useState(""),[N,j]=p.useState("");if(e.size===0)return null;const y=e.size===1?r.find(w=>e.has(w.id)):null,S=async()=>{i(!0);try{const w=Array.from(e).map(k=>R.post(`/api/snapshots/${k}/extend`,{days:7}));await Promise.all(w),l(),s()}catch(w){console.error("Failed to extend snapshots:",w),alert("Some snapshots could not be extended")}finally{i(!1)}},f=async()=>{if(h){i(!0);try{const k=(await Promise.allSettled(Array.from(e).map(P=>R.put(`/api/snapshots/${P}`,{projectId:h==="__no_project__"?null:h})))).filter(P=>P.status==="rejected");k.length>0&&(console.error("Failed to move some snapshots:",k),alert(`${k.length} snapshot(s) could not be moved. They may have been deleted or you may not have permission.`)),l(),s(),o(!1)}catch(w){console.error("Failed to move snapshots:",w),alert("Failed to move snapshots")}finally{i(!1)}}},m=async()=>{const w=e.size;if(confirm(`Are you sure you want to delete ${w} snapshot${w!==1?"s":""}? This action cannot be undone.`)){i(!0);try{const k=Array.from(e).map(P=>R.delete(`/api/snapshots/${P}`));await Promise.all(k),l(),s()}catch(k){console.error("Failed to delete snapshots:",k),alert("Some snapshots could not be deleted")}finally{i(!1)}}},u=async()=>{if(!(!y||!N.trim())){i(!0);try{await R.put(`/api/snapshots/${y.id}`,{name:N.trim()}),l(),s(),x(!1),j("")}catch(w){console.error("Failed to rename snapshot:",w),alert("Failed to rename snapshot")}finally{i(!1)}}},b=()=>{y&&(j(y.name||""),x(!0))};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("span",{className:"text-sm text-gray-700",children:[e.size," snapshot",e.size!==1?"s":""," selected"]}),n.jsxs("div",{className:"flex gap-2",children:[e.size===1&&n.jsx("button",{onClick:b,disabled:a,className:"px-3 py-1 text-sm bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50",children:"Rename"}),n.jsx("button",{onClick:()=>o(!0),disabled:a,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:"Move to Project"}),n.jsx("button",{onClick:S,disabled:a,className:"px-3 py-1 text-sm bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:"Extend Expiry"}),n.jsx("button",{onClick:m,disabled:a,className:"px-3 py-1 text-sm bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:"Delete"}),n.jsx("button",{onClick:s,className:"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Cancel"})]})]}),a&&n.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-600",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Processing..."]})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Move to Project"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Move ",e.size," snapshot",e.size!==1?"s":""," to:"]}),n.jsxs("select",{value:h,onChange:w=>g(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 mb-4",children:[n.jsx("option",{value:"",children:"Select project..."}),n.jsx("option",{value:"__no_project__",children:"No Project"}),t.filter(w=>!w.isArchived).map(w=>n.jsx("option",{value:w.id,children:w.name},w.id))]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:f,disabled:!h||a,className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:a?"Moving...":"Move"}),n.jsx("button",{onClick:()=>{o(!1),g("")},className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Cancel"})]})]})}),d&&y&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rename Snapshot"}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['Enter a new name for "',y.name,'":']}),n.jsx("input",{type:"text",value:N,onChange:w=>j(w.target.value),onKeyDown:w=>{w.key==="Enter"&&N.trim()?u():w.key==="Escape"&&(x(!1),j(""))},placeholder:"Snapshot name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-purple-500 mb-4",autoFocus:!0}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:u,disabled:!N.trim()||a,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50",children:a?"Renaming...":"Rename"}),n.jsx("button",{onClick:()=>{x(!1),j("")},className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Cancel"})]})]})})]})}function Wm({snapshots:e,projects:t,onRefresh:r,onExtendSnapshot:s,selectedProjectId:l,onSelectProject:a,showWidgets:i=!0,showExtensionSection:c=!1,user:o,title:d="Dashboard",subtitle:x}){var m,u,b;const[h,g]=p.useState(new Set),N=l?e.filter(w=>w.projectId===l):e,j=w=>{const k=new Set(h);k.has(w)?k.delete(w):k.add(w),g(k)},y=w=>{g(w?new Set(N.map(k=>k.id)):new Set)},S=()=>{g(new Set)},f=x||`${N.length} snapshot${N.length!==1?"s":""}${l&&((m=t.find(w=>w.id===l))==null?void 0:m.description)&&n.jsxs("span",{children:[" • ",(u=t.find(w=>w.id===l))==null?void 0:u.description]})}`;return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 font-inconsolata",children:l?((b=t.find(w=>w.id===l))==null?void 0:b.name)||"Project":d}),n.jsx("p",{className:"text-gray-600",children:f})]})}),!l&&i&&n.jsx(Jf,{snapshots:e,onExtend:s}),n.jsx(Xf,{snapshots:N,onRefresh:r,selectedSnapshots:h,onToggleSelect:j,onSelectAll:y}),n.jsx(Zf,{selectedSnapshots:h,snapshots:N,projects:t,onClearSelection:S,onRefresh:r})]})}function ex(){Pt();const[e,t]=Yf(),{user:r,logout:s,refreshUser:l}=wt(),[a,i]=p.useState([]),[c,o]=p.useState([]),[d,x]=p.useState(),[h,g]=p.useState(!0),[N,j]=p.useState(""),[y,S]=p.useState(""),[f,m]=p.useState(""),[u,b]=p.useState(!1),[w,k]=p.useState(!1),[P,E]=p.useState(!1),[A,F]=p.useState(!1),[D,G]=p.useState(!1),[q,J]=p.useState(!1),[re,_]=p.useState(""),[V,L]=p.useState([]),[z,B]=p.useState(!1),[K,te]=p.useState(""),[ae,he]=p.useState(""),[ke,ie]=p.useState(!1);p.useEffect(()=>{const Q=e.get("trial"),se=e.get("billing"),Pe=e.get("success");(Q==="started"||se==="success"||Pe==="true")&&(console.log("Post-checkout detected, refreshing user data..."),l==null||l(),t({}),Q==="started"?S("Welcome to your Pro trial! You now have access to all Pro features."):(se==="success"||Pe==="true")&&S("Subscription activated! You now have full access to Pro features."),setTimeout(()=>S(""),5e3))},[e,l,t]),p.useEffect(()=>{pe(),T()},[]),p.useEffect(()=>{(async()=>{try{await R.post("/analytics/track",{eventType:"page_view",eventData:{page:"Dashboard"}})}catch(se){console.error("Failed to track page view:",se)}})()},[]);const pe=async()=>{g(!0);try{const[Q,se]=await Promise.all([R.get("/api/snapshots/list"),R.get("/api/projects")]);o(Q.snapshots||[]),i(se.projects||[])}catch(Q){j("Failed to load data"),console.error(Q)}finally{g(!1)}},T=async()=>{const Q=localStorage.getItem("quickstage-downloaded-version");Q&&he(Q);try{const se=await fetch(Et.VERSION_INFO_URL);if(se.ok){const Pe=await se.json();te(Pe.version),ae&&ae!==Pe.version&&ie(!0)}}catch(se){console.error("Failed to check for updates:",se)}},W=async Q=>{try{await R.post(`/api/snapshots/${Q}/extend`),pe(),Z("Snapshot extended successfully")}catch{fe("Failed to extend snapshot")}},Z=Q=>{S(Q),setTimeout(()=>S(""),3e3)},fe=Q=>{m(Q),setTimeout(()=>m(""),3e3)},rt=()=>{const Q=`${window.location.origin}${Et.EXTENSION_DOWNLOAD_URL}`,se=`${window.location.origin}${Et.API_BASE_URL}/extensions/download`;Ye(Q,se),setTimeout(()=>{F(!0)},1e3)},Ye=async(Q,se)=>{try{const Pe=await fetch(Q,{method:"HEAD"});let Rn=Q;!Pe.ok&&se&&(console.warn("Primary download URL failed, using backup"),(await fetch(se,{method:"HEAD"})).ok&&(Rn=se));const We=document.createElement("a");if(We.href=Rn,We.download=`quickstage-${K}.vsix`,document.body.appendChild(We),We.click(),document.body.removeChild(We),K){localStorage.setItem("quickstage-downloaded-version",K),he(K),ie(!1);const Wt=ae&&ae!==K,C=Wt?"extension_upgraded":"extension_downloaded";try{await R.post("/analytics/track",{eventType:C,eventData:{page:"/dashboard",version:K,previousVersion:ae||null,isUpgrade:Wt}})}catch(O){console.error("Failed to track extension download:",O)}}}catch(Pe){console.error("Download failed:",Pe)}},_n=async()=>{try{const Q=await R.get("/tokens/list");L(Q.pats||[]),J(!0)}catch(Q){console.error("Failed to load PATs:",Q),J(!0)}},mr=async()=>{B(!0);try{const Q=await R.post("/tokens/create",{});_(Q.token);const se=await R.get("/tokens/list");L(se.pats||[])}catch(Q){console.error("Failed to generate PAT:",Q)}finally{B(!1)}},hr=async Q=>{try{await R.delete(`/tokens/${Q}`);const se=await R.get("/tokens/list");L(se.pats||[])}catch(se){console.error("Failed to revoke PAT:",se)}},Ke=async Q=>{try{await navigator.clipboard.writeText(Q)}catch(se){console.error("Failed to copy to clipboard:",se)}};return r?n.jsxs("div",{className:"min-h-screen bg-gray-50 font-poppins",children:[n.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ue,{to:"/dashboard",className:"flex items-center",children:n.jsx("span",{className:"text-xl font-share-tech-mono font-bold text-gray-900",children:"QuickStage"})}),n.jsx("button",{onClick:()=>E(!P),className:"ml-4 p-2 rounded-md text-gray-600 hover:bg-gray-100 lg:hidden",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(uo,{}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:"text-sm text-gray-700",children:r.name}),n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:r.subscriptionDisplay||"Free"}),n.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-500",title:"Sign out",children:n.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})]})})}),(y||f)&&n.jsx("div",{className:"fixed top-4 right-4 z-50",children:n.jsx("div",{className:`p-4 rounded-md ${y?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:y||f})}),n.jsxs("div",{className:"flex h-[calc(100vh-4rem)]",children:[n.jsx("div",{className:`${P?"hidden":"block"} lg:block flex-shrink-0`,children:n.jsx(mo,{projects:a,selectedProjectId:d,onSelectProject:x,onRefreshProjects:pe,user:r,isCollapsed:!1,onToggleCollapse:()=>{}})}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:h?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):N?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-red-600 mb-4",children:N}),n.jsx("button",{onClick:pe,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Retry"})]}):n.jsxs(n.Fragment,{children:[!d&&n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-inconsolata",children:"QuickStage Extension"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Download the VS Code/Cursor extension to start staging your projects"})]}),n.jsx("div",{className:"flex items-center space-x-3",children:r!=null&&r.canAccessPro?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:rt,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg",children:"Download Extension"}),n.jsx("button",{onClick:()=>F(!0),className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-lg",children:"Instructions"}),n.jsx("button",{onClick:()=>G(!0),className:"bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-4 rounded-lg",children:"AI Assistant"}),n.jsx("button",{onClick:_n,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-lg",children:"Tokens"})]}):n.jsx("button",{disabled:!0,className:"bg-gray-400 text-white font-medium py-2 px-4 rounded-lg cursor-not-allowed",children:"Go Pro to Download"})})]}),K&&n.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[n.jsxs("span",{children:["Current version: ",K]}),ke&&n.jsx("span",{className:"ml-2 px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs",children:"Update Available"})]})]})}),n.jsx(Wm,{snapshots:c,projects:a,onRefresh:pe,onExtendSnapshot:W,selectedProjectId:d,onSelectProject:x,showWidgets:!d,showExtensionSection:!1,user:r,title:"Dashboard"})]})})})]}),A&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 font-inconsolata",children:"Installation Instructions"}),n.jsx("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Step 1: Install the Extension"}),n.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-sm text-gray-700",children:[n.jsx("li",{children:"Open VS Code or Cursor"}),n.jsx("li",{children:"Press Ctrl+Shift+P (Windows/Linux) or Cmd+Shift+P (Mac)"}),n.jsx("li",{children:'Type "Extensions: Install from VSIX..." and press Enter'}),n.jsxs("li",{children:["Select the downloaded quickstage-",K,".vsix file"]}),n.jsx("li",{children:'Click "Install" when prompted'})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Step 2: Configure Token"}),n.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-sm text-gray-700",children:[n.jsx("li",{children:'Generate a Personal Access Token using the "Tokens" button'}),n.jsx("li",{children:"Copy the generated token (starts with qs_pat_)"}),n.jsx("li",{children:'In VS Code/Cursor, run "QuickStage: Set Token"'}),n.jsx("li",{children:"Paste your token when prompted"})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Step 3: Start Staging"}),n.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-sm text-gray-700",children:[n.jsx("li",{children:"Open your project folder"}),n.jsx("li",{children:'Run "QuickStage: Stage" from the command palette'}),n.jsx("li",{children:"Your project will be built and deployed automatically"})]})]})]}),n.jsx("div",{className:"mt-6 flex justify-end",children:n.jsx("button",{onClick:()=>F(!1),className:"bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg",children:"Got it!"})})]})})}),D&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 font-inconsolata",children:"AI Assistant Instructions"}),n.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-purple-900 mb-2",children:"🎯 How to Use This"}),n.jsx("p",{className:"text-sm text-purple-800",children:"Copy the instructions below and paste them into your AI assistant (ChatGPT, Claude, or Cursor's AI). This gives the AI perfect context to help you build interactive prototypes."})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Copy-Paste Instructions"}),n.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg text-sm",children:n.jsx("div",{className:"whitespace-pre-line",children:`I want to build and deploy an interactive prototype using QuickStage. Here's what I need:

Project Goal: [DESCRIBE YOUR PROTOTYPE]
Target Users: [WHO will use this prototype]
Key Features: [LIST main interactive elements]
Design Preferences: [MENTION design style/framework preferences]

Technical Requirements:
• Web-based prototype that can be built and deployed
• Modern web technologies (React, Vue, Svelte, or vanilla HTML/CSS/JS)
• Build script in package.json for QuickStage compatibility
• Lightweight and fast-loading
• Modern browser compatibility

QuickStage Integration:
• Generate static files that can be served from CDN
• Compatible with QuickStage's build and deployment process
• Include all necessary assets in build output

Expected Output:
• Complete, working web application
• Clear build instructions
• All source code and assets
• Instructions for testing locally

Please create this step by step, ensuring it's production-ready and can be easily built and deployed.`})})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("button",{onClick:()=>Ke(`I want to build and deploy an interactive prototype using QuickStage. Here's what I need:

Project Goal: [DESCRIBE YOUR PROTOTYPE]
Target Users: [WHO will use this prototype]
Key Features: [LIST main interactive elements]
Design Preferences: [MENTION design style/framework preferences]

Technical Requirements:
• Web-based prototype that can be built and deployed
• Modern web technologies (React, Vue, Svelte, or vanilla HTML/CSS/JS)
• Build script in package.json for QuickStage compatibility
• Lightweight and fast-loading
• Modern browser compatibility

QuickStage Integration:
• Generate static files that can be served from CDN
• Compatible with QuickStage's build and deployment process
• Include all necessary assets in build output

Expected Output:
• Complete, working web application
• Clear build instructions
• All source code and assets
• Instructions for testing locally

Please create this step by step, ensuring it's production-ready and can be easily built and deployed.`),className:"bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-4 rounded-lg",children:"Copy Instructions"}),n.jsx("button",{onClick:()=>G(!1),className:"bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg",children:"Got it!"})]})]})]})})}),q&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:n.jsxs("div",{className:"mt-3",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 font-inconsolata",children:"Personal Access Tokens"}),n.jsx("button",{onClick:()=>{J(!1),_("")},className:"text-gray-400 hover:text-gray-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"🔑 How to Use PATs"}),n.jsx("p",{className:"text-sm text-blue-800",children:"Generate a Personal Access Token and use it in your VS Code/Cursor extension. This authenticates your extension with QuickStage permanently."})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Generate New Token"}),n.jsx("button",{onClick:mr,disabled:z,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-medium py-2 px-4 rounded-lg",children:z?"Generating...":"Generate New Token"})]}),re&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"New Token Generated"}),n.jsx("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg font-mono text-sm break-all",children:re}),n.jsx("p",{className:"text-sm text-red-600 mt-2",children:"⚠️ Copy this token now! It won't be shown again."}),n.jsx("button",{onClick:()=>Ke(re),className:"mt-2 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg",children:"Copy Token"})]}),V.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Existing Tokens"}),n.jsx("div",{className:"space-y-3",children:V.map(Q=>n.jsx("div",{className:"border rounded-lg p-3 bg-gray-50",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:Q.description}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(Q.createdAt).toLocaleDateString()]}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Expires: ",new Date(Q.expiresAt).toLocaleDateString()]}),Q.lastUsed&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Last used: ",new Date(Q.lastUsed).toLocaleDateString()]})]}),n.jsx("button",{onClick:()=>hr(Q.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Revoke"})]})},Q.id))})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:()=>{J(!1),_("")},className:"bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg",children:"Close"})})]})]})})})]}):n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})})}function Vm(){const e=Pt(),[t,r]=p.useState([]),[s,l]=p.useState(),[a,i]=p.useState(!1),c=async()=>{try{const x=await R.get("/api/projects");r(x.projects||[])}catch(x){console.error("Failed to load projects:",x)}},o=x=>{l(x),e("/dashboard")},d=()=>{i(!a)};return p.useEffect(()=>{c()},[]),{projects:t,selectedProjectId:s,isSidebarCollapsed:a,loadProjects:c,handleSelectProject:o,handleToggleSidebar:d,setSelectedProjectId:l}}function tx({className:e=""}){const[t,r]=p.useState([]),[s,l]=p.useState(!0),[a,i]=p.useState(null),c=async()=>{try{l(!0),i(null);const h=await R.get("/api/subscriptions");r(h.subscriptions||[])}catch(h){console.error("Failed to load subscriptions:",h),i("Failed to load subscriptions")}finally{l(!1)}};p.useEffect(()=>{c()},[]);const o=async h=>{try{await R.delete(`/api/subscriptions/${h}`),r(g=>g.filter(N=>N.id!==h));try{await R.post("/analytics/track",{eventType:"comment_subscription_removed",eventData:{subscriptionId:h,method:"settings_page"}})}catch(g){console.error("Failed to track unsubscription analytics:",g)}}catch(g){console.error("Failed to unsubscribe:",g),alert("Failed to unsubscribe. Please try again.")}},d=async(h,g)=>{try{await R.patch(`/api/subscriptions/${h}`,{isActive:!g}),r(N=>N.map(j=>j.id===h?{...j,isActive:!g}:j));try{await R.post("/analytics/track",{eventType:g?"comment_subscription_paused":"comment_subscription_activated",eventData:{subscriptionId:h,method:"settings_page",newState:g?"paused":"active"}})}catch(N){console.error("Failed to track subscription toggle analytics:",N)}}catch(N){console.error("Failed to toggle subscription:",N),alert("Failed to update subscription. Please try again.")}},x=h=>new Date(h).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return s?n.jsx("div",{className:`bg-white rounded-lg shadow p-6 ${e}`,children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),n.jsx("div",{className:"space-y-3",children:[...Array(3)].map((h,g)=>n.jsx("div",{className:"h-16 bg-gray-100 rounded"},g))})]})}):a?n.jsx("div",{className:`bg-white rounded-lg shadow p-6 ${e}`,children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx("svg",{className:"w-12 h-12 mx-auto text-red-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),n.jsx("p",{className:"text-red-600 font-medium",children:a}),n.jsx("button",{onClick:c,className:"mt-4 px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:"Try Again"})]})}):n.jsxs("div",{className:`bg-white rounded-lg shadow ${e}`,children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Comment Subscriptions"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage your subscriptions to comment threads and snapshots"})]}),n.jsx("div",{className:"flex items-center space-x-2",children:n.jsxs("span",{className:"text-sm text-gray-500",children:[t.length," subscription",t.length!==1?"s":""]})})]})}),n.jsx("div",{className:"divide-y divide-gray-200",children:t.length===0?n.jsxs("div",{className:"px-6 py-12 text-center",children:[n.jsx("svg",{className:"w-12 h-12 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-3.405-3.405A9.048 9.048 0 0118 9a9 9 0 10-18 0 9.048 9.048 0 001.405 4.595L2 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subscriptions yet"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"You're not following any comment conversations. Start a conversation or follow existing ones to get notifications."}),n.jsx(Ue,{to:"/dashboard",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Browse Snapshots"})]}):t.map(h=>n.jsx("div",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:h.snapshotName||`Snapshot ${h.snapshotId}`}),n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${h.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.isActive?"Active":"Paused"})]}),h.commentPreview&&n.jsxs("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:['"',h.commentPreview,'"']}),n.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[n.jsxs("span",{children:["Subscribed ",x(h.createdAt)]}),h.lastNotified&&n.jsxs("span",{children:["Last notification ",x(h.lastNotified)]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[n.jsx("button",{onClick:()=>d(h.id,h.isActive),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${h.isActive?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,title:h.isActive?"Pause notifications":"Resume notifications",children:h.isActive?"Pause":"Resume"}),n.jsx(Ue,{to:`/viewer/${h.snapshotId}`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 text-xs font-medium text-blue-700 bg-blue-100 hover:bg-blue-200 rounded-md transition-colors",title:"View snapshot",children:"View"}),n.jsx("button",{onClick:()=>o(h.id),className:"px-3 py-1.5 text-xs font-medium text-red-700 bg-red-100 hover:bg-red-200 rounded-md transition-colors",title:"Unsubscribe from this conversation",children:"Unsubscribe"})]})]})},h.id))}),t.length>0&&n.jsx("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200 rounded-b-lg",children:n.jsx("p",{className:"text-xs text-gray-600",children:"You'll receive email notifications when new comments are added to conversations you're following. You can pause or unsubscribe from individual conversations at any time."})})]})}function nx(){var A,F,D,G,q,J,re,_,V,L;const e=Pt(),{user:t,logout:r,loading:s,cancelSubscription:l}=wt(),[a,i]=p.useState(!1),[c,o]=p.useState(null),[d,x]=p.useState(null),[h,g]=p.useState(!1),{projects:N,selectedProjectId:j,handleSelectProject:y,loadProjects:S,isSidebarCollapsed:f,handleToggleSidebar:m}=Vm();p.useEffect(()=>{console.log("Settings - Current user object:",t),console.log("Settings - User subscription details:",{plan:t==null?void 0:t.plan,subscriptionStatus:t==null?void 0:t.subscriptionStatus,subscriptionDisplay:t==null?void 0:t.subscriptionDisplay,canAccessPro:t==null?void 0:t.canAccessPro,role:t==null?void 0:t.role})},[t]),p.useEffect(()=>{(async()=>{try{await R.post("/analytics/track",{eventType:"page_view",eventData:{page:"Settings"}})}catch(B){console.error("Failed to track page view:",B)}})()},[]);const u=()=>{var B;const z=(((B=t==null?void 0:t.subscription)==null?void 0:B.status)||(t==null?void 0:t.subscriptionStatus))==="trial"?"upgrade":"trial";e(`/pricing?mode=${z}`)},b=async()=>{try{o(null);const z=await R.post("/billing/portal");z.url?window.location.href=z.url:o("No billing portal URL received")}catch(z){console.error("Billing portal error:",z),o("Failed to open billing portal")}},w=async()=>{try{o(null);const z=await R.post("/billing/change-payment");z.url?window.location.href=z.url:o("No payment update URL received")}catch(z){console.error("Payment method update error:",z),o("Failed to update payment method")}},k=async()=>{if(confirm("Are you sure you want to cancel your Pro subscription? You will retain access until the end of your current billing period."))try{o(null);const z=await l();z.ok?(x(z.message||"Subscription cancelled successfully"),setTimeout(()=>x(null),5e3)):o(z.error||"Failed to cancel subscription")}catch(z){console.error("Cancel subscription error:",z),o("Failed to cancel subscription")}},P=()=>{r()},E=async()=>{if(!confirm(`⚠️  DANGER: Are you absolutely sure you want to PERMANENTLY DELETE your account "${(t==null?void 0:t.name)||(t==null?void 0:t.email)}"?

This will:
• Remove all your data from the system
• Delete all your snapshots
• Delete all your PATs
• Delete all your comments
• This action CANNOT be undone!

Type "DELETE" to confirm:`))return;if(prompt('Type "DELETE" to confirm permanent deletion:')!=="DELETE"){alert("Deletion cancelled. Your data is safe.");return}try{o(null),await $m.deleteUser(t.uid),x("Your account has been completely deleted from the system. You will be redirected to the login page."),setTimeout(()=>{r(),window.location.href="/login"},3e3)}catch(B){o(B.message||"Failed to delete account")}};return s?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center font-poppins",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading settings..."})]})}):t?n.jsxs("div",{className:"min-h-screen bg-gray-50 font-poppins",children:[n.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ue,{to:"/dashboard",className:"flex items-center",children:n.jsx("span",{className:"text-xl font-share-tech-mono font-bold text-gray-900",children:"QuickStage"})}),n.jsx("button",{onClick:()=>g(!h),className:"ml-4 p-2 rounded-md text-gray-600 hover:bg-gray-100 lg:hidden",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(uo,{}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:"text-sm text-gray-700",children:t.name}),n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t.subscriptionDisplay||"Free"}),n.jsx("button",{onClick:P,className:"text-gray-400 hover:text-gray-500",title:"Sign out",children:n.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})]})})}),n.jsxs("div",{className:"flex h-[calc(100vh-4rem)]",children:[n.jsx("div",{className:`${h?"block":"hidden"} lg:block flex-shrink-0`,children:n.jsx(mo,{projects:N,selectedProjectId:j,onSelectProject:y,onRefreshProjects:S,user:t,isCollapsed:f,onToggleCollapse:m})}),n.jsx("main",{className:"flex-1 overflow-auto",children:n.jsxs("div",{className:"max-w-4xl mx-auto py-4 sm:py-6 px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"mb-6 sm:mb-8",children:[n.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 font-inconsolata",children:"Account Settings"}),n.jsx("p",{className:"mt-2 text-sm sm:text-base text-gray-600",children:"Manage your account, plan, and preferences."})]}),c&&n.jsx("div",{className:"px-4 sm:px-0 mb-6",children:n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:c})}),d&&n.jsx("div",{className:"px-4 sm:px-0 mb-4",children:n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),n.jsx("div",{className:"ml-3",children:n.jsx("p",{className:"text-sm text-green-800",children:d})})]})})}),n.jsx("div",{className:"mb-6 sm:mb-8",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 sm:p-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center mb-4 sm:mb-6 space-y-3 sm:space-y-0",children:[n.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center mr-0 sm:mr-4 flex-shrink-0",children:n.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),n.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 font-inconsolata",children:"Account Information"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),n.jsx("div",{className:"bg-gray-50 rounded-lg px-4 py-3",children:n.jsx("p",{className:"text-gray-900",children:t.name||"Not provided"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email Address"}),n.jsx("div",{className:"bg-gray-50 rounded-lg px-4 py-3",children:n.jsx("p",{className:"text-gray-900",children:t.email})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"User ID"}),n.jsx("div",{className:"bg-gray-50 rounded-lg px-4 py-3",children:n.jsx("p",{className:"text-gray-900",children:t.uid})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Staging Since"}),n.jsx("div",{className:"bg-gray-50 rounded-lg px-4 py-3",children:n.jsx("p",{className:"text-gray-900",children:new Date(t.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Current Plan"}),n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg px-4 py-3 border border-blue-100",children:n.jsx("p",{className:"text-blue-900 font-semibold",children:t.subscriptionDisplay||"Free"})})]}),((((A=t.subscription)==null?void 0:A.status)||t.subscriptionStatus)==="active"||(((F=t.subscription)==null?void 0:F.status)||t.subscriptionStatus)==="trial")&&t.nextBillingDate&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Next Billing"}),n.jsxs("div",{className:"bg-green-50 rounded-lg px-4 py-3 border border-green-100",children:[n.jsx("p",{className:"text-green-900 font-medium",children:new Date(t.nextBillingDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),t.nextBillingAmount!==null&&t.nextBillingAmount!==void 0&&n.jsxs("p",{className:"text-green-700 text-sm mt-1",children:["Amount: ",t.nextBillingAmount===0?"Free":`$${(t.nextBillingAmount/100).toFixed(2)}`]})]})]})]})]})}),n.jsx("div",{className:"mb-6 sm:mb-8",children:n.jsxs("div",{className:"bg-white rounded-lg shadow p-4 sm:p-6",children:[n.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-3 sm:mb-4 font-inconsolata",children:"Plan Management"}),t.role==="superadmin"?n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-purple-600 font-medium mb-2",children:"✓ Pro (Superadmin) - Permanent Access"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"As a superadmin, you have permanent access to all Pro features without any subscription requirements."})]}),n.jsx("div",{className:"text-sm text-gray-500",children:"No billing management needed - your access is permanent."})]}):!((D=t.subscription)!=null&&D.status||t.subscriptionStatus)||(((G=t.subscription)==null?void 0:G.status)||t.subscriptionStatus)==="none"?n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 mb-4",children:"Upgrade to Pro for unlimited snapshots, larger file sizes, and extended expiry times."}),n.jsx("button",{onClick:u,disabled:a,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:a?"Processing...":"Upgrade to Pro"})]}):(((q=t.subscription)==null?void 0:q.status)||t.subscriptionStatus)==="trial"?n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-blue-600 font-medium mb-2",children:"✓ Pro (Trial) - Active"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"You're currently on a 7-day free trial of the Pro plan. Enjoy unlimited snapshots, 100MB per snapshot, and up to 90-day expiry times."}),(((J=t.subscription)==null?void 0:J.trialEnd)||t.trialEndsAt)&&n.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Trial ends: ",new Date(((re=t.subscription)==null?void 0:re.trialEnd)||t.trialEndsAt).toLocaleDateString()]}),t.nextBillingDate&&n.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:[n.jsxs("p",{children:["Next billing: ",new Date(t.nextBillingDate).toLocaleDateString()]}),t.nextBillingAmount!==null&&t.nextBillingAmount!==void 0&&n.jsxs("p",{children:["Amount: ",t.nextBillingAmount===0?"Free":`$${(t.nextBillingAmount/100).toFixed(2)}`]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:w,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Change Payment Method"}),n.jsx("button",{onClick:k,className:"bg-gray-300 hover:bg-gray-400 text-gray-900 font-medium py-2 px-4 rounded-lg transition-colors",children:"Cancel Subscription"})]})]}):(((_=t.subscription)==null?void 0:_.status)||t.subscriptionStatus)==="active"?n.jsxs("div",{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-green-600 font-medium mb-2",children:"✓ Pro - Active Subscription"}),n.jsx("p",{className:"text-gray-600 text-sm",children:"You have full access to all Pro features: unlimited snapshots, 100MB per snapshot, and up to 90-day expiry times."}),t.nextBillingDate&&n.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:[n.jsxs("p",{children:["Next billing: ",new Date(t.nextBillingDate).toLocaleDateString()]}),t.nextBillingAmount!==null&&t.nextBillingAmount!==void 0&&n.jsxs("p",{children:["Amount: ",t.nextBillingAmount===0?"Free":`$${(t.nextBillingAmount/100).toFixed(2)}`]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:w,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Change Payment Method"}),n.jsx("button",{onClick:k,className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Cancel Subscription"})]})]}):(((V=t.subscription)==null?void 0:V.status)||t.subscriptionStatus)==="cancelled"?n.jsxs("div",{children:[n.jsx("p",{className:"text-orange-600 font-medium mb-2",children:"⚠️ Pro (Cancelled)"}),n.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Your subscription has been cancelled. You will retain access to Pro features until the end of your current billing period."}),n.jsx("button",{onClick:u,disabled:a,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:a?"Processing...":"Reactivate Pro"})]}):(((L=t.subscription)==null?void 0:L.status)||t.subscriptionStatus)==="past_due"?n.jsxs("div",{children:[n.jsx("p",{className:"text-red-600 font-medium mb-2",children:"⚠️ Pro (Payment Past Due)"}),n.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Your subscription payment is past due. Please update your payment method to continue access to Pro features."}),n.jsx("button",{onClick:b,className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Update Payment Method"})]}):n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-600 mb-4",children:"Upgrade to Pro for unlimited snapshots, larger file sizes, and extended expiry times."}),n.jsx("button",{onClick:u,disabled:a,className:"bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:a?"Processing...":"Upgrade to Pro"})]})]})}),n.jsx("div",{className:"mb-6 sm:mb-8",children:n.jsx(tx,{className:"w-full"})}),n.jsx("div",{className:"mb-6 sm:mb-8",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 sm:p-8",children:[n.jsx("div",{className:"flex items-center mb-4 sm:mb-6",children:n.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 font-inconsolata",children:"Account Actions"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[n.jsxs("button",{onClick:P,className:"bg-gray-300 hover:bg-gray-400 text-gray-900 font-medium py-3 px-6 rounded-lg transition-colors shadow-md flex items-center justify-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]}),n.jsxs("button",{onClick:E,className:"bg-gray-300 hover:bg-gray-400 text-gray-900 font-medium py-3 px-6 rounded-lg transition-colors shadow-md flex items-center justify-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Account"]})]})]})})]})})]})]}):n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center font-poppins",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4 font-inconsolata",children:"Authentication Required"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"You need to be logged in to access your account settings."}),n.jsx(Ue,{to:"/login",className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Go to Login"})]})})}function ud({snapshotId:e,isVisible:t,onClose:r,className:s=""}){const[l,a]=p.useState([]),[i,c]=p.useState(""),[o,d]=p.useState(!1),[x,h]=p.useState(!1),[g,N]=p.useState(!1),[j,y]=p.useState(null),[S,f]=p.useState(0),m=p.useRef(null),u=p.useRef(null),b=()=>{m.current&&typeof m.current.scrollIntoView=="function"&&m.current.scrollIntoView({behavior:"smooth"})};p.useEffect(()=>{b()},[l]),p.useEffect(()=>{t&&!g&&w()},[t,e]);const w=async()=>{var D,G;try{const q=await R.get(`/api/snapshots/${e}/ai-chat`);(D=q==null?void 0:q.data)!=null&&D.success&&((G=q.data.data)!=null&&G.exists)&&(a(q.data.data.messages.map(J=>({...J,timestamp:Date.now()}))),N(!0))}catch(q){console.error("Failed to load conversation:",q)}},k=()=>{f(D=>D+1),y(null),P()},P=async()=>{var D,G,q,J,re;h(!0),y(null);try{await new Promise(V=>setTimeout(V,100));const _=await R.post(`/api/snapshots/${e}/ai-chat/start`);if(_.data.success){const V=_.data.data.messages.map(L=>({...L,timestamp:Date.now()}));a(V),N(!0)}else y(_.data.error||"Failed to start AI analysis")}catch(_){console.error("Failed to start conversation:",_),((D=_.response)==null?void 0:D.status)===429?y("Rate limit exceeded. Please try again in an hour."):((G=_.response)==null?void 0:G.status)===503?y("AI service is temporarily unavailable. Please try again later."):(q=_.message)!=null&&q.includes("MutationObserver")?y("Browser compatibility issue detected. Please refresh the page and try again."):(J=_.message)!=null&&J.includes("iframe")||(re=_.message)!=null&&re.includes("contentDocument")?y("Unable to access snapshot content. Please ensure the snapshot is fully loaded."):y("Failed to connect to AI service. Please try again.")}finally{h(!1)}},E=async()=>{var q,J,re,_,V;if(!i.trim()||o)return;const D={role:"user",content:i.trim(),timestamp:Date.now()};a(L=>[...L,D]);const G=i.trim();c(""),d(!0),y(null);try{const L=await R.post(`/api/snapshots/${e}/ai-chat/message`,{message:G});if(L.data.success){const z={role:"assistant",content:L.data.data.response,timestamp:Date.now()};a(B=>[...B,z])}else y(L.data.error||"Failed to get AI response")}catch(L){console.error("Failed to send message:",L),((q=L.response)==null?void 0:q.status)===429?y("Rate limit exceeded. Please try again in an hour."):((J=L.response)==null?void 0:J.status)===503?y("AI service is temporarily unavailable. Please try again later."):(re=L.message)!=null&&re.includes("MutationObserver")?y("Browser compatibility issue detected. Please refresh the page and try again."):(_=L.message)!=null&&_.includes("iframe")||(V=L.message)!=null&&V.includes("contentDocument")?y("Unable to access snapshot content. Please ensure the snapshot is fully loaded."):y("Failed to send message. Please try again.")}finally{d(!1)}},A=D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),E())},F=D=>D.split(`
`).map((G,q)=>G.startsWith("**")&&G.endsWith("**")?n.jsx("div",{className:"font-semibold text-gray-900 mt-3 mb-1",children:G.slice(2,-2)},q):G.startsWith("- ")?n.jsxs("div",{className:"ml-4 mb-1",children:["• ",G.slice(2)]},q):G.trim()===""?n.jsx("div",{className:"h-2"},q):n.jsx("div",{className:"mb-1",children:G},q));return t?n.jsxs("div",{className:`fixed right-0 top-0 h-full w-96 bg-white shadow-2xl z-50 flex flex-col ${s}`,children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-blue-50",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-inconsolata",children:"🤖 AI UX Assistant"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Get expert UI/UX feedback and suggestions"})]}),n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 text-lg font-bold","aria-label":"Close panel",children:"×"})]}),g?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[l.map((D,G)=>n.jsx("div",{className:`flex ${D.role==="user"?"justify-end":"justify-start"}`,children:n.jsx("div",{className:`max-w-[80%] p-3 rounded-lg ${D.role==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:D.role==="assistant"?n.jsx("div",{className:"text-sm leading-relaxed",children:F(D.content)}):n.jsx("div",{className:"text-sm",children:D.content})})},G)),o&&n.jsx("div",{className:"flex justify-start",children:n.jsx("div",{className:"bg-gray-100 text-gray-900 p-3 rounded-lg",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-400"}),n.jsx("span",{className:"text-sm",children:"AI is thinking..."})]})})}),n.jsx("div",{ref:m})]}),j&&n.jsxs("div",{className:"mx-4 mb-2 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:[n.jsx("div",{className:"mb-2",children:j}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{y(null),f(0)},className:"px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",children:"Dismiss"}),j.includes("MutationObserver")||j.includes("iframe")?n.jsx("button",{onClick:()=>window.location.reload(),className:"px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",children:"Refresh Page"}):null]})]}),n.jsxs("div",{className:"border-t border-gray-200 p-4",children:[n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("textarea",{ref:u,value:i,onChange:D=>c(D.target.value),onKeyPress:A,placeholder:"Ask about accessibility, mobile design, user flow...",className:"flex-1 resize-none border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2,disabled:o,maxLength:1e3}),n.jsx("button",{onClick:E,disabled:!i.trim()||o,className:"self-end bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]}),n.jsxs("div",{className:"mt-2 flex justify-between text-xs text-gray-500",children:[n.jsx("span",{children:"Press Enter to send, Shift+Enter for new line"}),n.jsxs("span",{children:[i.length,"/1000"]})]})]})]}):n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 text-center",children:[n.jsx("div",{className:"text-6xl mb-4",children:"🎨"}),n.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-4",children:"AI-Powered UX Analysis"}),n.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"Get instant feedback on your prototype's user experience, accessibility, design patterns, and modern UI best practices. Ask questions and get specific suggestions for improvement."}),n.jsxs("div",{className:"w-full space-y-3 mb-6 text-sm text-gray-500",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Accessibility & WCAG compliance"]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Mobile responsiveness analysis"]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Visual hierarchy & typography"]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),"Interactive Q&A with AI expert"]})]}),n.jsx("button",{onClick:P,disabled:x,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium",children:x?n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Analyzing your prototype..."]}):"🚀 Start AI Analysis"}),j&&n.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:[n.jsx("div",{className:"mb-2",children:j}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:k,className:"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",children:["Try Again ",S>0&&`(${S})`]}),S>2&&n.jsx("button",{onClick:()=>{f(0),y(null)},className:"px-3 py-1 bg-gray-600 text-white text-xs rounded hover:bg-gray-700 transition-colors",children:"Reset"})]})]})]})]}):null}function rx({review:e,isOwner:t,onCancel:r,onSubmitFeedback:s}){const[l,a]=p.useState(!1),[i,c]=p.useState(""),[o,d]=p.useState(!1),x=y=>{switch(y){case"pending":return"bg-gray-100 text-gray-800";case"in_progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},h=y=>{switch(y){case"pending":return"text-gray-600";case"reviewing":return"text-blue-600";case"approved":return"text-green-600";case"changes_requested":return"text-orange-600";default:return"text-gray-600"}},g=async y=>{if(!i.trim()){alert("Please provide feedback before submitting");return}d(!0);try{await s(i,y),a(!1),c("")}catch(S){console.error("Failed to submit feedback:",S)}finally{d(!1)}},N=y=>new Date(y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),j=e.deadline&&Date.now()>e.deadline;return n.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x(e.status)}`,children:e.status.replace("_"," ").toUpperCase()}),j&&n.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"OVERDUE"})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Requested ",N(e.requestedAt),e.deadline&&n.jsxs("span",{className:"ml-2",children:["• Due ",N(e.deadline)]})]}),e.notes&&n.jsxs("p",{className:"text-sm text-gray-700 mt-2 italic",children:['"',e.notes,'"']})]}),t&&e.status!=="completed"&&n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-red-600 ml-4",title:"Cancel review",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("h4",{className:"text-sm font-medium text-gray-900",children:["Reviewers (",e.reviewers.length,")"]}),e.reviewers.map(y=>n.jsxs("div",{className:"flex items-start justify-between bg-gray-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("p",{className:"font-medium text-gray-900",children:y.userName}),n.jsx("span",{className:`text-xs font-medium ${h(y.status)}`,children:y.status.replace("_"," ").toUpperCase()})]}),n.jsx("p",{className:"text-sm text-gray-600",children:y.userEmail}),y.feedback&&n.jsxs("div",{className:"mt-2 p-2 bg-white rounded border border-gray-200",children:[n.jsx("p",{className:"text-sm text-gray-700",children:y.feedback}),y.reviewedAt&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Reviewed ",N(y.reviewedAt)]})]})]}),y.status==="pending"&&!t&&n.jsx("button",{onClick:()=>a(!l),className:"ml-3 px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Review"})]},y.userId))]}),l&&n.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:"Submit Your Review"}),n.jsx("textarea",{value:i,onChange:y=>c(y.target.value),placeholder:"Provide your feedback on this design...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.jsxs("div",{className:"flex justify-end gap-3 mt-3",children:[n.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",disabled:o,children:"Cancel"}),n.jsx("button",{onClick:()=>g("changes_requested"),disabled:o||!i.trim(),className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50",children:"Request Changes"}),n.jsx("button",{onClick:()=>g("approved"),disabled:o||!i.trim(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:"Approve"})]})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[n.jsx("span",{children:"Progress"}),n.jsxs("span",{children:[e.reviewers.filter(y=>y.status==="approved"||y.status==="changes_requested").length," / ",e.reviewers.length," completed"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.reviewers.filter(y=>y.status==="approved"||y.status==="changes_requested").length/e.reviewers.length*100}%`}})})]})]})}function md({snapshotId:e,isOwner:t,onReviewUpdate:r}){const[s,l]=p.useState([]),[a,i]=p.useState(!1),[c,o]=p.useState(!1),[d,x]=p.useState(null),h=async()=>{try{i(!0);const S=(await R.get(`/api/snapshots/${e}/reviews`)).reviews||[];l(S),r&&r(S)}catch(y){console.error("Failed to load reviews:",y),x("Failed to load reviews")}finally{i(!1)}},g=async y=>{try{await R.post(`/api/snapshots/${e}/reviews`,{reviewers:y.reviewers,deadline:y.deadline,notes:y.notes});try{await R.post("/analytics/track",{eventType:"review_requested",eventData:{snapshotId:e,reviewerCount:y.reviewers.length,hasDeadline:!!y.deadline,hasNotes:!!y.notes,deadlineInDays:y.deadline?Math.ceil((new Date(y.deadline).getTime()-Date.now())/(1e3*60*60*24)):null}})}catch(S){console.error("Failed to track review creation analytics:",S)}o(!1),await h()}catch(S){console.error("Failed to create review:",S),x("Failed to create review")}},N=async y=>{if(confirm("Are you sure you want to cancel this review?"))try{await R.delete(`/api/reviews/${y}`),await h();try{await R.post("/analytics/track",{eventType:"review_cancelled",eventData:{snapshotId:e,reviewId:y}})}catch(S){console.error("Failed to track review cancellation analytics:",S)}}catch(S){console.error("Failed to cancel review:",S),x("Failed to cancel review")}},j=async(y,S,f)=>{try{await R.post(`/api/reviews/${y}/submit`,{feedback:S,status:f}),await h();try{await R.post("/analytics/track",{eventType:f==="approved"?"review_approved":"review_rejected",eventData:{snapshotId:e,reviewId:y,feedbackLength:S.length,hasFeedback:S.length>0}})}catch(m){console.error("Failed to track review submission analytics:",m)}}catch(m){console.error("Failed to submit review:",m),x("Failed to submit review")}};return p.useEffect(()=>{h()},[e]),a&&s.length===0?n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"text-center text-gray-500 mt-4",children:"Loading reviews..."})]}):n.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Reviews"}),t&&n.jsx("button",{onClick:()=>o(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Request Review"})]}),d&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[n.jsx("p",{className:"text-red-600 text-sm",children:d}),n.jsx("button",{onClick:()=>x(null),className:"text-red-500 hover:text-red-700 text-sm underline ml-2",children:"Dismiss"})]}),s.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"text-gray-400 mb-4",children:n.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsx("p",{className:"text-gray-500 text-lg",children:"No reviews yet"}),n.jsx("p",{className:"text-gray-400 text-sm mt-1",children:t?"Request feedback from your team":"The owner hasn't requested any reviews"})]}):n.jsx("div",{className:"space-y-4",children:s.map(y=>n.jsx(rx,{review:y,isOwner:t,onCancel:()=>N(y.id),onSubmitFeedback:(S,f)=>j(y.id,S,f)},y.id))}),c&&n.jsx(Om,{onClose:()=>o(!1),onSubmit:g})]})}function Hm({comment:e,replies:t,depth:r,onReply:s,onResolve:l,onArchive:a,onDelete:i,onUpdate:c,showActions:o=!0,maxDepth:d=5,isOwner:x,currentUserId:h}){var pe;const[g,N]=p.useState(!1),[j,y]=p.useState(!1),[S,f]=p.useState(""),[m,u]=p.useState(e.text||""),[b,w]=p.useState(r<3),[k,P]=p.useState([]),[E,A]=p.useState(!1),[F,D]=p.useState(!1),G=p.useRef(null),q=p.useRef(null),J=p.useRef(null);p.useEffect(()=>{q.current&&(q.current.style.height="auto",q.current.style.height=q.current.scrollHeight+"px")},[S]),p.useEffect(()=>{const T=W=>{J.current&&!J.current.contains(W.target)&&D(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]);const re=async()=>{if(!(!S.trim()||E)){A(!0);try{await s(e.id,S.trim(),k.length>0?k:void 0),f(""),P([]),N(!1)}catch(T){console.error("Failed to reply:",T),alert("Failed to post reply. Please try again.")}finally{A(!1)}}},_=async()=>{if(!(!m.trim()||E)){A(!0);try{await c(e.id,m.trim()),y(!1)}catch(T){console.error("Failed to update comment:",T),alert("Failed to update comment. Please try again.")}finally{A(!1)}}},V=T=>{const W=Array.from(T.target.files||[]);W.length>0&&P(Z=>[...Z,...W])},L=T=>{P(W=>W.filter((Z,fe)=>fe!==T))},z=T=>{const Z=Date.now()-T,fe=Math.floor(Z/(1e3*60)),rt=Math.floor(Z/(1e3*60*60)),Ye=Math.floor(Z/(1e3*60*60*24));return fe<1?"Just now":fe<60?`${fe}m ago`:rt<24?`${rt}h ago`:Ye<7?`${Ye}d ago`:new Date(T).toLocaleDateString()},B=T=>{switch(T){case"resolved":return"text-green-700 bg-green-100 border-green-200";case"archived":return"text-gray-700 bg-gray-100 border-gray-200";case"draft":return"text-yellow-700 bg-yellow-100 border-yellow-200";default:return"text-blue-700 bg-blue-100 border-blue-200"}},K=T=>{switch(T){case"resolved":return n.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})});case"archived":return n.jsxs("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:[n.jsx("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"}),n.jsx("path",{fillRule:"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z",clipRule:"evenodd"})]});case"draft":return n.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h4a1 1 0 010 2H6.414l2.293 2.293a1 1 0 01-1.414 1.414L5 6.414V8a1 1 0 01-2 0V4z",clipRule:"evenodd"})});default:return n.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})})}},te=h&&(e.author===h||x),ae=x,he=e.text||"",ke=e.authorName||"Anonymous",ie=e.state||"published";return n.jsxs("div",{className:`comment-item relative ${r>0?"ml-6":""}`,children:[r>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"absolute -left-6 top-0 w-px bg-gray-300 h-full"}),n.jsx("div",{className:"absolute -left-6 top-4 w-4 h-px bg-gray-300"})]}),n.jsxs("div",{className:`bg-white border rounded-lg p-4 mb-3 shadow-sm hover:shadow-md transition-all duration-200 ${ie==="resolved"?"opacity-75 bg-gray-50":""} ${ie==="archived"?"opacity-50 bg-gray-50":""}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center space-x-2 flex-1",children:[n.jsx("div",{className:"w-7 h-7 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xs font-medium flex-shrink-0",children:((pe=ke.charAt(0))==null?void 0:pe.toUpperCase())||"U"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:ke}),n.jsx("p",{className:"text-xs text-gray-500 flex-shrink-0",children:z(e.createdAt||0)}),n.jsxs("div",{className:`px-2 py-0.5 rounded-full text-xs font-medium flex items-center space-x-1 border ${B(ie)}`,children:[K(ie),n.jsx("span",{className:"capitalize",children:ie})]})]}),e.elementSelector&&n.jsxs("div",{className:"text-xs text-gray-500 flex items-center space-x-1 mt-1",children:[n.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),n.jsx("span",{children:"Pinned to element"})]})]})]}),o&&(te||ae)&&n.jsxs("div",{className:"relative",ref:J,children:[n.jsx("button",{onClick:()=>D(!F),className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded",title:"Comment actions",children:n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),F&&n.jsxs("div",{className:"absolute right-0 top-8 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-20",children:[te&&n.jsxs("button",{onClick:()=>{y(!j),D(!1)},className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),n.jsx("span",{children:"Edit"})]}),ie!=="resolved"&&(te||ae)&&n.jsxs("button",{onClick:()=>{l(e.id),D(!1)},className:"w-full text-left px-3 py-2 text-sm text-green-700 hover:bg-green-50 flex items-center space-x-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),n.jsx("span",{children:"Resolve"})]}),ie==="resolved"&&(te||ae)&&n.jsxs("button",{onClick:()=>{c(e.id,he),D(!1)},className:"w-full text-left px-3 py-2 text-sm text-blue-700 hover:bg-blue-50 flex items-center space-x-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),n.jsx("span",{children:"Reopen"})]}),ie!=="archived"&&ae&&n.jsxs("button",{onClick:()=>{a(e.id),D(!1)},className:"w-full text-left px-3 py-2 text-sm text-yellow-700 hover:bg-yellow-50 flex items-center space-x-2",children:[n.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[n.jsx("path",{d:"M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"}),n.jsx("path",{fillRule:"evenodd",d:"M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z",clipRule:"evenodd"})]}),n.jsx("span",{children:"Archive"})]}),(te||ae)&&n.jsxs("button",{onClick:()=>{confirm("Are you sure you want to delete this comment? This action cannot be undone.")&&i(e.id),D(!1)},className:"w-full text-left px-3 py-2 text-sm text-red-700 hover:bg-red-50 flex items-center space-x-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),n.jsx("span",{children:"Delete"})]})]})]})]}),n.jsx("div",{className:"mb-3",children:j?n.jsxs("div",{className:"space-y-3",children:[n.jsx("textarea",{value:m,onChange:T=>u(T.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:3,placeholder:"Edit your comment..."}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx("button",{onClick:()=>{y(!1),u(he)},className:"px-3 py-1.5 text-sm text-gray-600 hover:text-gray-800",children:"Cancel"}),n.jsx("button",{onClick:_,disabled:!m.trim()||E,className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Updating...":"Update"})]})]}):n.jsx("div",{className:"prose prose-sm max-w-none",children:n.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:he})})}),e.attachments&&e.attachments.length>0&&n.jsxs("div",{className:"mb-3",children:[n.jsx("h4",{className:"text-xs font-medium text-gray-700 mb-2 uppercase tracking-wide",children:"Attachments:"}),n.jsx("div",{className:"space-y-1",children:e.attachments.map(T=>n.jsxs("div",{className:"flex items-center space-x-2 text-sm bg-gray-50 rounded p-2",children:[n.jsx("svg",{className:"w-4 h-4 text-gray-400 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})}),n.jsx("a",{href:T.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex-1 truncate",children:T.filename}),n.jsxs("span",{className:"text-gray-500 text-xs flex-shrink-0",children:["(",Math.round(T.size/1024),"KB)"]})]},T.id))})]}),n.jsxs("div",{className:"flex items-center justify-between border-t border-gray-100 pt-2",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[!g&&ie!=="archived"&&n.jsxs("button",{onClick:()=>N(!0),className:"text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center space-x-1",children:[n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),n.jsx("span",{children:"Reply"})]}),t.length>0&&n.jsxs("button",{onClick:()=>w(!b),className:"text-sm text-gray-600 hover:text-gray-800 font-medium flex items-center space-x-1",children:[n.jsx("svg",{className:`w-4 h-4 transition-transform ${b?"rotate-90":""}`,fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),n.jsxs("span",{children:[b?"Hide":"Show"," ",t.length," ",t.length===1?"reply":"replies"]})]})]}),n.jsx("div",{className:"text-xs text-gray-400",children:r>0&&n.jsxs("span",{children:["Level ",r+1]})})]}),g&&n.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-md border-l-4 border-blue-200",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),n.jsxs("span",{className:"text-sm font-medium text-blue-700",children:["Replying to ",ke]})]}),n.jsx("textarea",{ref:q,value:S,onChange:T=>f(T.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:2,placeholder:"Write a reply..."}),n.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{ref:G,type:"file",multiple:!0,onChange:V,className:"hidden",accept:".png,.jpg,.jpeg,.txt,.md,.pdf,.doc,.docx"}),n.jsxs("button",{onClick:()=>{var T;return(T=G.current)==null?void 0:T.click()},className:"text-sm text-gray-600 hover:text-gray-800 flex items-center space-x-1",children:[n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})}),n.jsx("span",{children:"Attach"})]}),k.length>0&&n.jsxs("span",{className:"text-xs text-gray-500",children:[k.length," file",k.length!==1?"s":""," attached"]})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>{N(!1),f(""),P([])},className:"px-3 py-1.5 text-sm text-gray-600 hover:text-gray-800",children:"Cancel"}),n.jsx("button",{onClick:re,disabled:!S.trim()||E,className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:E?"Replying...":"Reply"})]})]}),k.length>0&&n.jsx("div",{className:"mt-2 space-y-1",children:k.map((T,W)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border text-sm",children:[n.jsx("span",{className:"truncate flex-1",children:T.name}),n.jsx("button",{onClick:()=>L(W),className:"ml-2 text-red-500 hover:text-red-700 font-bold",children:"×"})]},W))})]})]}),b&&t.length>0&&r<d&&n.jsx("div",{className:"replies-container",children:t.map(T=>n.jsx(Hm,{comment:T,replies:[],depth:r+1,onReply:s,onResolve:l,onArchive:a,onDelete:i,onUpdate:c,showActions:o,maxDepth:d,isOwner:x,currentUserId:h},T.id))}),r>=d&&t.length>0&&n.jsx("div",{className:"ml-6 p-3 bg-gray-50 rounded-md border-l-4 border-gray-200 text-sm text-gray-600 italic",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),n.jsxs("span",{children:["Thread continues with ",t.length," more ",t.length===1?"reply":"replies","..."]})]})})]})}function ui({snapshotId:e,commentId:t,onClose:r,isOwner:s=!1,comments:l,onCommentsUpdate:a}){const{user:i}=wt(),[c,o]=p.useState(l||[]),[d,x]=p.useState(!l),h=async()=>{var u;if(!l)try{x(!0);let b=`/api/snapshots/${e}/comments`;t&&(b+=`/${t}/thread`);const w=await R.get(b),k=w.comments||((u=w.data)==null?void 0:u.comments)||[];o(k),a&&a(k)}catch(b){console.error("Failed to load comments:",b)}finally{x(!1)}};p.useEffect(()=>{l?o(l):h()},[e,t,l]);const g=u=>{const b=new Map,w=[];u.forEach(P=>{b.set(P.id,{...P,replies:[]})}),u.forEach(P=>{const E=b.get(P.id);P.parentId&&b.has(P.parentId)?b.get(P.parentId).replies.push(E):w.push(E)}),w.sort((P,E)=>(E.createdAt||0)-(P.createdAt||0));const k=P=>{P.replies.sort((E,A)=>(E.createdAt||0)-(A.createdAt||0)),P.replies.forEach(E=>{E.replies&&E.replies.length>0&&k(E)})};return w.forEach(k),w},N=async(u,b,w)=>{try{const k=new FormData;k.append("text",b),k.append("parentId",u),k.append("state","published"),w&&w.length>0&&w.forEach(E=>{k.append("attachments",E)});const P=await R.post(`/api/snapshots/${e}/comments`,k);await h()}catch(k){throw console.error("Failed to post reply:",k),k}},j=async u=>{try{await R.put(`/api/snapshots/${e}/comments/${u}`,{state:"resolved"}),await h();try{await R.post("/analytics/track",{eventType:"comment_resolved",eventData:{snapshotId:e,commentId:u}})}catch(b){console.error("Failed to track comment resolution analytics:",b)}}catch(b){throw console.error("Failed to resolve comment:",b),b}},y=async u=>{try{await R.put(`/api/snapshots/${e}/comments/${u}`,{state:"archived"}),await h();try{await R.post("/analytics/track",{eventType:"comment_archived",eventData:{snapshotId:e,commentId:u}})}catch(b){console.error("Failed to track comment archival analytics:",b)}}catch(b){throw console.error("Failed to archive comment:",b),b}},S=async u=>{try{await R.delete(`/api/snapshots/${e}/comments/${u}`),await h();try{await R.post("/analytics/track",{eventType:"comment_deleted",eventData:{snapshotId:e,commentId:u}})}catch(b){console.error("Failed to track comment deletion analytics:",b)}}catch(b){throw console.error("Failed to delete comment:",b),b}},f=async(u,b)=>{try{await R.put(`/api/snapshots/${e}/comments/${u}`,{text:b}),await h();try{await R.post("/analytics/track",{eventType:"comment_edited",eventData:{snapshotId:e,commentId:u,newContentLength:b.length}})}catch(w){console.error("Failed to track comment edit analytics:",w)}}catch(w){throw console.error("Failed to update comment:",w),w}};if(d)return n.jsx("div",{className:"fixed inset-y-0 right-0 w-96 bg-white shadow-xl z-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),n.jsx("p",{className:"text-gray-500 mt-2",children:"Loading comments..."})]})});const m=g(c);return n.jsxs("div",{className:"fixed inset-y-0 right-0 w-96 bg-white shadow-xl z-50 flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})}),n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 font-inconsolata",children:["Comments (",c.length,")"]})]}),n.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded hover:bg-gray-100",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto",children:m.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[n.jsx("svg",{className:"w-16 h-16 text-gray-300 mb-4",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2 font-inconsolata",children:"No comments yet"}),n.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Start the conversation by adding the first comment!"})]}):n.jsx("div",{className:"p-4 space-y-4",children:m.map(u=>n.jsx(Hm,{comment:u,replies:u.replies,depth:0,onReply:N,onResolve:j,onArchive:y,onDelete:S,onUpdate:f,showActions:!0,maxDepth:5,isOwner:s,currentUserId:i==null?void 0:i.uid},u.id))})}),m.length>0&&n.jsx("div",{className:"border-t border-gray-200 p-3 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[n.jsxs("span",{children:[m.length," thread",m.length!==1?"s":""]}),n.jsxs("span",{children:[c.length," total comment",c.length!==1?"s":""]})]})})]})}function sx({isOpen:e,onClose:t,onSubmit:r,snapshotId:s,position:l,existingComments:a=[],isSubscribed:i=!1,onSubscriptionChange:c,className:o="",replyToComment:d,showThread:x=!1,isOwner:h=!1}){const[g,N]=p.useState(""),[j,y]=p.useState([]),[S,f]=p.useState(!1),[m,u]=p.useState(!1),[b,w]=p.useState(!1),[k,P]=p.useState("published"),[E,A]=p.useState(x?"thread":"form"),[F,D]=p.useState(!1),[G,q]=p.useState(""),{user:J,isAuthenticated:re}=wt(),_=p.useRef(null),V=p.useRef(null),L=p.useRef(null);if(p.useEffect(()=>{_.current&&(_.current.style.height="auto",_.current.style.height=Math.min(_.current.scrollHeight,200)+"px")},[g]),p.useEffect(()=>{e&&_.current&&!x&&setTimeout(()=>{var T;return(T=_.current)==null?void 0:T.focus()},100)},[e,x]),p.useEffect(()=>{const T=W=>{W.key==="Escape"&&t(),(W.ctrlKey||W.metaKey)&&W.key==="Enter"&&z()};return e&&document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[e,g]),!e)return null;const z=async T=>{if(T&&T.preventDefault(),!(!g.trim()||S)){f(!0);try{if(r)await r({text:g.trim(),attachments:j.length>0?j:void 0,subscribe:b,state:k,parentId:d==null?void 0:d.id});else{const W=new FormData;W.append("text",g.trim()),W.append("state",k),d&&W.append("parentId",d.id),l&&(l.elementSelector&&W.append("elementSelector",l.elementSelector),W.append("elementCoordinates",JSON.stringify({x:l.x,y:l.y}))),j.forEach(Z=>{W.append("attachments",Z)}),b&&W.append("subscribe","true"),await R.post(`/api/snapshots/${s}/comments`,W);try{await R.post("/analytics/track",{eventType:d?"comment_replied":"comment_created",eventData:{snapshotId:s,hasAttachments:j.length>0,attachmentCount:j.length,attachmentTypes:j.map(Z=>Z.type),commentState:k,isReply:!!d,parentCommentId:d==null?void 0:d.id,subscribed:b,hasElementSelector:!!(l!=null&&l.elementSelector),contentLength:g.trim().length}})}catch(Z){console.error("Failed to track comment analytics:",Z)}}N(""),y([]),w(!1),P("published"),t()}catch(W){console.error("Failed to create comment:",W),alert("Failed to create comment. Please try again.")}finally{f(!1)}}},B=T=>{const W=Array.from(T.target.files||[]);W.length>0&&y(Z=>[...Z,...W])},K=T=>{y(W=>W.filter((Z,fe)=>fe!==T))},te=T=>{T.preventDefault(),u(!0)},ae=T=>{T.preventDefault(),u(!1)},he=T=>{T.preventDefault(),u(!1);const W=Array.from(T.dataTransfer.files);W.length>0&&y(Z=>[...Z,...W])},ke=T=>{var rt;const W=["image/png","image/jpeg","image/jpg","image/gif","image/webp","text/plain","text/markdown","text/csv","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],Z=["png","jpg","jpeg","gif","webp","txt","md","csv","pdf","doc","docx"],fe=(rt=T.name.split(".").pop())==null?void 0:rt.toLowerCase();return!W.includes(T.type)&&!Z.includes(fe||"")?{valid:!1,error:"File type not supported"}:T.size>10*1024*1024?{valid:!1,error:"File too large (max 10MB)"}:{valid:!0}},ie=T=>{if(T===0)return"0 B";const W=1024,Z=["B","KB","MB","GB"],fe=Math.floor(Math.log(T)/Math.log(W));return parseFloat((T/Math.pow(W,fe)).toFixed(2))+" "+Z[fe]},pe=T=>{const W=T.type.toLowerCase(),Z=T.name.toLowerCase();return W.startsWith("image/")?"🖼️":W.includes("pdf")?"📄":W.includes("word")||Z.endsWith(".doc")||Z.endsWith(".docx")?"📝":W.includes("text")||Z.endsWith(".txt")||Z.endsWith(".md")?"📄":"📎"};return E==="thread"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:t}),n.jsx(ui,{snapshotId:s,onClose:t,isOwner:h,comments:a})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:t}),n.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:n.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:n.jsxs("div",{ref:L,className:`relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg ${o}`,children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 font-inconsolata",children:d?`Reply to ${d.authorName||"comment"}`:"Add Comment"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[a.length>0&&n.jsx("button",{onClick:()=>A(E==="form"?"thread":"form"),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:E==="form"?"Show Thread":"Show Form"}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded hover:bg-gray-100",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),n.jsxs("form",{onSubmit:z,className:"p-4 space-y-4",children:[d&&n.jsxs("div",{className:"p-3 bg-blue-50 border-l-4 border-blue-200 rounded",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[n.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),n.jsxs("span",{className:"text-sm font-medium text-blue-700",children:["Replying to ",d.authorName]})]}),n.jsxs("p",{className:"text-sm text-blue-800 line-clamp-2",children:[(d.text||"").substring(0,100),(d.text||"").length>100?"...":""]})]}),l&&l.elementSelector&&n.jsx("div",{className:"p-3 bg-green-50 border-l-4 border-green-200 rounded",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),n.jsxs("span",{className:"text-sm font-medium text-green-700",children:["Pinned to element at (",l.x,", ",l.y,")"]})]})}),n.jsxs("div",{className:`relative ${m?"ring-2 ring-blue-500 ring-opacity-50":""}`,onDragOver:te,onDragLeave:ae,onDrop:he,children:[n.jsx("textarea",{ref:_,value:g,onChange:T=>N(T.target.value),placeholder:d?"Write your reply...":l?"Comment on this element...":"Write your comment...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,maxLength:5e3}),n.jsxs("div",{className:"absolute bottom-2 right-2 text-xs text-gray-400",children:[g.length,"/5000"]}),m&&n.jsx("div",{className:"absolute inset-0 bg-blue-50 bg-opacity-75 border-2 border-dashed border-blue-300 rounded-lg flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("svg",{className:"mx-auto h-12 w-12 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),n.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Drop files here"})]})})]}),n.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("input",{ref:V,type:"file",multiple:!0,onChange:B,className:"hidden",accept:".png,.jpg,.jpeg,.gif,.webp,.txt,.md,.csv,.pdf,.doc,.docx"}),n.jsxs("button",{type:"button",onClick:()=>{var T;return(T=V.current)==null?void 0:T.click()},className:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})}),"Attach"]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("label",{className:"text-sm text-gray-700",children:"Status:"}),n.jsxs("select",{value:k,onChange:T=>P(T.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"published",children:"Published"}),n.jsx("option",{value:"draft",children:"Draft"})]})]}),n.jsx("button",{type:"button",onClick:()=>D(!F),className:`text-sm px-2 py-1 rounded ${F?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-800"}`,children:"Preview"})]}),n.jsxs("div",{className:"text-xs text-gray-500",children:[navigator.platform.includes("Mac")?"⌘":"Ctrl"," + Enter to submit"]})]}),j.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Attached files:"}),n.jsx("div",{className:"space-y-1",children:j.map((T,W)=>{const Z=ke(T);return n.jsxs("div",{className:`flex items-center justify-between p-2 rounded border ${Z.valid?"bg-gray-50 border-gray-200":"bg-red-50 border-red-200"}`,children:[n.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[n.jsx("span",{className:"text-lg",children:pe(T)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:T.name}),n.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[n.jsx("span",{className:"text-gray-500",children:ie(T.size)}),!Z.valid&&n.jsx("span",{className:"text-red-600",children:Z.error})]})]})]}),n.jsx("button",{type:"button",onClick:()=>K(W),className:"ml-2 text-red-500 hover:text-red-700 font-bold text-sm",children:"×"})]},W)})})]}),F&&g.trim()&&n.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview:"}),n.jsx("div",{className:"prose prose-sm max-w-none",children:n.jsx("p",{className:"whitespace-pre-wrap text-gray-700",children:g})})]}),re&&n.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",checked:b,onChange:T=>w(T.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),n.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Subscribe to notifications"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Get notified when someone replies to your comment or this thread"})]})}),a.length>0&&n.jsx("div",{className:"mt-3 p-2 bg-gray-50 rounded",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("svg",{className:`w-4 h-4 ${i?"text-green-600":"text-gray-400"}`,fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M10 2L3 7v11c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V7l-7-5z"})}),n.jsx("span",{className:"text-xs text-gray-600",children:i?"You'll receive notifications for new comments":"You won't receive notifications for new comments"})]}),c&&n.jsx("button",{type:"button",onClick:()=>c(!i),className:`px-2 py-1 text-xs font-medium rounded transition-colors ${i?"bg-red-100 text-red-700 hover:bg-red-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:i?"Unsubscribe":"Subscribe"})]})})]}),n.jsxs("div",{className:"flex items-center justify-end space-x-3 border-t border-gray-200 pt-4",children:[n.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:!g.trim()||S||j.some(T=>!ke(T).valid),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:S?"Submitting...":d?"Reply":"Comment"})]})]})]})})})]})}function hd(){const e=Pt(),{user:t}=wt(),[r,s]=p.useState(null),[l,a]=p.useState([]),[i,c]=p.useState(!0),[o,d]=p.useState(null),[x,h]=p.useState(""),[g,N]=p.useState(!1),[j,y]=p.useState(null),[S,f]=p.useState(!1),[m,u]=p.useState(!1),[b,w]=p.useState(),{id:k}=wf(),P=window.self!==window.top,E=window.location.hash.slice(1),A=P?E:null;p.useEffect(()=>{if(!k){d("No snapshot ID provided"),c(!1);return}F()},[k]),p.useEffect(()=>{r&&!r.password&&D()},[r]),p.useEffect(()=>{P&&A&&r&&(A==="comments"||A==="reviews"||A==="ai"&&setTimeout(()=>{f(!0)},200))},[P,A,r]),p.useEffect(()=>{g&&!i&&setTimeout(()=>{const _=document.querySelector('input[type="password"]');_&&_.focus()},100)},[g,i]);const F=async()=>{try{d(null);const _=await R.get(`/snapshots/${k}`);s(_.snapshot),_.snapshot.files.length>0&&y(_.snapshot.files[0].name),_.snapshot.public||document.cookie.split("; ").find(L=>L.startsWith(`ps_gate_${k}=`))||N(!0)}catch(_){_.message.includes("401")?N(!0):(console.error("Failed to fetch snapshot:",_),d("Failed to fetch snapshot"))}finally{c(!1)}},D=async()=>{try{const _=await R.get(`/api/snapshots/${k}/comments`);a(_.comments||[])}catch(_){console.error("Failed to fetch comments:",_)}},G=async()=>{try{d(null);const _=await fetch(`/s/${k}/gate`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:x})});if(!_.ok)throw new Error(_.status.toString());N(!1),await F(),D()}catch(_){console.error("Password verification failed:",_),d(_.message||"Invalid password")}},q=async _=>{try{d(null);const V=new FormData;if(V.append("text",_.text),_.state&&V.append("state",_.state),_.parentId&&V.append("parentId",_.parentId),_.subscribe!==void 0&&V.append("subscribe",String(_.subscribe)),_.attachments&&_.attachments.forEach(z=>{V.append("attachments",z)}),!(await fetch(`/api/snapshots/${k}/comments`,{method:"POST",credentials:"include",body:V})).ok)throw new Error("Failed to post comment");await D(),u(!1)}catch(V){console.error("Failed to post comment:",V),d(V.message||"Failed to post comment")}},J=_=>{if(_===0)return"0 B";const V=1024,L=["B","KB","MB","GB"],z=Math.floor(Math.log(_)/Math.log(V));return parseFloat((_/Math.pow(V,z)).toFixed(1))+" "+L[z]},re=_=>new Date(_).toLocaleString();return i?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center font-poppins",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading snapshot..."})]})}):o&&!g?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-6 font-poppins",children:n.jsx("div",{className:"max-w-md w-full",children:n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:[n.jsx("h2",{className:"text-lg font-semibold mb-2 font-inconsolata",children:"Error"}),n.jsx("p",{className:"mb-4",children:o}),n.jsx("button",{onClick:()=>e("/"),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Back to Dashboard"})]})})}):g?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-6 font-poppins",children:n.jsxs("div",{className:"max-w-md w-full",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2 font-inconsolata",children:"Password Protected"}),n.jsx("p",{className:"text-gray-600",children:"This snapshot is password protected. Please enter the password to continue."})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[o&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:o}),n.jsx("div",{className:"mb-6",children:n.jsx("input",{type:"password",value:x,onChange:_=>h(_.target.value),placeholder:"Enter password",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:_=>_.key==="Enter"&&G()})}),n.jsx("button",{onClick:G,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-lg transition-colors w-full",children:"View Snapshot"})]})]})}):r?(r.files.find(_=>_.name===j),P&&A?n.jsxs("div",{className:"min-h-screen bg-white font-poppins",children:[A==="comments"&&k&&n.jsx(ui,{snapshotId:k,comments:l,onClose:()=>{},isOwner:!!t,onCommentsUpdate:_=>a(_)}),A==="reviews"&&k&&n.jsx("div",{className:"p-6",children:n.jsx(md,{snapshotId:k,isOwner:!!t})}),A==="ai"&&k&&n.jsx(ud,{snapshotId:k,isVisible:!0,onClose:()=>{}})]}):n.jsxs("div",{className:"min-h-screen bg-gray-50 font-poppins",children:[n.jsx("header",{className:"bg-white shadow-sm border-b",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl font-bold text-gray-900 font-inconsolata",children:["Snapshot: ",r.id]}),n.jsxs("div",{className:"text-sm text-gray-500",children:["Created: ",re(r.createdAt)," | Expires: ",re(r.expiresAt)," | Size: ",J(r.totalBytes)]})]}),n.jsxs("nav",{className:"flex items-center space-x-3",children:[n.jsx("button",{onClick:()=>f(!S),className:`px-3 py-2 text-sm font-medium border rounded-lg transition-colors ${S?"bg-blue-600 text-white border-blue-600":"text-gray-600 hover:text-gray-700 border-gray-300 hover:border-gray-400"}`,children:"🤖 AI UX Assistant"}),n.jsx("button",{onClick:()=>e("/"),className:"text-gray-600 hover:text-gray-700 px-3 py-2 text-sm font-medium border border-gray-300 rounded-lg hover:border-gray-400 transition-colors",children:"Dashboard"})]})]})})}),n.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[n.jsx("div",{className:"lg:col-span-3",children:n.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 font-inconsolata",children:["Files (",r.files.length,")"]}),n.jsx("div",{className:"space-y-2",children:r.files.map(_=>n.jsxs("button",{onClick:()=>y(_.name),className:`w-full text-left p-3 rounded-lg border transition-colors ${j===_.name?"bg-blue-50 border-blue-200 text-blue-900":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[n.jsx("div",{className:"font-medium text-sm",children:_.name}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[J(_.size)," • ",_.type]})]},_.name))})]})}),n.jsx("div",{className:"lg:col-span-6",children:n.jsxs("div",{className:"bg-white rounded-lg shadow p-2 min-h-[600px]",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 font-inconsolata",children:"Preview"}),n.jsx("a",{href:`https://quickstage.tech/s/${k}/index.html`,target:"_blank",rel:"noreferrer",className:"text-sm text-blue-600 hover:underline",children:"Open in new tab"})]}),n.jsx("iframe",{src:`https://quickstage.tech/s/${k}/index.html`,className:"w-full h-[70vh] border-0",title:"Snapshot Preview",onLoad:()=>{console.log("Snapshot iframe loaded successfully")},onError:_=>{console.error("Failed to load snapshot iframe:",_),d("Failed to load snapshot preview. Please try refreshing the page.")}},k)]})}),n.jsxs("div",{className:"lg:col-span-3",children:[n.jsx("div",{className:"bg-white rounded-lg shadow",children:n.jsx(ui,{snapshotId:k||"",comments:l,onClose:()=>{},isOwner:!!t,onCommentsUpdate:_=>a(_)})}),n.jsx("div",{className:"mt-6",children:n.jsx(md,{snapshotId:k||"",isOwner:!!t})})]})]})}),k&&n.jsx(ud,{snapshotId:k,isVisible:S,onClose:()=>f(!1)}),k&&n.jsx(sx,{isOpen:m,onClose:()=>u(!1),onSubmit:q,snapshotId:k,position:b,existingComments:l,showThread:!1,isOwner:!!t})]})):n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center font-poppins",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4 font-inconsolata",children:"Snapshot Not Found"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"The requested snapshot could not be found."}),n.jsx("button",{onClick:()=>e("/"),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Back to Dashboard"})]})})}function lx(){const e=Pt(),[t,r]=p.useState([]),[s,l]=p.useState([]),[a,i]=p.useState({x:0,y:0}),[c,o]=p.useState(0),[d,x]=p.useState(!0),[h,g]=p.useState(!1),[N,j]=p.useState(!1),y=["No <strong>DevOps</strong>","No <strong>GitHub</strong>","No finnicky <strong>envs</strong>","No deployment <strong>pipelines</strong>","No <strong>configs</strong>","No <strong>DevOps</strong>"],S=()=>{e("/login")},f=()=>{e("/login?mode=signup")},m=()=>{e("/login")};return p.useEffect(()=>{(async()=>{try{await R.post("/analytics/track",{eventType:"page_view",eventData:{page:"Landing Page"}})}catch(b){console.error("Failed to track page view:",b)}})()},[]),p.useEffect(()=>{const u=()=>{const b=navigator.userAgent.toLowerCase(),w=/mobile|android|iphone|ipad|phone|tablet/i.test(b)||window.innerWidth<=768;g(w)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]),p.useEffect(()=>{const u=()=>{const w=[];for(let P=0;P<50;P++)w.push({id:P,x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,size:Math.random()*2+.5,opacity:Math.random()*.6+.2});l(w)};u();const b=()=>u();return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),p.useEffect(()=>{if(!d)return;const u=setInterval(()=>{o(b=>{const w=b+1;return w>=y.length?(x(!1),clearInterval(u),b):w})},1200);return()=>clearInterval(u)},[y.length]),p.useEffect(()=>{let u=0,b=0;const w=100,k=P=>{const E=Date.now();if(i({x:P.clientX,y:P.clientY}),E-b>w){const A=Math.floor(Math.random()*10)+5,F=[];for(let D=0;D<A;D++){const G=Math.random()*360,q=Math.random()*100+15,J=Math.random()*2+1,re=G*Math.PI/180,_=P.clientX+Math.cos(re)*q,V=P.clientY+Math.sin(re)*q;F.push({id:u++,x:_,y:V,size:J,opacity:1})}r(D=>[...D,...F]),b=E,setTimeout(()=>{r(D=>D.filter(G=>!F.find(q=>q.id===G.id)))},600)}};return window.addEventListener("mousemove",k),()=>window.removeEventListener("mousemove",k)},[]),n.jsxs("div",{className:"min-h-screen bg-black relative overflow-hidden font-poppins",children:[s.map(u=>n.jsx("div",{className:"absolute pointer-events-none z-5",style:{left:u.x,top:u.y,transform:"translate(-50%, -50%)"},children:n.jsx("div",{className:"bg-white rounded-full",style:{width:`${u.size}px`,height:`${u.size}px`,opacity:u.opacity,boxShadow:`0 0 ${u.size*3}px ${u.size}px rgba(255, 255, 255, 0.2)`}})},u.id)),t.map(u=>n.jsx("div",{className:"absolute pointer-events-none z-10",style:{left:u.x,top:u.y,transform:"translate(-50%, -50%)"},children:n.jsx("div",{className:"bg-white rounded-full animate-pulse",style:{width:`${u.size}px`,height:`${u.size}px`,opacity:u.opacity,boxShadow:`0 0 ${u.size*2}px ${u.size}px rgba(255, 255, 255, 0.3)`}})},u.id)),n.jsx("header",{className:"bg-black/95 backdrop-blur-sm border-b border-gray-800 sticky top-0 z-50 shadow-sm",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsx("div",{className:"flex items-center",children:n.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent font-share-tech-mono",children:"QuickStage"})}),n.jsxs("nav",{className:"flex items-center space-x-2 sm:space-x-6",children:[n.jsx("button",{onClick:f,className:"text-gray-300 hover:text-blue-400 px-2 sm:px-3 py-2 text-sm font-medium transition-colors duration-200 font-poppins",children:"Sign Up"}),n.jsx("button",{onClick:m,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-medium py-2 px-4 sm:px-6 rounded-lg transition-all duration-200 transform hover:scale-105 shadow-md hover:shadow-lg font-poppins",children:"Log In"})]})]})})}),n.jsxs("section",{className:"relative bg-gradient-to-br from-black via-gray-900 to-black min-h-screen flex items-center justify-center overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[n.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-500/10 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-pulse"}),n.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/10 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-pulse"})]}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-8 leading-tight font-inconsolata",children:["Share Working",n.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400",children:" Prototypes"}),n.jsx("br",{}),"in One Click"]}),d&&n.jsx("p",{className:"text-xl md:text-2xl text-gray-300 mb-2 leading-relaxed",dangerouslySetInnerHTML:{__html:y[c]||""}}),n.jsx("p",{className:"text-xl md:text-2xl text-gray-300 mb-10 leading-relaxed",children:"Just your prototype, online in seconds."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center",children:[n.jsx("button",{onClick:S,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-semibold py-4 px-10 rounded-xl text-lg transition-all duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl font-poppins",children:"Start Staging Free"}),n.jsxs("button",{onClick:()=>j(!0),className:"border-1 border-gray-600 hover:border-gray-500 text-gray-100 font-semibold py-4 px-10 rounded-xl text-lg transition-all duration-300 bg-gray-800/50 hover:bg-gray-700/50 shadow-lg hover:shadow-xl backdrop-blur-sm font-poppins flex items-center justify-center gap-3",children:[n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"Quick Video Explainer"]})]})]})})]}),n.jsx("section",{id:"how-it-works",className:"py-32 bg-gradient-to-b from-black/80 to-gray-900/80",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-20",children:[n.jsx("h2",{className:"text-5xl md:text-6xl font-bold text-white mb-6 font-inconsolata",children:"How QuickStage Works"}),n.jsxs("button",{onClick:()=>j(!0),className:"text-xl text-gray-300 hover:text-blue-400 transition-colors duration-200 flex items-center justify-center gap-2 mx-auto font-poppins mb-4",children:[n.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"Quick Video Explainer"]}),n.jsx("p",{className:"text-lg text-gray-400 max-w-2xl mx-auto font-poppins",children:"Three quick steps to a shareable prototype"})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-12",children:[n.jsxs("div",{className:"text-center group",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-all duration-300 transform group-hover:scale-110",children:n.jsx("span",{className:"text-3xl font-bold text-white",children:"1"})}),n.jsx("h3",{className:"text-3xl font-semibold text-white mb-4 font-inconsolata",children:"Build Locally"}),n.jsx("p",{className:"text-gray-300 leading-relaxed font-poppins",children:"Turn your ideas for a new feature or product into a quick prototype – let your favorite AI agent help!"})]}),n.jsxs("div",{className:"text-center group",children:[n.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-all duration-300 transform group-hover:scale-110",children:n.jsx("span",{className:"text-3xl font-bold text-white",children:"2"})}),n.jsx("h3",{className:"text-3xl font-semibold text-white mb-4 font-inconsolata",children:"Deploy Instantly"}),n.jsx("p",{className:"text-gray-300 leading-relaxed font-poppins",children:"QuickStage adapts to the framework you've used and deploys the project to the web in seconds."})]}),n.jsxs("div",{className:"text-center group",children:[n.jsx("div",{className:"bg-gradient-to-br from-indigo-500 to-indigo-600 w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-all duration-300 transform group-hover:scale-110",children:n.jsx("span",{className:"text-3xl font-bold text-white",children:"3"})}),n.jsx("h3",{className:"text-3xl font-semibold text-white mb-4 font-inconsolata",children:"Share Securely"}),n.jsx("p",{className:"text-gray-300 leading-relaxed font-poppins",children:"Get a private, password-protected URL to share with your team for comments and input."})]})]})]})}),n.jsx("section",{id:"features",className:"py-32 bg-gradient-to-b from-gray-900/80 to-black/80",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-20",children:[n.jsx("h2",{className:"text-5xl md:text-6xl font-bold text-white mb-6 font-inconsolata",children:"Built for Modern Development"}),n.jsx("p",{className:"text-xl text-gray-300 max-w-2xl mx-auto font-poppins",children:"Everything you need to get your prototypes online quickly and securely"})]}),n.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-8 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-700/50",children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mr-4 flex-shrink-0 shadow-md",children:n.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),n.jsx("h3",{className:"text-2xl font-semibold text-white font-inconsolata",children:"10-Second Deploys"})]}),n.jsx("p",{className:"text-gray-300 leading-relaxed font-poppins",children:"Deploy your first prototype in less than 10 seconds. No env management, no CI/CD, no managing environments or deconflicting repos with the development team."})]}),n.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-8 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-700/50",children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center mr-4 flex-shrink-0 shadow-md",children:n.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),n.jsx("h3",{className:"text-2xl font-semibold text-white font-inconsolata",children:"Secure by Default"})]}),n.jsx("p",{className:"text-gray-300 leading-relaxed font-poppins",children:"Password-protected sharing, private by default. No public exposure of your work-in-progress."})]}),n.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-8 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-700/50",children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center mr-4 flex-shrink-0 shadow-md",children:n.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),n.jsx("h3",{className:"text-2xl font-semibold text-white font-inconsolata",children:"Real-time Comments"})]}),n.jsx("p",{className:"text-gray-300 leading-relaxed font-poppins",children:"Get feedback directly on your prototypes with inline comments and real-time collaboration."})]}),n.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-8 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-700/50",children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center mr-4 flex-shrink-0 shadow-md",children:n.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),n.jsx("h3",{className:"text-2xl font-semibold text-white font-inconsolata",children:"Framework Agnostic"})]}),n.jsx("p",{className:"text-gray-300 leading-relaxed font-poppins",children:"Works with React, Vue, Svelte, Next.js, and more. Detects your build system automatically."})]}),n.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-8 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-700/50",children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-500 to-purple-600 rounded-xl flex items-center justify-center mr-4 flex-shrink-0 shadow-md",children:n.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx("h3",{className:"text-2xl font-semibold text-white font-inconsolata",children:"No Setup, No Config"})]}),n.jsx("p",{className:"text-gray-300 leading-relaxed font-poppins",children:"Install the extension in Cursor or VS Code and you're ready to go. Stage your first prototype less than 30 seconds after downloading the extension."})]}),n.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm p-8 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-700/50",children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-pink-500 to-pink-600 rounded-xl flex items-center justify-center mr-4 flex-shrink-0 shadow-md",children:n.jsx("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),n.jsx("h3",{className:"text-2xl font-semibold text-white font-inconsolata",children:"Ship Ideas, Not PRDs"})]}),n.jsx("p",{className:"text-gray-300 leading-relaxed font-poppins",children:"Ditch the 10-page requirements docs. If a picture is worth a thousand words, what's a working prototype worth?"})]})]})]})}),n.jsxs("section",{className:"py-24 bg-gradient-to-br from-black via-blue-900/20 to-purple-900/20 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-br from-blue-500/10 via-transparent to-purple-500/10"}),n.jsx("div",{className:"absolute -top-20 -right-20 w-40 h-40 bg-blue-500/20 rounded-full filter blur-3xl"}),n.jsx("div",{className:"absolute -bottom-20 -left-20 w-40 h-40 bg-purple-500/20 rounded-full filter blur-3xl"})]}),n.jsxs("div",{className:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8 relative z-10",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6 font-inconsolata",children:"Ready to Stage Your First Prototype?"}),n.jsx("p",{className:"text-xl text-gray-300 mb-10 leading-relaxed font-poppins",children:"Join dozens of designers, product managers, and developers who are already using QuickStage to shortcut the product development process."}),n.jsx("button",{onClick:S,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white font-semibold py-4 px-10 rounded-xl text-lg transition-all duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl font-poppins",children:"Start Staging Free"})]})]}),N&&n.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"relative max-w-4xl w-full",children:[n.jsx("button",{onClick:()=>j(!1),className:"absolute -top-12 right-0 text-white hover:text-gray-300 text-xl font-bold z-10 bg-black/50 rounded-full w-10 h-10 flex items-center justify-center transition-colors duration-200",children:"✕"}),n.jsx("div",{className:"relative bg-black rounded-lg overflow-hidden shadow-2xl",style:{paddingBottom:"56.25%"},children:n.jsx("iframe",{src:"https://player.vimeo.com/video/1114461563?badge=0&autopause=0&player_id=0&app_id=58479&autoplay=1&dnt=1",frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share",referrerPolicy:"strict-origin-when-cross-origin",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},title:"QuickStage - Shortcut the development cycle"})})]})}),n.jsx("footer",{className:"bg-black text-white py-12 font-poppins",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"QuickStage"}),n.jsx("p",{className:"text-gray-400 text-sm",children:"The fastest way to stage and share your product prototypes."})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4",children:"Product"}),n.jsxs("ul",{className:"space-y-2 text-sm",children:[n.jsx("li",{children:n.jsx("a",{href:"#how-it-works",className:"text-gray-300 hover:text-white",children:"How It Works"})}),n.jsx("li",{children:n.jsx("a",{href:"#features",className:"text-gray-300 hover:text-white",children:"Features"})}),n.jsx("li",{children:n.jsx("a",{href:"/pricing",className:"text-gray-300 hover:text-white",children:"Pricing"})}),n.jsx("li",{children:n.jsx("a",{href:"mailto:support@quickstage.tech",className:"text-gray-300 hover:text-white",children:"Contact"})})]})]})]}),n.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center",children:n.jsx("p",{className:"text-gray-400 text-sm",children:"© 2025 QuickStage. All rights reserved."})})]})})]})}function ax(){const e=Pt(),{user:t,loginWithEmailPassword:r,loginWithGoogle:s,registerWithEmailPassword:l,error:a,clearError:i}=wt(),[c,o]=p.useState(!1),[d,x]=p.useState(""),[h,g]=p.useState("login"),[N,j]=p.useState(""),[y,S]=p.useState(""),[f,m]=p.useState("");p.useEffect(()=>{if(t){const k=new URLSearchParams(window.location.search),P=k.get("redirect"),E=k.get("plan");e(P==="pricing"&&E?`/pricing?plan=${E}`:"/dashboard")}},[t,e]),p.useEffect(()=>{(async()=>{try{await R.post("/analytics/track",{eventType:"page_view",eventData:{page:"Login/Signup"}})}catch(P){console.error("Failed to track page view:",P)}})()},[]),p.useEffect(()=>{new URLSearchParams(window.location.search).get("mode")==="signup"&&g("register")},[]),p.useEffect(()=>{i(),x("")},[h,i]);const u=async()=>{if(h==="register"&&(!N||!y||!f)){x("Please fill in all fields");return}if(h==="login"&&(!N||!y)){x("Please enter email and password");return}o(!0),x("");try{h==="register"?await l(N.trim(),y,f.trim()):await r(N.trim(),y)}catch(k){console.error("Authentication failed:",k),x(k.message||"Authentication failed")}finally{o(!1)}},b=async()=>{o(!0),x("");try{const k="572150791966-3grv4gjf8d5ngpklfs0b2hdet0d9vaf9.apps.googleusercontent.com";typeof window<"u"&&window.google?window.google.accounts.oauth2.initTokenClient({client_id:k,scope:"email profile",callback:async A=>{if(A.access_token)try{const F=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${A.access_token}`}});if(F.ok){const D=await F.json();await s(A.access_token)}}catch(F){console.error("Failed to get user info:",F),x("Failed to authenticate with Google")}}}).requestAccessToken():x("Google authentication is not available. Please try again later.")}catch(k){console.error("Google authentication failed:",k),x("Google authentication failed")}finally{o(!1)}},w=(k,P)=>{switch(k){case"email":j(P);break;case"password":S(P);break;case"name":m(P);break}d&&x(""),a&&i()};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center px-4 py-12 font-poppins",children:n.jsxs("div",{className:"max-w-md w-full",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"mb-4",children:n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl mx-auto flex items-center justify-center",children:n.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2 font-inconsolata",children:h==="register"?"Create Account":"Welcome Back"}),n.jsx("p",{className:"text-gray-600",children:h==="register"?"Sign up for QuickStage to start sharing your prototypes":"Sign in to your QuickStage account"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center font-inconsolata",children:[n.jsx("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),h==="register"?"Create Account":"Sign In"]}),h==="register"&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),n.jsx("input",{type:"text",placeholder:"Enter your full name",value:f,onChange:k=>w("name",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),n.jsx("input",{type:"email",placeholder:"Enter your email",value:N,onChange:k=>w("email",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),n.jsx("input",{type:"password",placeholder:"Enter your password",value:y,onChange:k=>w("password",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),n.jsx("button",{onClick:u,disabled:c,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-blue-400 disabled:to-indigo-400 text-white font-semibold py-3 px-4 rounded-xl transition-all duration-200 transform hover:scale-[1.02] disabled:transform-none",children:c?n.jsxs("div",{className:"flex items-center justify-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Processing..."]}):h==="register"?"Create Account":"Sign In"})]}),n.jsxs("div",{className:"relative mb-6",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-gray-200"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-4 bg-white text-gray-500 font-medium",children:"or"})})]}),n.jsx("div",{className:"mb-6",children:n.jsxs("button",{onClick:b,disabled:c,className:"w-full bg-white border-2 border-gray-200 hover:border-gray-300 hover:bg-gray-50 text-gray-700 font-semibold py-3 px-4 rounded-xl transition-all duration-200 transform hover:scale-[1.02] disabled:transform-none flex items-center justify-center",children:[n.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})}),n.jsx("div",{className:"text-center mb-6",children:n.jsx("button",{onClick:()=>g(h==="login"?"register":"login"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium hover:underline transition-colors duration-200",children:h==="login"?"Don't have an account? Sign up":"Already have an account? Sign in"})}),(d||a)&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm mb-4 flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 mr-2 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),d||a]}),n.jsx("div",{className:"text-center",children:n.jsxs("button",{onClick:()=>e("/"),className:"text-gray-600 hover:text-gray-700 text-sm font-medium hover:underline transition-colors duration-200 flex items-center justify-center mx-auto",children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to landing page"]})})]})]})})}function ix(){var yo,jo,wo,bo,No,ko,So,Co,Eo,Po,Lo,_o,Ro,Mo,To,Ao,zo,Do,Fo;const{user:e}=wt(),[t,r]=p.useState([]),[s,l]=p.useState(!0),[a,i]=p.useState(null),[c,o]=p.useState(!1),[d,x]=p.useState({name:"",email:"",password:"",role:"user"}),[h,g]=p.useState(null),{projects:N,selectedProjectId:j,isSidebarCollapsed:y,loadProjects:S,handleSelectProject:f,handleToggleSidebar:m}=Vm(),[u,b]=p.useState(null),[w,k]=p.useState(!1),[P,E]=p.useState("users"),[A,F]=p.useState(!1),[D,G]=p.useState([]),[q,J]=p.useState(!1),[re,_]=p.useState(null),[V,L]=p.useState("all"),[z,B]=p.useState(!1),[K,te]=p.useState(null),[ae,he]=p.useState(null),[ke,ie]=p.useState(null),[pe,T]=p.useState([]),[W,Z]=p.useState("24h"),[fe,rt]=p.useState(null),[Ye,_n]=p.useState("asc"),mr=v=>{fe===v?_n(Ye==="asc"?"desc":"asc"):(rt(v),_n("asc"))},hr=qn.useMemo(()=>!fe||!t.length?t:[...t].sort((v,I)=>{var mt,ht,_t,st;let ee,ue;switch(fe){case"name":ee=((mt=v.name)==null?void 0:mt.toLowerCase())||"",ue=((ht=I.name)==null?void 0:ht.toLowerCase())||"";break;case"email":ee=((_t=v.email)==null?void 0:_t.toLowerCase())||"",ue=((st=I.email)==null?void 0:st.toLowerCase())||"";break;case"status":ee=v.status||"",ue=I.status||"";break;case"plan":ee=v.plan||"",ue=I.plan||"";break;case"createdAt":ee=new Date(v.createdAt||0).getTime(),ue=new Date(I.createdAt||0).getTime();break;case"lastLoginAt":ee=new Date(v.lastLoginAt||0).getTime(),ue=new Date(I.lastLoginAt||0).getTime();break;case"totalSnapshots":ee=v.totalSnapshots||0,ue=I.totalSnapshots||0;break;default:return 0}return ee<ue?Ye==="asc"?-1:1:ee>ue?Ye==="asc"?1:-1:0}),[t,fe,Ye]),Ke=({field:v,children:I})=>n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none",onClick:()=>mr(v),children:n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("span",{children:I}),fe===v&&n.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:Ye==="asc"?n.jsx("path",{d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"}):n.jsx("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"})}),fe!==v&&n.jsx("svg",{className:"w-4 h-4 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"})})]})}),[Q,se]=p.useState("all"),[Pe,Rn]=p.useState("all"),[We,Wt]=p.useState("all"),[C,O]=p.useState("all"),[Y,U]=p.useState(""),[H,be]=p.useState(""),[Se,Tl]=p.useState(""),[Al,Xm]=p.useState(""),[Jm,ho]=p.useState(!1),[Zm,po]=p.useState(!1),[e0,fo]=p.useState(!1);p.useEffect(()=>{const v=I=>{I.target.closest(".custom-dropdown")||(ho(!1),B(!1),po(!1),fo(!1))};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]);const[Lt,t0]=p.useState(null),[Vt,xo]=p.useState(!1),[Mn,n0]=p.useState(null);if(!e||e.role!=="superadmin")return n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center font-poppins",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4 font-inconsolata",children:"Access Denied"}),n.jsx("p",{className:"text-gray-600",children:"You don't have permission to access this page."})]})});p.useEffect(()=>{pr(),fr(),Il(),ds(),(async()=>{try{await R.post("/analytics/track",{eventType:"page_view",eventData:{page:"Admin Dashboard"}})}catch(I){console.error("Failed to track page view:",I)}})()},[]),p.useEffect(()=>{W&&fr()},[W]);const pr=async()=>{try{l(!0),i(null);const v=await R.get("/admin/users");r(v.users)}catch(v){i(v.message||"Failed to load users")}finally{l(!1)}},ds=async()=>{try{J(!0),_(null);const v=await R.get("/admin/snapshots");G(v.snapshots||[])}catch(v){_(v.message||"Failed to load snapshots")}finally{J(!1)}},fr=async()=>{try{k(!0);const v=Date.now();let I;switch(W){case"24h":I=v-24*60*60*1e3;break;case"7d":I=v-7*24*60*60*1e3;break;case"30d":I=v-30*24*60*60*1e3;break;default:I=v-7*24*60*60*1e3}const[ee,ue,mt,ht]=await Promise.all([R.get("/debug/stats"),R.get("/debug/users"),R.get("/debug/snapshots"),R.get(`/debug/analytics/events?limit=500&startTime=${I}`)]);b(ee),te(ue),he(mt),ie(ee),ht.events&&T(ht.events)}catch(v){console.error("Failed to load analytics:",v)}finally{k(!1)}},r0=async v=>{v.preventDefault();try{i(null),await R.post("/admin/users",d),g("User created successfully!"),o(!1),x({name:"",email:"",password:"",role:"user"}),pr()}catch(I){i(I.message||"Failed to create user")}},s0=async v=>{if(confirm("Are you sure you want to deactivate this user?"))try{i(null),await R.post(`/admin/users/${v}/deactivate`),g("User deactivated successfully!"),pr()}catch(I){i(I.message||"Failed to deactivate user")}},l0=async v=>{try{i(null),await R.post(`/admin/users/${v}/activate`),g("User activated successfully!"),pr()}catch(I){i(I.message||"Failed to activate user")}},a0=async(v,I)=>{if(!confirm(`⚠️  DANGER: Are you absolutely sure you want to PERMANENTLY DELETE user "${I}"?

This will:
• Remove all their data from the system
• Delete all their snapshots
• Delete all their PATs
• Delete all their comments
• This action CANNOT be undone!

Type "DELETE" to confirm:`))return;if(prompt('Type "DELETE" to confirm permanent deletion:')!=="DELETE"){alert("Deletion cancelled. User data is safe.");return}try{i(null),await $m.deleteUser(v),g(`User "${I}" has been completely deleted from the system!`),pr()}catch(ue){i(ue.message||"Failed to delete user")}},us=v=>new Date(v).toLocaleDateString(),go=v=>{switch(v){case"Superadmin":return"text-purple-600 bg-purple-100";case"Pro":return"text-green-600 bg-green-100";case"Free Trial":return"text-blue-600 bg-blue-100";case"Cancelled":return"text-red-600 bg-red-100";case"Past Due":return"text-orange-600 bg-orange-100";case"None":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}},i0=v=>v.canAccessPro?n.jsxs("div",{className:"flex flex-col space-y-1",children:[n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${go(v.subscriptionStatus)}`,children:v.subscriptionStatus}),v.trialEndsAt&&n.jsxs("span",{className:"text-xs text-gray-500",children:["Trial ends: ",us(v.trialEndsAt)]}),v.subscriptionStartedAt&&n.jsxs("span",{className:"text-xs text-gray-500",children:["Started: ",us(v.subscriptionStartedAt)]})]}):n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${go(v.subscriptionStatus)}`,children:v.subscriptionStatus}),o0=v=>v==="active"?"text-green-600":"text-red-600",zl=v=>v>=1e6?(v/1e6).toFixed(1)+"M":v>=1e3?(v/1e3).toFixed(1)+"K":v.toString(),c0=v=>({"24h":"Last 24 Hours","7d":"Last 7 Days","30d":"Last 30 Days"})[v]||v,vo=pe.filter(v=>{if(!v||!v.type||Q!=="all"&&v.type!==Q)return!1;if(Pe!=="all"){if(Pe.includes("(")&&Pe.includes(")")){const I=Pe.match(/\(([^)]+)\)/);if(I&&v.userId!==I[1])return!1}else if(v.userId!==Pe)return!1}if(We!=="all"&&v.page!==We)return!1;if(C!=="all"&&v.timestamp){const I=v.timestamp;switch(C){case"before":if(Y&&I>=new Date(Y).getTime())return!1;break;case"after":if(H&&I<=new Date(H).getTime())return!1;break;case"between":if(Se&&I<new Date(Se).getTime()||Al&&I>new Date(Al).getTime())return!1;break}}return!0}),ms=({label:v,value:I,options:ee,onChange:ue,isOpen:mt,setIsOpen:ht})=>{const _t=ee.find(st=>st.value===I);return n.jsxs("div",{className:"relative custom-dropdown",children:[n.jsxs("button",{type:"button",onClick:()=>ht(!mt),className:"inline-flex items-center justify-between w-full px-4 py-2 text-sm font-medium bg-white border border-gray-300 rounded-lg hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 min-w-[200px]",children:[n.jsx("span",{className:"text-gray-700",children:(_t==null?void 0:_t.label)||v}),n.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${mt?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),mt&&n.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5",children:n.jsx("div",{className:"py-1 max-h-60 overflow-auto",children:ee.map(st=>n.jsx("button",{type:"button",onClick:()=>{ue(st.value),ht(!1)},className:`w-full px-4 py-2 text-sm text-left hover:bg-gray-50 transition-colors duration-150 first:rounded-t-lg last:rounded-b-lg ${st.value===I?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"}`,children:st.label},st.value))})})]})},d0=v=>{switch(v){case"user_login":return"bg-blue-100 text-blue-800 border-blue-200";case"user_logout":return"bg-slate-100 text-slate-800 border-slate-200";case"user_registered":return"bg-green-100 text-green-800 border-green-200";case"user_deleted":return"bg-red-100 text-red-800 border-red-200";case"snapshot_created":return"bg-purple-100 text-purple-800 border-purple-200";case"snapshot_viewed":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"snapshot_downloaded":return"bg-cyan-100 text-cyan-800 border-cyan-200";case"snapshot_deleted":return"bg-red-100 text-red-800 border-red-200";case"snapshot_expired":return"bg-amber-100 text-amber-800 border-amber-200";case"page_view":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"comment_created":case"comment_posted":return"bg-teal-100 text-teal-800 border-teal-200";case"comment_replied":return"bg-cyan-100 text-cyan-800 border-cyan-200";case"comment_edited":case"comment_updated":return"bg-teal-100 text-teal-800 border-teal-200";case"comment_deleted":return"bg-red-100 text-red-800 border-red-200";case"comment_resolved":return"bg-green-100 text-green-800 border-green-200";case"comment_archived":return"bg-amber-100 text-amber-800 border-amber-200";case"comments_bulk_resolved":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"comment_subscription_added":return"bg-blue-100 text-blue-800 border-blue-200";case"comment_subscription_removed":return"bg-orange-100 text-orange-800 border-orange-200";case"comment_subscription_activated":return"bg-green-100 text-green-800 border-green-200";case"comment_subscription_paused":return"bg-gray-100 text-gray-800 border-gray-200";case"project_created":return"bg-purple-100 text-purple-800 border-purple-200";case"project_updated":return"bg-blue-100 text-blue-800 border-blue-200";case"project_deleted":return"bg-red-100 text-red-800 border-red-200";case"project_archived":return"bg-amber-100 text-amber-800 border-amber-200";case"project_unarchived":return"bg-lime-100 text-lime-800 border-lime-200";case"review_requested":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"review_approved":return"bg-green-100 text-green-800 border-green-200";case"review_rejected":return"bg-red-100 text-red-800 border-red-200";case"review_submitted":return"bg-green-100 text-green-800 border-green-200";case"review_cancelled":return"bg-orange-100 text-orange-800 border-orange-200";case"review_reminder_sent":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"subscription_started":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"subscription_cancelled":return"bg-orange-100 text-orange-800 border-orange-200";case"subscription_expired":return"bg-red-100 text-red-800 border-red-200";case"payment_succeeded":return"bg-green-100 text-green-800 border-green-200";case"payment_failed":return"bg-red-100 text-red-800 border-red-200";case"migration_completed":return"bg-blue-100 text-blue-800 border-blue-200";case"user_migration_completed":return"bg-blue-100 text-blue-800 border-blue-200";case"snapshot_migration_completed":return"bg-blue-100 text-blue-800 border-blue-200";case"system_backup":return"bg-violet-100 text-violet-800 border-violet-200";case"system_maintenance":return"bg-amber-100 text-amber-800 border-amber-200";case"extension_downloaded":return"bg-green-100 text-green-800 border-green-200";case"extension_upgraded":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"error_occurred":return"bg-red-100 text-red-800 border-red-200";case"unauthorized_access":return"bg-red-100 text-red-800 border-red-200";case"rate_limit_exceeded":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},u0=v=>{var ee,ue,mt,ht,_t,st,Io,Uo,$o,Bo,Oo,Wo,Vo,Ho,Qo,qo;if(!v||!v.type)return"Unknown event";const I=v.description;if(I)return I;switch(v.type){case"page_view":return`Viewed page: ${v.page||"Unknown page"}`;case"user_login":return"User logged in";case"user_logout":return"User logged out";case"user_registered":return"New user registered";case"snapshot_created":return"Snapshot created";case"snapshot_viewed":return"Snapshot viewed";case"snapshot_downloaded":return"Snapshot downloaded";case"comment_posted":return"Comment posted";case"comment_updated":return"Comment updated";case"comment_resolved":return"Comment resolved";case"comments_bulk_resolved":return"Multiple comments resolved";case"project_created":return`Project created: ${((ee=v.eventData)==null?void 0:ee.projectName)||"Unknown project"}`;case"project_updated":return`Project updated: ${((ue=v.eventData)==null?void 0:ue.projectName)||"Unknown project"}`;case"project_deleted":return`Project deleted: ${((mt=v.eventData)==null?void 0:mt.projectName)||"Unknown project"}`;case"project_archived":return`Project archived: ${((ht=v.eventData)==null?void 0:ht.projectName)||"Unknown project"}`;case"project_unarchived":return`Project unarchived: ${((_t=v.eventData)==null?void 0:_t.projectName)||"Unknown project"}`;case"review_requested":return`Review requested for snapshot: ${((st=v.eventData)==null?void 0:st.snapshotName)||((Io=v.eventData)==null?void 0:Io.snapshotId)||"Unknown snapshot"}`;case"review_submitted":return`Review submitted for snapshot: ${((Uo=v.eventData)==null?void 0:Uo.snapshotName)||(($o=v.eventData)==null?void 0:$o.snapshotId)||"Unknown snapshot"}`;case"review_cancelled":return`Review cancelled for snapshot: ${((Bo=v.eventData)==null?void 0:Bo.snapshotName)||((Oo=v.eventData)==null?void 0:Oo.snapshotId)||"Unknown snapshot"}`;case"review_reminder_sent":return`Review reminder sent for snapshot: ${((Wo=v.eventData)==null?void 0:Wo.snapshotName)||((Vo=v.eventData)==null?void 0:Vo.snapshotId)||"Unknown snapshot"}`;case"subscription_started":return"Subscription started";case"subscription_cancelled":return"Subscription cancelled";case"payment_succeeded":return"Payment successful";case"payment_failed":return"Payment failed";case"extension_downloaded":return`Extension downloaded: ${((Ho=v.metadata)==null?void 0:Ho.version)||"Unknown version"}`;case"extension_upgraded":return`Extension upgraded: ${((Qo=v.metadata)==null?void 0:Qo.version)||"Unknown version"}`;case"error_occurred":return`Error: ${((qo=v.metadata)==null?void 0:qo.error)||"Unknown error"}`;case"unauthorized_access":return"Unauthorized access attempt";default:return`${v.type.charAt(0).toUpperCase()+v.type.slice(1).replace(/_/g," ")}`}},m0=["all","user_login","user_logout","user_registered","user_deleted","snapshot_created","snapshot_viewed","snapshot_downloaded","snapshot_deleted","snapshot_expired","page_view","comment_posted","comment_deleted","comment_updated","comment_resolved","comments_bulk_resolved","project_created","project_updated","project_deleted","project_archived","project_unarchived","review_requested","review_submitted","review_cancelled","review_reminder_sent","subscription_started","subscription_cancelled","subscription_expired","payment_succeeded","payment_failed","migration_completed","user_migration_completed","snapshot_migration_completed","system_backup","system_maintenance","extension_downloaded","extension_upgraded","error_occurred","unauthorized_access","rate_limit_exceeded",...Array.from(new Set(pe.map(v=>v==null?void 0:v.type).filter(Boolean)))],h0=["all",...Array.from(new Set(pe.map(v=>v!=null&&v.userId&&(v==null?void 0:v.userId)!=="system"&&(v==null?void 0:v.userId)!=="anonymous"?`${v.userEmail||"Unknown"} (${v.userId})`:v==null?void 0:v.userId).filter(Boolean)))],p0=(()=>{const v=pe.map(ee=>ee==null?void 0:ee.page).filter(Boolean);return["all",...Array.from(new Set(v))]})(),Dl=qn.useMemo(()=>V==="all"?D:D.filter(v=>v.ownerUid===V),[D,V]),Fl=qn.useMemo(()=>{const v=new Map;return D.forEach(I=>{I.ownerUid&&I.ownerName&&v.set(I.ownerUid,{uid:I.ownerUid,name:I.ownerName,email:I.ownerEmail||"Unknown Email"})}),Array.from(v.values()).sort((I,ee)=>I.name.localeCompare(ee.name))},[D]),Il=async()=>{try{const v=await R.get("/debug/migration/stats");t0(v)}catch(v){console.error("Failed to load migration stats:",v)}},hs=async(v,I=!0)=>{try{xo(!0),i(null);const ee=v==="full"?"/debug/migration/run":v==="users"?"/debug/migration/users":"/debug/migration/snapshots",ue=await R.post(ee,{dryRun:I,batchSize:50,skipErrors:!0,verbose:!0});n0(ue),g(`${v} migration ${I?"dry run":"completed"}: ${ue.result.migrated} migrated, ${ue.result.errors} errors`),await Il()}catch(ee){i(ee.message||`Failed to run ${v} migration`)}finally{xo(!1)}};if(s)return n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center font-poppins",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})});const f0=()=>{};return n.jsxs("div",{className:"min-h-screen bg-gray-50 font-poppins",children:[n.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center h-16",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ue,{to:"/dashboard",className:"flex items-center",children:n.jsx("span",{className:"text-xl font-share-tech-mono font-bold text-gray-900",children:"QuickStage"})}),n.jsx("button",{onClick:()=>F(!A),className:"ml-4 p-2 rounded-md text-gray-600 hover:bg-gray-100 lg:hidden",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(uo,{}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("span",{className:"text-sm text-gray-700",children:e.name}),n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Superadmin"}),n.jsx("button",{onClick:f0,className:"text-gray-400 hover:text-gray-500",title:"Sign out",children:n.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})]})})}),n.jsxs("div",{className:"flex h-[calc(100vh-4rem)]",children:[n.jsx("div",{className:`${A?"block":"hidden"} lg:block flex-shrink-0`,children:n.jsx(mo,{projects:N,selectedProjectId:j,onSelectProject:f,onRefreshProjects:S,user:e,isCollapsed:y,onToggleCollapse:m})}),n.jsx("main",{className:"flex-1 overflow-auto",children:n.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-inconsolata",children:"Admin Dashboard"}),n.jsx("p",{className:"mt-2 text-gray-600",children:"Manage QuickStage users and accounts"})]})})}),h&&n.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-md p-4",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),n.jsx("div",{className:"ml-3",children:n.jsx("p",{className:"text-sm font-medium text-green-800",children:h})}),n.jsx("div",{className:"ml-auto pl-3",children:n.jsxs("button",{onClick:()=>g(null),className:"inline-flex bg-green-50 rounded-md p-1.5 text-green-500 hover:bg-green-100",children:[n.jsx("span",{className:"sr-only",children:"Dismiss"}),n.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})}),a&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:n.jsxs("div",{className:"flex",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),n.jsx("div",{className:"ml-3",children:n.jsx("p",{className:"text-sm font-medium text-red-800",children:a})}),n.jsx("div",{className:"ml-auto pl-3",children:n.jsxs("button",{onClick:()=>i(null),className:"inline-flex bg-red-50 rounded-md p-1.5 text-red-500 hover:bg-red-100",children:[n.jsx("span",{className:"sr-only",children:"Dismiss"}),n.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})}),n.jsx("div",{className:"mb-6 border-b border-gray-200",children:n.jsxs("nav",{className:"-mb-px flex space-x-8",children:[n.jsxs("button",{onClick:()=>E("users"),className:`py-2 px-1 border-b-2 font-medium text-sm ${P==="users"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Users (",t.length,")"]}),n.jsxs("button",{onClick:()=>E("snapshots"),className:`py-2 px-1 border-b-2 font-medium text-sm ${P==="snapshots"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["📸 Snapshots (",D.length,")"]}),n.jsx("button",{onClick:()=>E("analytics"),className:`py-2 px-1 border-b-2 font-medium text-sm ${P==="analytics"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"📊 Analytics & System Stats"})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:n.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:n.jsxs("div",{className:"mt-3",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4 font-inconsolata",children:"Create New User"}),n.jsxs("form",{onSubmit:r0,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),n.jsx("input",{type:"text",required:!0,value:d.name,onChange:v=>x({...d,name:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),n.jsx("input",{type:"email",required:!0,value:d.email,onChange:v=>x({...d,email:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),n.jsx("input",{type:"password",required:!0,value:d.password,onChange:v=>x({...d,password:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),n.jsxs("select",{value:d.role,onChange:v=>x({...d,role:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"user",children:"User"}),n.jsx("option",{value:"admin",children:"Admin"})]})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors",children:"Create User"})]})]})]})})}),P==="users"?n.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[n.jsx("div",{className:"px-4 py-5 sm:px-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 font-inconsolata",children:["Users (",t.length,")"]}),n.jsx("button",{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Create New User"})]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx(Ke,{field:"name",children:"User"}),n.jsx(Ke,{field:"status",children:"Account Status"}),n.jsx(Ke,{field:"plan",children:"Subscription"}),n.jsx(Ke,{field:"createdAt",children:"First Login"}),n.jsx(Ke,{field:"lastLoginAt",children:"Last Login"}),n.jsx(Ke,{field:"totalSnapshots",children:"Snapshots"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:hr.map(v=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.name}),n.jsx("div",{className:"text-sm text-gray-500",children:v.email}),n.jsxs("div",{className:"text-xs text-gray-400",children:["Role: ",v.role]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${o0(v.status)}`,children:v.status==="active"?"Active":"Deactivated"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i0(v)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:us(v.createdAt)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v.lastLoginAt?us(v.lastLoginAt):"Never"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("span",{children:[v.activeSnapshots,"/",v.totalSnapshots]}),v.totalSnapshots>0&&v.activeSnapshots===0&&n.jsx("span",{className:"text-xs text-amber-600",title:"Debug: Check snapshot status and expiration",children:"⚠️ All snapshots show as inactive"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex flex-col space-y-2",children:[v.status==="active"?n.jsx("button",{onClick:()=>s0(v.uid),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md text-amber-700 bg-amber-100 hover:bg-amber-200 border border-amber-300 transition-colors",title:"Temporarily disable user account (reversible)",children:"⏸️ Deactivate"}):n.jsx("button",{onClick:()=>l0(v.uid),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md text-green-700 bg-green-100 hover:bg-green-200 border border-green-300 transition-colors",title:"Re-enable user account",children:"▶️ Activate"}),v.role!=="superadmin"&&n.jsx("button",{onClick:()=>a0(v.uid,v.name),className:"inline-flex items-center px-3 py-1.5 text-xs font-medium rounded-md text-gray-700 bg-gray-100 hover:bg-gray-200 border border-gray-300 transition-colors",title:"Permanently delete user and all their data (irreversible)",children:"🗑️ Delete"})]})})]},v.uid))})]})})]}):P==="snapshots"?n.jsx("div",{className:"space-y-6",children:q?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):re?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"text-red-600 mb-4",children:re}),n.jsx("button",{onClick:ds,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Retry"})]}):n.jsxs(n.Fragment,{children:[(e==null?void 0:e.role)==="superadmin"&&n.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 font-inconsolata",children:"Filter by User"}),n.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",Dl.length," of ",D.length," snapshots"]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative custom-dropdown",children:[n.jsxs("button",{type:"button",onClick:()=>B(!z),className:"inline-flex items-center justify-between w-full px-4 py-2 text-sm font-medium bg-white border border-gray-300 rounded-lg hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 min-w-[300px]",children:[n.jsx("span",{className:"text-gray-700",children:V==="all"?"All Users":((yo=Fl.find(v=>v.uid===V))==null?void 0:yo.name)||"Unknown User"}),n.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${z?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),z&&n.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg ring-1 ring-black ring-opacity-5",children:n.jsxs("div",{className:"py-1 max-h-60 overflow-auto",children:[n.jsx("button",{type:"button",onClick:()=>{L("all"),B(!1)},className:`w-full px-4 py-2 text-sm text-left hover:bg-gray-50 transition-colors duration-150 first:rounded-t-lg ${V==="all"?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"}`,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:"All Users"}),n.jsx("span",{className:"text-xs text-gray-500",children:"Show all snapshots"})]})}),Fl.map(v=>n.jsx("button",{type:"button",onClick:()=>{L(v.uid),B(!1)},className:`w-full px-4 py-2 text-sm text-left hover:bg-gray-50 transition-colors duration-150 last:rounded-b-lg ${V===v.uid?"bg-blue-50 text-blue-700 font-medium":"text-gray-700"}`,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:v.name}),n.jsx("span",{className:"text-xs text-gray-500",children:v.email})]})},v.uid))]})})]}),V!=="all"&&n.jsx("button",{onClick:()=>L("all"),className:"px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Clear Filter"})]})]}),n.jsx(Wm,{snapshots:Dl,projects:N,onRefresh:ds,onExtendSnapshot:async v=>{try{await R.post(`/api/snapshots/${v}/extend`),ds(),g("Snapshot extended successfully")}catch{i("Failed to extend snapshot")}},selectedProjectId:j,onSelectProject:f,showWidgets:!0,showExtensionSection:!1,user:e,title:"All Snapshots",subtitle:V==="all"?`${D.length} snapshots from all users`:`${Dl.length} snapshots from ${((jo=Fl.find(v=>v.uid===V))==null?void 0:jo.name)||"selected user"}`})]})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[n.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[n.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 font-inconsolata",children:"🚀 System Overview"}),n.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Real-time system statistics and performance metrics"})]}),n.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:w?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading comprehensive analytics..."})]}):u?n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-500 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-blue-600 font-inconsolata",children:"Total Users"}),n.jsx("p",{className:"text-2xl font-bold text-blue-900",children:zl(((wo=u.system)==null?void 0:wo.totalUsers)||0)})]})]})}),n.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-purple-500 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6l.586-.586a2 2 0 012.828 0L20 8m-6-6L12.586 1.586a2 2 0 00-2.828 0L6 2m-6-6L1.586 1.586a2 2 0 00-2.828 0L2 2"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-purple-600 font-inconsolata",children:"Total Snapshots"}),n.jsx("p",{className:"text-2xl font-bold text-purple-900",children:zl(((bo=u.system)==null?void 0:bo.totalSnapshots)||0)})]})]})}),n.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-500 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-green-600 font-inconsolata",children:"Active Sessions"}),n.jsx("p",{className:"text-2xl font-bold text-green-900",children:zl(((No=u.system)==null?void 0:No.activeSessions)||0)})]})]})}),n.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4 border border-orange-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-orange-500 rounded-lg",children:n.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-orange-600 font-inconsolata",children:"System Health"}),n.jsx("p",{className:"text-2xl font-bold text-orange-900",children:w?"⏳ Loading...":u?"🟢 Healthy":"❌ Error"})]})]})})]}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-gray-600",children:"No analytics data available"}),n.jsx("button",{onClick:fr,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Refresh Analytics"})]})})]}),n.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[n.jsx("div",{className:"px-4 py-5 sm:px-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 font-inconsolata",children:"💳 Subscription Analytics"}),n.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Detailed subscription breakdown and revenue insights"})]}),n.jsx("div",{className:"flex space-x-2",children:["24h","7d","30d"].map(v=>n.jsx("button",{onClick:()=>Z(v),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${W===v?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:c0(v)},v))})]})}),n.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:u?n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 rounded-lg p-4 border border-emerald-200",children:[n.jsx("h4",{className:"text-sm font-medium text-emerald-900 font-inconsolata mb-3",children:"📊 Subscription Status"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-emerald-700",children:"🆓 Free:"}),n.jsx("span",{className:"font-semibold text-emerald-900 text-lg",children:((ko=u.subscriptions)==null?void 0:ko.free)||0})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-emerald-700",children:"🧪 Trial:"}),n.jsx("span",{className:"font-semibold text-emerald-900 text-lg",children:((So=u.subscriptions)==null?void 0:So.trial)||0})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-emerald-700",children:"✅ Active:"}),n.jsx("span",{className:"font-semibold text-emerald-900 text-lg",children:((Co=u.subscriptions)==null?void 0:Co.active)||0})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-emerald-700",children:"❌ Cancelled:"}),n.jsx("span",{className:"font-semibold text-emerald-900 text-lg",children:((Eo=u.subscriptions)==null?void 0:Eo.cancelled)||0})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-emerald-700",children:"⚠️ Past Due:"}),n.jsx("span",{className:"font-semibold text-emerald-900 text-lg",children:((Po=u.subscriptions)==null?void 0:Po.pastDue)||0})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-emerald-700",children:"👑 Superadmin:"}),n.jsx("span",{className:"font-semibold text-emerald-900 text-lg",children:((Lo=u.subscriptions)==null?void 0:Lo.superadmin)||0})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-900 font-inconsolata mb-3",children:"💰 Revenue Metrics"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-blue-700",children:"Trial Users:"}),n.jsx("span",{className:"font-semibold text-blue-900",children:((_o=u.subscriptions)==null?void 0:_o.trial)||0})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-blue-700",children:"Conversion Rate:"}),n.jsxs("span",{className:"font-semibold text-blue-900",children:[(Ro=u.subscriptions)!=null&&Ro.active&&((Mo=u.subscriptions)!=null&&Mo.trial)?Math.round(u.subscriptions.active/(u.subscriptions.active+u.subscriptions.trial)*100):0,"%"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-blue-700",children:"Churn Rate:"}),n.jsxs("span",{className:"font-semibold text-blue-900",children:[(To=u.subscriptions)!=null&&To.cancelled&&((Ao=u.subscriptions)!=null&&Ao.active)?Math.round(u.subscriptions.cancelled/(u.subscriptions.active+u.subscriptions.cancelled)*100):0,"%"]})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:[n.jsx("h4",{className:"text-sm font-medium text-purple-900 font-inconsolata mb-3",children:"📈 Growth Trends"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-purple-700",children:"Total Users:"}),n.jsx("span",{className:"font-semibold text-purple-900",children:((zo=u.system)==null?void 0:zo.totalUsers)||0})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-purple-700",children:"Active Subscriptions:"}),n.jsx("span",{className:"font-semibold text-purple-900",children:((Do=u.subscriptions)==null?void 0:Do.active)||0})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-purple-700",children:"Trial Users:"}),n.jsx("span",{className:"font-semibold text-purple-900",children:((Fo=u.subscriptions)==null?void 0:Fo.trial)||0})]})]})]})]}):null})]}),n.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[n.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 font-inconsolata",children:"📋 Recent Activity Feed"}),n.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Live feed of system events and user activities"})]}),n.jsx("button",{onClick:async()=>{try{l(!0);const v=Date.now();let I;switch(W){case"24h":I=v-24*60*60*1e3;break;case"7d":I=v-7*24*60*60*1e3;break;case"30d":I=v-30*24*60*60*1e3;break;default:I=v-24*60*60*1e3}const ee=await R.get(`/debug/analytics/events?limit=500&startTime=${I}&fullRetrieval=true`),ue=(ee==null?void 0:ee.events)||[];T(ue)}catch(v){console.error("Failed to refresh activity feed:",v)}finally{l(!1)}},disabled:s,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin -ml-1 mr-2 h-4 w-4 border-2 border-gray-300 border-t-gray-900 rounded-full"}),"Refreshing..."]}):n.jsxs(n.Fragment,{children:[n.jsx("svg",{className:"-ml-1 mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh All"]})})]}),n.jsxs("div",{className:"mt-4 space-y-4",children:[n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsx(ms,{label:"All Event Types",value:Q,options:m0.map(v=>({value:v,label:v==="all"?"All Event Types":v})),onChange:se,isOpen:Jm,setIsOpen:ho}),n.jsx(ms,{label:"All Users",value:Pe,options:h0.map(v=>({value:v,label:v==="all"?"All Users":v})),onChange:Rn,isOpen:z,setIsOpen:B}),n.jsx(ms,{label:"All Pages",value:We,options:p0.map(v=>({value:v,label:v==="all"?"All Pages":v})),onChange:Wt,isOpen:Zm,setIsOpen:po})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[n.jsx(ms,{label:"All Time",value:C,options:[{value:"all",label:"All Time"},{value:"before",label:"Before"},{value:"after",label:"After"},{value:"between",label:"Between"}],onChange:v=>O(v),isOpen:e0,setIsOpen:fo}),C==="before"&&n.jsx("input",{type:"datetime-local",value:Y,onChange:v=>U(v.target.value),className:"px-4 py-2 text-sm font-medium bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Select date and time"}),C==="after"&&n.jsx("input",{type:"datetime-local",value:H,onChange:v=>be(v.target.value),className:"px-4 py-2 text-sm font-medium bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Select date and time"}),C==="between"&&n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"datetime-local",value:Se,onChange:v=>Tl(v.target.value),className:"px-4 py-2 text-sm font-medium bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"Start date and time"}),n.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"to"}),n.jsx("input",{type:"datetime-local",value:Al,onChange:v=>Xm(v.target.value),className:"px-4 py-2 text-sm font-medium bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"End date and time"})]})]})]})]}),n.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:vo.length>0?n.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:vo.map((v,I)=>n.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[n.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium border ${d0(v.type)}`,children:v.type}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-gray-900 font-medium",children:u0(v)}),v.userId&&v.userId!=="system"&&v.userId!=="anonymous"&&n.jsxs("div",{className:"mt-1 flex items-center space-x-4 text-xs text-gray-500",children:[n.jsxs("span",{children:["User: ",v.userName||"Unknown"]}),n.jsxs("span",{children:["ID: ",v.userId]}),v.userEmail&&n.jsxs("span",{children:["Email: ",v.userEmail]})]})]}),n.jsx("div",{className:"text-xs text-gray-500 ml-4",children:new Date(v.timestamp).toLocaleString()})]})})]},I))}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-gray-600",children:pe.length===0?"No recent events available":"No events match the current filters"}),n.jsx("button",{onClick:fr,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Refresh Events"})]})})]}),n.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[n.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[n.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 font-inconsolata",children:"🔄 Data Migration System"}),n.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Migrate legacy user and snapshot data to new schema"})]}),n.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:Lt?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:[n.jsx("h4",{className:"text-sm font-medium text-blue-900 font-inconsolata mb-3",children:"📊 Migration Status"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-blue-700 mb-2",children:"Users"}),n.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[Lt.stats.migratedUsers,"/",Lt.stats.totalUsers]}),n.jsxs("div",{className:"text-xs text-blue-600",children:[Lt.stats.legacyUsers," legacy users remaining"]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm text-blue-700 mb-2",children:"Snapshots"}),n.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[Lt.stats.migratedSnapshots,"/",Lt.stats.totalSnapshots]}),n.jsxs("div",{className:"text-xs text-blue-600",children:[Lt.stats.legacySnapshots," legacy snapshots remaining"]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"flex justify-between text-sm text-blue-700 mb-1",children:[n.jsx("span",{children:"Overall Progress"}),n.jsxs("span",{children:[Lt.summary.migrationProgress,"%"]})]}),n.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Lt.summary.migrationProgress}%`}})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("button",{onClick:()=>hs("users",!0),disabled:Vt,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 disabled:opacity-50 transition-colors",children:[Vt?"⏳":"👥"," Test User Migration"]}),n.jsxs("button",{onClick:()=>hs("snapshots",!0),disabled:Vt,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-purple-700 bg-purple-100 hover:bg-purple-200 disabled:opacity-50 transition-colors",children:[Vt?"⏳":"📸"," Test Snapshot Migration"]}),n.jsxs("button",{onClick:()=>hs("full",!0),disabled:Vt,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-green-700 bg-green-100 hover:bg-green-200 disabled:opacity-50 transition-colors",children:[Vt?"⏳":"🚀"," Test Full Migration"]}),n.jsxs("button",{onClick:()=>{confirm("⚠️  FINAL CONFIRMATION: This will run the ACTUAL migration and update all legacy data to the new schema. This action cannot be undone. Are you absolutely sure?")&&confirm('🚨 LAST CHANCE: This will permanently modify your database. Type "MIGRATE" to confirm:')&&(prompt('Type "MIGRATE" to confirm actual migration:')==="MIGRATE"?hs("full",!1):alert("Migration cancelled. Data is safe."))},disabled:Vt,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 disabled:opacity-50 transition-colors font-bold",children:[Vt?"⏳":"🔥"," RUN ACTUAL MIGRATION"]})]}),Mn&&n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-900 font-inconsolata mb-3",children:"📋 Migration Results"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Migrated:"}),n.jsx("span",{className:"font-semibold text-green-600",children:Mn.result.migrated})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Errors:"}),n.jsx("span",{className:"font-semibold text-red-600",children:Mn.result.errors})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Duration:"}),n.jsxs("span",{className:"font-semibold text-gray-900",children:[Mn.result.duration,"ms"]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Success:"}),n.jsx("span",{className:`font-semibold ${Mn.result.success?"text-green-600":"text-red-600"}`,children:Mn.result.success?"✅ Yes":"❌ No"})]})]})]})]}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-gray-600",children:"Loading migration statistics..."}),n.jsx("button",{onClick:Il,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Refresh Migration Stats"})]})})]}),n.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[n.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[n.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 font-inconsolata",children:"🚀 Quick Actions & Debug Tools"}),n.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Direct access to system tools and data export"})]}),n.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx("button",{onClick:async()=>{try{const v=await R.get("/debug/stats"),I=window.open("","_blank");I&&I.document.write(`
                            <html>
                              <head><title>Raw Stats API</title></head>
                              <body>
                                <h1>Raw Stats API Response</h1>
                                <pre>${JSON.stringify(v,null,2)}</pre>
                              </body>
                            </html>
                          `)}catch(v){alert("Failed to fetch stats: "+v)}},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 transition-colors",children:"📊 Raw Stats API"}),n.jsx("button",{onClick:async()=>{try{const v=await R.get("/debug/analytics/events?limit=500"),I=window.open("","_blank");I&&I.document.write(`
                            <html>
                              <head><title>Analytics Events</title></head>
                              <body>
                                <h1>Analytics Events</h1>
                                <pre>${JSON.stringify(v,null,2)}</pre>
                              </body>
                            </html>
                          `)}catch(v){alert("Failed to fetch analytics events: "+v)}},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 transition-colors",children:"📊 Analytics Events"}),n.jsx("button",{onClick:async()=>{try{const v=await R.get("/debug/health"),I=window.open("","_blank");I&&I.document.write(`
                            <html>
                              <head><title>System Health</title></head>
                              <body>
                                <h1>System Health</h1>
                                <pre>${JSON.stringify(v,null,2)}</pre>
                              </body>
                            </html>
                          `)}catch(v){alert("Failed to fetch system health: "+v)}},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-purple-700 bg-purple-100 hover:bg-purple-200 transition-colors",children:"🏥 System Health"}),n.jsx("button",{onClick:fr,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-orange-700 bg-orange-100 hover:bg-orange-200 transition-colors",children:"🔄 Refresh All Data"})]})})]})]})]})})]})]})}var Qm="basil",ox=function(t){return t===3?"v3":t},qm="https://js.stripe.com",cx="".concat(qm,"/").concat(Qm,"/stripe.js"),dx=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,ux=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var mx=function(t){return dx.test(t)||ux.test(t)},hx=function(){for(var t=document.querySelectorAll('script[src^="'.concat(qm,'"]')),r=0;r<t.length;r++){var s=t[r];if(mx(s.src))return s}return null},pd=function(t){var r="",s=document.createElement("script");s.src="".concat(cx).concat(r);var l=document.head||document.body;if(!l)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return l.appendChild(s),s},px=function(t,r){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:r})},Sr=null,Rs=null,Ms=null,fx=function(t){return function(r){t(new Error("Failed to load Stripe.js",{cause:r}))}},xx=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}},gx=function(t){return Sr!==null?Sr:(Sr=new Promise(function(r,s){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe){r(window.Stripe);return}try{var l=hx();if(!(l&&t)){if(!l)l=pd(t);else if(l&&Ms!==null&&Rs!==null){var a;l.removeEventListener("load",Ms),l.removeEventListener("error",Rs),(a=l.parentNode)===null||a===void 0||a.removeChild(l),l=pd(t)}}Ms=xx(r,s),Rs=fx(s),l.addEventListener("load",Ms),l.addEventListener("error",Rs)}catch(i){s(i);return}}),Sr.catch(function(r){return Sr=null,Promise.reject(r)}))},vx=function(t,r,s){if(t===null)return null;var l=r[0],a=l.match(/^pk_test/),i=ox(t.version),c=Qm;a&&i!==c&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(c,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var o=t.apply(void 0,r);return px(o,s),o},Cr,Gm=!1,Ym=function(){return Cr||(Cr=gx(null).catch(function(t){return Cr=null,Promise.reject(t)}),Cr)};Promise.resolve().then(function(){return Ym()}).catch(function(e){Gm||console.warn(e)});var fd=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];Gm=!0;var l=Date.now();return Ym().then(function(a){return vx(a,r,l)})};function xd({plan:e,onSuccess:t,onError:r,disabled:s,requiresAuth:l,onAuthRequired:a}){const[i,c]=p.useState(!1),[o,d]=p.useState(!1);p.useEffect(()=>{(async()=>{try{console.log("🍎 Checking Apple Pay availability..."),console.log("🔑 Stripe public key:",Et.STRIPE_PUBLIC_KEY);const g=await fd(Et.STRIPE_PUBLIC_KEY);if(!g){console.error("❌ Stripe failed to load");return}console.log("✅ Stripe loaded successfully");const j=await g.paymentRequest({country:"US",currency:"usd",total:{label:`QuickStage Pro - ${e==="monthly"?"Monthly":"Annual"}`,amount:e==="monthly"?600:6e3},requestPayerName:!0,requestPayerEmail:!0}).canMakePayment();console.log("🔍 Payment request result:",j),console.log("🍎 Apple Pay available:",!!(j!=null&&j.applePay)),c(!!(j!=null&&j.applePay))}catch(g){console.error("❌ Error checking Apple Pay availability:",g)}})()},[e]);const x=async()=>{if(!(s||o)){if(l){a==null||a();return}d(!0);try{const h=await fd(Et.STRIPE_PUBLIC_KEY);if(!h)throw new Error("Stripe not loaded");const g=h.paymentRequest({country:"US",currency:"usd",total:{label:`QuickStage Pro - ${e==="monthly"?"Monthly":"Annual"}`,amount:e==="monthly"?600:6e3},requestPayerName:!0,requestPayerEmail:!0});g.on("paymentmethod",async N=>{try{const j=await fetch("/api/billing/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({plan:e,payment_method_id:N.paymentMethod.id,payment_type:"apple_pay"})});if(!j.ok){const S=await j.json();throw new Error(S.details||"Failed to create subscription")}if((await j.json()).success)N.complete("success"),t==null||t();else throw new Error("Subscription creation failed")}catch(j){console.error("Apple Pay payment failed:",j),N.complete("fail"),r==null||r(j.message)}}),g.show()}catch(h){console.error("Apple Pay error:",h),r==null||r(h.message)}finally{d(!1)}}};return i?n.jsx("button",{onClick:x,disabled:s||o,className:"w-full mt-4 bg-black hover:bg-gray-800 text-white font-medium py-3 px-6 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",style:{backgroundColor:"#000",borderRadius:"8px"},children:o?"Processing...":n.jsxs("div",{className:"flex items-center",children:[n.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:[n.jsx("path",{d:"M13.25 7.5c-.414 0-.75.336-.75.75s.336.75.75.75c1.792 0 3.25 1.458 3.25 3.25S15.042 15.5 13.25 15.5c-1.792 0-3.25-1.458-3.25-3.25V8.25c0-.414-.336-.75-.75-.75s-.75.336-.75.75V12.25C8.5 15.564 11.186 18.25 14.5 18.25S20.5 15.564 20.5 12.25 17.814 6.25 14.5 6.25h-1.25z"}),n.jsx("path",{d:"M6.75 12.5c.414 0 .75-.336.75-.75s-.336-.75-.75-.75c-1.792 0-3.25-1.458-3.25-3.25S4.958 4.5 6.75 4.5c1.792 0 3.25 1.458 3.25 3.25v4c0 .414.336.75.75.75s.75-.336.75-.75v-4C11.5 4.436 8.814 1.75 5.5 1.75S-.5 4.436-.5 7.75 2.186 13.75 5.5 13.75h1.25z"})]}),"Pay"]})}):null}function yx(){const e=Pt(),t=fn(),{user:r}=wt(),[s,l]=p.useState(!1),a=new URLSearchParams(t.search),i=a.get("mode")||"upgrade",c=a.get("plan"),o=i==="trial";p.useEffect(()=>{r&&c&&(c==="monthly"||c==="annual")&&setTimeout(()=>{d(c)},500)},[r,c]);const d=async N=>{if(!r){e(`/login?mode=signup&plan=${N}&redirect=pricing`);return}l(!0);try{const j=o?"/billing/start-trial":"/billing/subscribe",y={plan:N},S=await R.post(j,y);if(S.url)window.location.href=S.url;else throw new Error("No checkout URL received")}catch(j){console.error("Failed to create checkout session:",j),alert(`Failed to start checkout: ${j.message}`)}finally{l(!1)}},x=6,h=60,g=Math.round((x*12-h)/(x*12)*100);return n.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 font-poppins",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsxs("div",{className:"text-center mb-12",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 font-inconsolata",children:"Choose Your QuickStage Pro Plan"}),n.jsx("p",{className:"mt-4 text-lg text-gray-600",children:o?"Start your 7-day free trial with either plan - cancel anytime":r?"Upgrade to QuickStage Pro for unlimited snapshots and features":"Create an account and upgrade to QuickStage Pro for unlimited snapshots and features"}),!r&&n.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-2xl mx-auto",children:n.jsxs("p",{className:"text-sm text-blue-700",children:["💡 ",n.jsx("strong",{children:"New to QuickStage?"})," Select your plan below and we'll create your account in the next step."]})})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8 relative",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 font-inconsolata",children:"Monthly"}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("span",{className:"text-4xl font-bold text-gray-900",children:["$",x]}),n.jsx("span",{className:"text-gray-500",children:"/month"})]}),n.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Billed monthly"})]}),n.jsxs("ul",{className:"mt-8 space-y-4",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),n.jsx("span",{className:"text-gray-700",children:"Unlimited snapshots"})]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),n.jsx("span",{className:"text-gray-700",children:"Extended expiration times"})]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),n.jsx("span",{className:"text-gray-700",children:"Cancel anytime"})]})]}),n.jsx("button",{onClick:()=>d("monthly"),disabled:s,className:"w-full mt-8 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Creating...":"Choose Monthly"}),n.jsx(xd,{plan:"monthly",disabled:s,onSuccess:()=>{e("/dashboard")},onError:N=>{console.error("Apple Pay error:",N),alert(`Apple Pay failed: ${N}`)},requiresAuth:!r,onAuthRequired:()=>e("/login?mode=signup&plan=monthly&redirect=pricing")})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-2 border-blue-500 p-8 relative",children:[n.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:n.jsxs("span",{className:"bg-blue-500 text-white px-4 py-1 rounded-full text-sm font-medium",children:["Save ",g,"%"]})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 font-inconsolata",children:"Annual"}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("span",{className:"text-4xl font-bold text-gray-900",children:["$",h]}),n.jsx("span",{className:"text-gray-500",children:"/year"})]}),n.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Billed annually • ",n.jsxs("span",{className:"text-green-600 font-medium",children:["$",x*12-h," savings"]})]})]}),n.jsxs("ul",{className:"mt-8 space-y-4",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),n.jsx("span",{className:"text-gray-700",children:"Everything in Monthly"})]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),n.jsx("span",{className:"text-gray-700",children:"2 months free"})]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx("svg",{className:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),n.jsx("span",{className:"text-gray-700",children:"Priority support"})]})]}),n.jsx("button",{onClick:()=>d("annual"),disabled:s,className:"w-full mt-8 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Creating...":"Choose Annual"}),n.jsx(xd,{plan:"annual",disabled:s,onSuccess:()=>{e("/dashboard")},onError:N=>{console.error("Apple Pay error:",N),alert(`Apple Pay failed: ${N}`)},requiresAuth:!r,onAuthRequired:()=>e("/login?mode=signup&plan=annual&redirect=pricing")})]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Have a promotion code?"}),n.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"You can enter it on the next step during checkout"})]})}),n.jsx("div",{className:"text-center",children:n.jsxs("button",{onClick:()=>e(r?"/dashboard":"/"),className:"text-gray-600 hover:text-gray-900 font-medium",children:["← Back ",r?"to Dashboard":"to Home"]})}),n.jsxs("div",{className:"mt-12 text-center",children:[n.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Secure payment powered by Stripe"}),n.jsxs("div",{className:"flex justify-center items-center space-x-6",children:[n.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"SSL Encrypted"]}),n.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Cancel Anytime"]})]})]})]})})}function jx(){var s;const[e,t]=p.useState("getting-started"),r=[{id:"getting-started",title:"Getting Started",content:n.jsxs("div",{className:"prose prose-lg max-w-none",children:[n.jsx("h2",{children:"Welcome to QuickStage"}),n.jsx("p",{children:"QuickStage is a lightning-fast platform for sharing and collaborating on web prototypes. Deploy your local development projects in seconds and get feedback from your team instantly."}),n.jsx("h3",{children:"Quick Setup Guide"}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 my-6",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"bg-blue-100 p-2 rounded-lg mr-4",children:n.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-lg font-semibold text-blue-900 mb-2",children:"3-Step Setup"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-blue-800",children:[n.jsx("li",{children:"Download and install the QuickStage extension for VS Code or Cursor"}),n.jsx("li",{children:"Open your project folder in your IDE"}),n.jsx("li",{children:'Click the "Stage" button to deploy your project instantly'})]})]})]})}),n.jsx("h3",{children:"Key Features"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 my-6",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"⚡ Lightning Fast"}),n.jsx("p",{className:"text-gray-600",children:"Deploy your projects in under 10 seconds with optimized build processes."})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"🔒 Secure Sharing"}),n.jsx("p",{className:"text-gray-600",children:"Password-protected snapshots with role-based access control."})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"💬 Collaboration"}),n.jsx("p",{className:"text-gray-600",children:"Real-time comments, reviews, and feedback collection."})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"📱 Mobile Ready"}),n.jsx("p",{className:"text-gray-600",children:"Responsive design works perfectly on all devices."})]})]})]})},{id:"project-organization",title:"Project Organization",content:n.jsxs("div",{className:"prose prose-lg max-w-none",children:[n.jsx("h2",{children:"Organizing Your Snapshots with Projects"}),n.jsx("p",{children:"Project folders help you organize snapshots by client, feature, or any categorization that makes sense for your workflow."}),n.jsx("h3",{children:"Creating Projects"}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-green-900 font-semibold mb-2",children:"💡 Pro Tip"}),n.jsx("p",{className:"text-green-800",children:"Use color coding to visually distinguish different types of projects (e.g., client work vs. personal projects)."})]}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[n.jsx("li",{children:"Navigate to your Dashboard"}),n.jsx("li",{children:'Click the "+" button next to "Projects" in the sidebar'}),n.jsx("li",{children:"Enter a project name and choose a color"}),n.jsx("li",{children:'Click "Create" to save your new project'})]}),n.jsx("h3",{children:"Moving Snapshots Between Projects"}),n.jsx("p",{children:"You can organize your snapshots by moving them into project folders:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Individual Move:"})," Edit a snapshot and select a different project"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Bulk Move:"}),' Select multiple snapshots and use the "Move to Project" bulk action']})]}),n.jsx("h3",{children:"Project Management"}),n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-yellow-900 font-semibold mb-2",children:"⚠️ Important"}),n.jsx("p",{className:"text-yellow-800",children:"You can only delete empty projects. Move or delete all snapshots before removing a project."})]}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Archive:"})," Hide completed projects without deleting them"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Reorder:"})," Drag and drop projects in the sidebar to organize them"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Delete:"})," Remove empty projects permanently"]})]})]})},{id:"snapshot-management",title:"Snapshot Management",content:n.jsxs("div",{className:"prose prose-lg max-w-none",children:[n.jsx("h2",{children:"Advanced Snapshot Features"}),n.jsx("p",{children:"QuickStage provides powerful tools for managing and organizing your snapshots with rich metadata and flexible organization options."}),n.jsx("h3",{children:"Enhanced Metadata"}),n.jsx("p",{children:"Add context to your snapshots with detailed metadata:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Name:"})," Give your snapshots meaningful names instead of using IDs"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Description:"})," Add detailed descriptions of what the snapshot contains"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Tags:"})," Use tags for easy filtering and organization"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Version:"})," Track version numbers or release names"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Client Name:"})," Associate snapshots with specific clients"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Milestone:"})," Mark project milestones or development phases"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Review Summary:"})," Add context for reviewers about what to focus on"]})]}),n.jsx("h3",{children:"Dashboard Sorting & Filtering"}),n.jsx("p",{children:"Find what you need quickly with powerful organization tools:"}),n.jsx("h4",{children:"Sortable Columns"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Created date (newest/oldest first)"}),n.jsx("li",{children:"Last modified date"}),n.jsx("li",{children:"Expiration date (expiring soon first)"}),n.jsx("li",{children:"View count (most/least popular)"}),n.jsx("li",{children:"Comment count"}),n.jsx("li",{children:"Snapshot name (alphabetical)"})]}),n.jsx("h4",{children:"Advanced Filtering"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Search:"})," Full-text search across names, descriptions, tags, and metadata"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Date Ranges:"})," Filter by creation or modification dates"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Project Folders:"})," View snapshots from specific projects"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Tags:"})," Filter by one or more tags"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Status:"})," Show active, expired, or all snapshots"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Review Status:"})," Filter by snapshots with pending reviews"]})]}),n.jsx("h3",{children:"Bulk Operations"}),n.jsx("p",{children:"Manage multiple snapshots efficiently:"}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-blue-900 font-semibold mb-2",children:"🚀 Time Saver"}),n.jsx("p",{className:"text-blue-800",children:"Select multiple snapshots using checkboxes to perform bulk operations like moving to projects, extending expiry, or adding tags."})]}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Move to Project:"})," Organize snapshots into project folders"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Extend Expiry:"})," Extend expiration dates for multiple snapshots"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Bulk Tagging:"})," Add or remove tags from multiple snapshots"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Batch Delete:"})," Remove multiple expired snapshots"]})]})]})},{id:"collaboration",title:"Comments & Collaboration",content:n.jsxs("div",{className:"prose prose-lg max-w-none",children:[n.jsx("h2",{children:"Collaborative Feedback System"}),n.jsx("p",{children:"QuickStage's advanced commenting system enables precise, contextual feedback on your prototypes with element pinning and threaded conversations."}),n.jsx("h3",{children:"Element Pinning"}),n.jsx("p",{children:"Pin comments directly to specific UI elements for precise feedback:"}),n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-purple-900 font-semibold mb-2",children:"✨ Interactive Comments"}),n.jsx("p",{className:"text-purple-800",children:"Click on any element in your prototype to attach comments. Comments automatically adapt to different screen sizes and device orientations."})]}),n.jsx("h4",{children:"How Element Pinning Works"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[n.jsx("li",{children:"Navigate to your snapshot in the viewer"}),n.jsx("li",{children:"Click the comment button to enter comment mode"}),n.jsx("li",{children:"Click on any UI element to pin a comment"}),n.jsx("li",{children:"Type your feedback and submit"}),n.jsx("li",{children:"Comments appear as numbered bubbles on hover"})]}),n.jsx("h3",{children:"Threaded Conversations"}),n.jsx("p",{children:"Keep discussions organized with nested reply chains:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Replies:"})," Respond to specific comments to create conversation threads"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Mentions:"})," Use @username to notify team members"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Rich Text:"})," Format comments with Markdown, code snippets, and emojis"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"File Attachments:"})," Attach images, documents, and design files"]})]}),n.jsx("h3",{children:"Comment States"}),n.jsx("p",{children:"Track the lifecycle of feedback with comment states:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Draft:"})," Work on comments before publishing"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Published:"})," Live comments visible to all team members"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Resolved:"})," Mark feedback as addressed"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Archived:"})," Hide old conversations while preserving history"]})]}),n.jsx("h3",{children:"File Attachments"}),n.jsx("p",{children:"Enhance your feedback with visual examples:"}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-green-900 font-semibold mb-2",children:"📎 Supported Formats"}),n.jsx("p",{className:"text-green-800",children:"JPG, PNG, GIF, PDF, TXT, MD, DOC, DOCX files up to 10MB each."})]})]})},{id:"review-workflows",title:"Review Workflows",content:n.jsxs("div",{className:"prose prose-lg max-w-none",children:[n.jsx("h2",{children:"Structured Review Process"}),n.jsx("p",{children:"Streamline your feedback collection with formal review workflows, deadlines, and approval tracking."}),n.jsx("h3",{children:"Creating Review Requests"}),n.jsx("p",{children:"Request formal reviews from specific team members:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[n.jsx("li",{children:"Navigate to your snapshot"}),n.jsx("li",{children:'Click "Request Review" button'}),n.jsx("li",{children:"Select team members to review"}),n.jsx("li",{children:"Set an optional deadline"}),n.jsx("li",{children:"Add review notes or specific areas to focus on"}),n.jsx("li",{children:"Send the review request"})]}),n.jsx("h3",{children:"Review Status Tracking"}),n.jsx("p",{children:"Monitor review progress with visual indicators:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Pending:"})," Review requested but not yet started"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"In Progress:"})," Some reviewers have started"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Completed:"})," All reviewers have submitted feedback"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Overdue:"})," Review deadline has passed"]})]}),n.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-orange-900 font-semibold mb-2",children:"⏰ Deadline Management"}),n.jsx("p",{className:"text-orange-800",children:"Set review deadlines to ensure timely feedback. Automatic reminders are sent 24 hours before the deadline."})]}),n.jsx("h3",{children:"Review Dashboard"}),n.jsx("p",{children:"Track all your reviews in one place:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Reviews Requested:"})," Reviews you've asked others to complete"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Reviews Assigned:"})," Reviews assigned to you by others"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Overdue Reviews:"})," Reviews past their deadline"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Completed Reviews:"})," Review history and outcomes"]})]}),n.jsx("h3",{children:"Approval Workflow"}),n.jsx("p",{children:"Each reviewer can provide one of these responses:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Approved:"})," No changes needed, ready to proceed"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Changes Requested:"})," Specific feedback provided, changes needed"]})]}),n.jsx("h3",{children:"Automated Follow-ups"}),n.jsx("p",{children:"Stay on top of reviews with automatic notifications:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Email reminders sent to reviewers before deadlines"}),n.jsx("li",{children:"Notifications when reviews are completed"}),n.jsx("li",{children:"Summary emails for review requesters"}),n.jsx("li",{children:"Escalation notifications for overdue reviews"})]})]})},{id:"best-practices",title:"Best Practices",content:n.jsxs("div",{className:"prose prose-lg max-w-none",children:[n.jsx("h2",{children:"QuickStage Best Practices"}),n.jsx("p",{children:"Maximize your team's productivity with these proven workflows and organizational strategies."}),n.jsx("h3",{children:"Project Organization"}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-blue-900 font-semibold mb-2",children:"🎯 Organization Strategy"}),n.jsx("p",{className:"text-blue-800",children:'Create projects for each client, product feature, or development sprint. Use consistent naming conventions like "Client-ProjectName" or "Sprint-XX-FeatureName".'})]}),n.jsx("h4",{children:"Recommended Project Structure"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"By Client:"})," Separate projects for each client or customer"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"By Feature:"})," Group related functionality together"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"By Sprint:"})," Organize by development cycles"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"By Environment:"})," Development, staging, production snapshots"]})]}),n.jsx("h3",{children:"Snapshot Naming"}),n.jsx("p",{children:"Use descriptive names that provide context:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Include Version:"}),' "User Dashboard v2.1"']}),n.jsxs("li",{children:[n.jsx("strong",{children:"Add Context:"}),' "Homepage Mobile Responsive Fix"']}),n.jsxs("li",{children:[n.jsx("strong",{children:"Use Dates:"}),' "Landing Page 2024-01-15"']}),n.jsxs("li",{children:[n.jsx("strong",{children:"Specify Purpose:"}),' "Client Review - Shopping Cart"']})]}),n.jsx("h3",{children:"Effective Tagging"}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-green-900 font-semibold mb-2",children:"🏷️ Tag Strategy"}),n.jsx("p",{className:"text-green-800",children:'Use consistent tags across your team. Create a tagging guide with standard tags like "mobile", "desktop", "bug-fix", "new-feature", "client-review".'})]}),n.jsx("h4",{children:"Tag Categories"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Platform:"})," mobile, desktop, tablet"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Status:"})," draft, review, approved, deployed"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Type:"})," bug-fix, feature, enhancement, prototype"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Priority:"})," urgent, high, medium, low"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Audience:"})," internal, client, stakeholder"]})]}),n.jsx("h3",{children:"Review Workflow"}),n.jsx("h4",{children:"Review Request Guidelines"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Be Specific:"})," Provide clear review notes about what feedback you need"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Set Realistic Deadlines:"})," Allow 24-48 hours for meaningful review"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Include Context:"})," Explain what changed since the last version"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Assign Appropriately:"})," Choose reviewers based on expertise needed"]})]}),n.jsx("h4",{children:"Giving Effective Feedback"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Be Constructive:"})," Explain the issue and suggest solutions"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Use Element Pinning:"})," Attach comments to specific UI elements"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Provide Examples:"})," Attach reference images or mockups"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Consider Context:"})," Account for device types and user scenarios"]})]}),n.jsx("h3",{children:"Collaboration Tips"}),n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-purple-900 font-semibold mb-2",children:"👥 Team Collaboration"}),n.jsx("p",{className:"text-purple-800",children:"Establish team conventions for commenting, reviewing, and organizing snapshots. Regular retrospectives help refine your workflow."})]}),n.jsx("h4",{children:"Team Workflow"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Daily Standup:"})," Share recent snapshots for quick feedback"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Sprint Reviews:"})," Use formal review workflow for sprint demos"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Client Presentations:"})," Create dedicated client review projects"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Retrospectives:"})," Review comment patterns and workflow efficiency"]})]})]})},{id:"troubleshooting",title:"Troubleshooting",content:n.jsxs("div",{className:"prose prose-lg max-w-none",children:[n.jsx("h2",{children:"Common Issues & Solutions"}),n.jsx("p",{children:"Quick solutions to the most common QuickStage issues and questions."}),n.jsx("h3",{children:"Extension Issues"}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-red-900 font-semibold mb-2",children:'❌ "Stage" Button Not Appearing'}),n.jsxs("div",{className:"text-red-800",children:[n.jsx("p",{className:"mb-2",children:n.jsx("strong",{children:"Solutions:"})}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Restart VS Code/Cursor after installing the extension"}),n.jsx("li",{children:"Check that you have a valid project folder open"}),n.jsx("li",{children:"Ensure the extension is enabled in the Extensions panel"}),n.jsx("li",{children:"Update to the latest version of the extension"})]})]})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-red-900 font-semibold mb-2",children:"⚠️ Upload Fails or Times Out"}),n.jsxs("div",{className:"text-red-800",children:[n.jsx("p",{className:"mb-2",children:n.jsx("strong",{children:"Common Causes & Solutions:"})}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Large Files:"})," Remove or reduce large assets (images, videos)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"node_modules:"})," Ensure node_modules is in .gitignore"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Build Artifacts:"})," Clean build folders (dist/, build/) before staging"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Network Issues:"})," Check your internet connection and try again"]})]})]})]}),n.jsx("h3",{children:"Dashboard & Viewing Issues"}),n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-yellow-900 font-semibold mb-2",children:"🔍 Snapshots Not Loading"}),n.jsxs("div",{className:"text-yellow-800",children:[n.jsx("p",{className:"mb-2",children:n.jsx("strong",{children:"Troubleshooting Steps:"})}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Refresh the page (Ctrl+F5 or Cmd+Shift+R)"}),n.jsx("li",{children:"Clear browser cache and cookies for quickstage.tech"}),n.jsx("li",{children:"Check if you're logged in correctly"}),n.jsx("li",{children:"Try logging out and logging back in"})]})]})]}),n.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-yellow-900 font-semibold mb-2",children:"🚫 Password Protected Snapshot Access"}),n.jsxs("div",{className:"text-yellow-800",children:[n.jsx("p",{className:"mb-2",children:n.jsx("strong",{children:"If you can't access a snapshot:"})}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Ensure you're entering the password exactly as provided"}),n.jsx("li",{children:"Check for extra spaces or hidden characters"}),n.jsx("li",{children:"Try copying and pasting the password"}),n.jsx("li",{children:"Contact the snapshot owner for a new password"})]})]})]}),n.jsx("h3",{children:"Comments & Collaboration Issues"}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-blue-900 font-semibold mb-2",children:"💬 Comments Not Appearing"}),n.jsxs("div",{className:"text-blue-800",children:[n.jsx("p",{className:"mb-2",children:n.jsx("strong",{children:"Possible Solutions:"})}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Refresh the snapshot viewer page"}),n.jsx("li",{children:'Check if comments are in "resolved" or "archived" state'}),n.jsx("li",{children:"Verify you have permission to view comments"}),n.jsx("li",{children:"Try disabling browser ad blockers temporarily"})]})]})]}),n.jsx("h3",{children:"Account & Billing Issues"}),n.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-purple-900 font-semibold mb-2",children:"💳 Pro Features Not Available"}),n.jsxs("div",{className:"text-purple-800",children:[n.jsx("p",{className:"mb-2",children:n.jsx("strong",{children:"Check These Items:"})}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsx("li",{children:"Verify your subscription status in Settings"}),n.jsx("li",{children:"Ensure payment method is up to date"}),n.jsx("li",{children:"Check if your trial has expired"}),n.jsx("li",{children:"Log out and log back in to refresh permissions"})]})]})]}),n.jsx("h3",{children:"Performance & Speed"}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 my-4",children:[n.jsx("h4",{className:"text-green-900 font-semibold mb-2",children:"🐌 Slow Loading or Deployment"}),n.jsxs("div",{className:"text-green-800",children:[n.jsx("p",{className:"mb-2",children:n.jsx("strong",{children:"Optimization Tips:"})}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Exclude Large Files:"})," Use .gitignore to exclude unnecessary files"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Optimize Images:"})," Compress images before including in projects"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Clean Dependencies:"})," Remove unused npm packages"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Build Optimization:"})," Use production builds when possible"]})]})]})]}),n.jsx("h3",{children:"Getting Help"}),n.jsx("p",{children:"If you're still experiencing issues:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Check Status:"})," Visit our status page for system updates"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Contact Support:"})," Email support@quickstage.tech with detailed information"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Community:"})," Join our Discord community for peer support"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Documentation:"})," Review this documentation for additional guidance"]})]}),n.jsxs("div",{className:"bg-gray-100 border border-gray-300 rounded-lg p-4 my-6",children:[n.jsx("h4",{className:"text-gray-900 font-semibold mb-2",children:"📋 When Contacting Support"}),n.jsx("p",{className:"text-gray-700 mb-2",children:"Please include:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:[n.jsx("li",{children:"Your account email address"}),n.jsx("li",{children:"Browser and version (Chrome 91, Safari 14, etc.)"}),n.jsx("li",{children:"Operating system (Windows 10, macOS Big Sur, etc.)"}),n.jsx("li",{children:"Steps to reproduce the issue"}),n.jsx("li",{children:"Screenshots or error messages if applicable"})]})]})]})}];return n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between h-16",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ue,{to:"/",className:"flex items-center",children:n.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"QuickStage"})}),n.jsx("span",{className:"ml-4 text-gray-500",children:"/"}),n.jsx("span",{className:"ml-4 text-gray-900 font-medium",children:"Documentation"})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(Ue,{to:"/dashboard",className:"text-indigo-600 hover:text-indigo-800",children:"Dashboard"}),n.jsx(Ue,{to:"/login",className:"text-gray-600 hover:text-gray-900",children:"Sign In"})]})]})})}),n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[n.jsx("div",{className:"lg:w-64 flex-shrink-0",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[n.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Documentation"}),n.jsx("nav",{className:"space-y-2",children:r.map(l=>n.jsx("button",{onClick:()=>t(l.id),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${e===l.id?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:l.title},l.id))})]})}),n.jsx("div",{className:"flex-1",children:n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:(s=r.find(l=>l.id===e))==null?void 0:s.content})})]})})]})}const Km=p.createContext(void 0),wx=[{id:"welcome",title:"Welcome to QuickStage",description:"Learn the basics of sharing and collaborating on web prototypes",category:"getting-started",estimatedTime:3,steps:[{id:"welcome-1",title:"Welcome!",content:"QuickStage helps you share web prototypes instantly and collaborate with your team through comments and feedback.",type:"modal"},{id:"welcome-2",title:"Create Your First Snapshot",content:"Upload your HTML, CSS, and JavaScript files or use our browser extension to capture existing websites.",type:"modal"},{id:"welcome-3",title:"Share & Collaborate",content:"Get a shareable URL instantly. Team members can view your prototype and leave contextual comments.",type:"modal"}]},{id:"dashboard-tour",title:"Dashboard Tour",description:"Learn how to organize and manage your snapshots",category:"getting-started",estimatedTime:5,prerequisites:["welcome"],steps:[{id:"dashboard-1",title:"Your Snapshots",content:"This table shows all your uploaded snapshots. You can sort, filter, and search to find specific prototypes.",type:"highlight",target:'[data-testid="snapshot-table"]',position:"top"},{id:"dashboard-2",title:"Project Organization",content:"Use projects to organize your snapshots by client, feature, or team. Create folders to keep things tidy.",type:"highlight",target:'[data-testid="project-sidebar"]',position:"right"},{id:"dashboard-3",title:"Bulk Operations",content:"Select multiple snapshots to perform bulk operations like moving to projects or extending expiry dates.",type:"info"}]},{id:"comments-tutorial",title:"Commenting System",description:"Learn how to use contextual comments for feedback",category:"feature-specific",estimatedTime:4,steps:[{id:"comments-1",title:"Contextual Comments",content:"Click anywhere on your prototype to leave contextual feedback pinned to specific elements.",type:"info"},{id:"comments-2",title:"Comment Threads",content:"Start conversations with threaded replies and mark issues as resolved when fixed.",type:"info"},{id:"comments-3",title:"File Attachments",content:"Attach images, documents, or design files to provide additional context to your feedback.",type:"info"}]}];function bx({children:e}){const{user:t,isAuthenticated:r}=wt(),[s,l]=p.useState(null),[a,i]=p.useState(null),[c,o]=p.useState(0),[d,x]=p.useState(!1),[h,g]=p.useState(!1);p.useEffect(()=>{if(!r||!t){l(null),g(!1);return}N()},[r,t]);const N=async()=>{try{x(!0);const E=await R.get("/api/onboarding");if(E.success){l(E.data);const A=await R.get("/api/onboarding/should-show-welcome");A.success&&g(A.data.shouldShow)}}catch(E){console.error("Failed to load onboarding state:",E)}finally{x(!1)}},j=async E=>{try{const A=await R.put("/api/onboarding",E);A.success&&l(A.data)}catch(A){console.error("Failed to update onboarding state:",A)}},y=E=>{const A=wx.find(F=>F.id===E);A&&(i(A),o(0),k(E,"started"))},S=()=>{a&&(c<a.steps.length-1?o(c+1):u())},f=()=>{c>0&&o(c-1)},m=()=>{a&&(k(a.id,"skipped",c),i(null),o(0))},u=async()=>{if(!a||!s)return;const E=a.id;k(E,"completed");const A=[...s.completedTutorials,E];await j({completedTutorials:A}),i(null),o(0)},b=async()=>{s&&(await j({hasSeenWelcome:!0}),g(!1))},w=async()=>{s&&(await j({skippedWelcome:!0}),g(!1))},k=async(E,A,F)=>{try{await R.post("/api/onboarding/tutorial",{tutorialId:E,action:A,step:F})}catch(D){console.error("Failed to track tutorial event:",D)}},P={onboarding:s,activeTutorial:a,currentStep:c,isLoading:d,shouldShowWelcome:h,startTutorial:y,nextStep:S,previousStep:f,skipTutorial:m,completeTutorial:u,markWelcomeSeen:b,skipWelcome:w,trackTutorialEvent:k};return n.jsx(Km.Provider,{value:P,children:e})}function Nx(){const e=p.useContext(Km);if(e===void 0)throw new Error("useTutorial must be used within a TutorialProvider");return e}function kx(){var g;const{shouldShowWelcome:e,markWelcomeSeen:t,skipWelcome:r,startTutorial:s}=Nx(),[l,a]=p.useState(0);if(!e)return null;const i=[{title:"Welcome to QuickStage! 🚀",description:"Share and collaborate on web prototypes instantly",features:["Upload HTML, CSS & JavaScript files","Get shareable URLs in seconds","Collect contextual feedback with comments","Organize projects and track versions"],image:"🎨"},{title:"Lightning Fast Sharing ⚡",description:"From prototype to shareable link in 10 seconds",features:["Drag & drop file upload","Beautiful, professional URLs","Mobile-responsive viewing","Password protection available"],image:"🔗"},{title:"Collaborative Feedback 💬",description:"Get precise feedback with contextual comments",features:["Pin comments to specific UI elements","Thread conversations and replies","Attach files and screenshots","Mark issues as resolved"],image:"💡"},{title:"Team Organization 📁",description:"Keep your prototypes organized and accessible",features:["Create projects and folders","Bulk operations on snapshots","Advanced filtering and search","Analytics and usage tracking"],image:"📊"}],c=i[l],o=()=>{l<i.length-1&&a(l+1)},d=()=>{l>0&&a(l-1)},x=()=>{t(),s("dashboard-tour")},h=()=>{r()};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[n.jsx("div",{className:"px-8 py-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 font-inconsolata",children:c==null?void 0:c.title}),n.jsx("p",{className:"text-gray-600 mt-1",children:c==null?void 0:c.description})]}),n.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 text-sm",children:"Skip tour"})]})}),n.jsxs("div",{className:"px-8 py-6",children:[n.jsx("div",{className:"text-center mb-8",children:n.jsx("div",{className:"text-6xl mb-4",children:c==null?void 0:c.image})}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 font-inconsolata",children:"Key Features:"}),n.jsx("ul",{className:"space-y-3",children:(g=c==null?void 0:c.features)==null?void 0:g.map((N,j)=>n.jsxs("li",{className:"flex items-start",children:[n.jsx("svg",{className:"w-5 h-5 text-green-500 mt-0.5 mr-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),n.jsx("span",{className:"text-gray-700",children:N})]},j))})]}),l===i.length-1&&n.jsxs("div",{className:"bg-blue-50 rounded-xl p-6",children:[n.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"Ready to get started?"}),n.jsx("p",{className:"text-blue-700 text-sm mb-4",children:"We'll walk you through the dashboard and show you how to create your first prototype."}),n.jsx("button",{onClick:x,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Start Dashboard Tour"})]})]})]}),n.jsx("div",{className:"px-8 py-6 border-t border-gray-200 bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex space-x-2",children:i.map((N,j)=>n.jsx("div",{className:`w-3 h-3 rounded-full transition-colors ${j===l?"bg-blue-600":j<l?"bg-green-500":"bg-gray-300"}`},j))}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:d,disabled:l===0,className:"px-4 py-2 text-gray-600 disabled:text-gray-400 hover:text-gray-800 disabled:cursor-not-allowed",children:"Previous"}),l<i.length-1?n.jsx("button",{onClick:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Next"}):n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:h,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Maybe Later"}),n.jsx("button",{onClick:x,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Get Started! 🎉"})]})]})]})})]})})}function ma({children:e}){const{user:t,loading:r}=wt();return r?n.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):t?n.jsx(n.Fragment,{children:e}):n.jsx(ii,{to:"/login",replace:!0})}ha.createRoot(document.getElementById("root")).render(n.jsx(qn.StrictMode,{children:n.jsx(Kf,{children:n.jsx(bx,{children:n.jsxs(Hf,{children:[n.jsxs(Ff,{children:[n.jsx(lt,{path:"/",element:n.jsx(lx,{})}),n.jsx(lt,{path:"/login",element:n.jsx(ax,{})}),n.jsx(lt,{path:"/pricing",element:n.jsx(yx,{})}),n.jsx(lt,{path:"/docs",element:n.jsx(jx,{})}),n.jsx(lt,{path:"/dashboard",element:n.jsx(ma,{children:n.jsx(ex,{})})}),n.jsx(lt,{path:"/settings",element:n.jsx(ma,{children:n.jsx(nx,{})})}),n.jsx(lt,{path:"/admin",element:n.jsx(ma,{children:n.jsx(ix,{})})}),n.jsx(lt,{path:"/s/:id/*",element:n.jsx(hd,{})}),n.jsx(lt,{path:"/viewer/:id",element:n.jsx(hd,{})}),n.jsx(lt,{path:"/app/*",element:n.jsx(ii,{to:"/dashboard",replace:!0})}),n.jsx(lt,{path:"*",element:n.jsx(ii,{to:"/",replace:!0})})]}),n.jsx(kx,{})]})})})}));
//# sourceMappingURL=index-CKATDqN5.js.map
